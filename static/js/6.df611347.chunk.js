(this["webpackJsonporient-insurance"]=this["webpackJsonporient-insurance"]||[]).push([[6],{186:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n),c=(a(168),a(169)),l=(a(170),a(171)),u=(a(178),a(179));function s(e){var t=e.pageTitle;return r.a.createElement(c.a,{justify:"center"},r.a.createElement(l.a,null,r.a.createElement(u.a.Title,{level:3},t)))}a(215);function i(e){var t=e.pageTitle,a=e.children;return r.a.createElement("section",{className:"Page"},t&&r.a.createElement(s,{pageTitle:t}),a)}},193:function(e,t,a){},195:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return m}));var n=a(172),r=a.n(n),c=a(173),l=a(197);function u(e){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return{firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,email:e.email,idNumber:e.idNumber,phoneNumber:e.phoneNumber,addressNumber:e.addressNumber,addressCode:e.addressCode,addressTown:e.addressTown}}(t),e.next=3,Object(l.a)({url:"".concat("/admins","/register"),method:"POST",body:a,headers:{Authorization:"Bearer ".concat(t.token)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.next=3,Object(l.a)({url:"".concat("/admins","/login"),method:"POST",body:{email:a,password:n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(r.a.mark((function e(t){var a,n,c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.adminId,n=t.oldPassword,c=t.newPassword,u=t.newPasswordConfirm,e.next=3,Object(l.a)({url:"".concat("/admins","/").concat(a,"/change-password"),method:"PUT",body:{oldPassword:n,newPassword:c,newPasswordConfirm:u}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},197:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(172),r=a.n(n),c=a(66),l=a(173),u=a(40),s=a(45);function i(e){return console.log("TODO: handle error",e),u.a.dispatch(Object(s.b)(e)),null}var o=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),m=o.NODE_ENV,d=o.SERVER_URL,p="production"===m?d:"http://localhost:4000/api/v1";function E(e){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(r.a.mark((function e(t){var a,n,l,u,s,o,m,d,E,f,h,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.method,l=t.body,u=t.query,s=t.headers,e.prev=1,o=b(u),m="".concat(p).concat(a,"?").concat(o),e.next=6,fetch(m,{method:n,headers:Object(c.a)({"Content-Type":"application/json"},s),body:JSON.stringify(l)});case 6:return d=e.sent,e.next=9,d.json();case 9:if(E=e.sent,f=E.status,h=E.data,g=E.error,!(d.status>=500)){e.next=15;break}return e.abrupt("return",i("Uh oh, something's not right. Try again later."));case 15:if(!(d.status>=400&&g)){e.next=17;break}return e.abrupt("return",i(g));case 17:return e.abrupt("return",{status:f,data:h,error:g});case 20:e.prev=20,e.t0=e.catch(1),i(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function b(e){if(!e)return"";var t=[];for(var a in e)if(e.hasOwnProperty(a)&&"function"!==typeof a){var n=e[a];n&&(n=n.toString(),a=encodeURIComponent(a.replace(" ","+")),n=encodeURIComponent(n.replace(" ","+")),t.push("".concat(a,"=").concat(n)))}return t.join("&")}},199:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a(168);var n=a(169),r=(a(170),a(171)),c=(a(178),a(179)),l=a(0),u=a.n(l),s=a(186);function i(e){var t=e.title,a=e.children;return u.a.createElement(s.a,null,u.a.createElement(n.a,{justify:"center"},u.a.createElement(r.a,null,u.a.createElement("img",{src:"orient-insurance/orient-logo.png",alt:"Company logo",style:{margin:"0 auto",display:"block",borderRadius:"10%",width:"75px",marginBottom:"1em"}}),u.a.createElement(c.a.Title,{level:3},t))),a)}},201:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));a(170);var n=a(171),r=(a(168),a(169)),c=(a(182),a(183)),l=a(172),u=a.n(l),s=a(66),i=a(173),o=(a(175),a(176)),m=a(180),d=a(0),p=a.n(d),E=a(13),f=a(65),b=a(199),h=(a(187),a(185)),g=(a(181),a(184));function v(){return p.a.createElement(h.a,null,p.a.createElement(r.a,{gutter:16},p.a.createElement(n.a,{span:24},p.a.createElement(o.a.Item,{label:"Old password",name:"oldPassword",rules:[{required:!0,message:"Password is required"}]},p.a.createElement(g.a.Password,null)))),p.a.createElement(r.a,{gutter:16},p.a.createElement(n.a,{span:24},p.a.createElement(o.a.Item,{label:"New password",name:"newPassword",rules:[{required:!0,message:"Password is required"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=^.{8,45}$)/,message:"Password should contain numbers, letters and \n                at least 8 characters"}]},p.a.createElement(g.a.Password,null)))),p.a.createElement(r.a,{gutter:16},p.a.createElement(n.a,{span:24},p.a.createElement(o.a.Item,{label:"Confirm new password",dependencies:["newPassword"],hasFeedback:!0,name:"newPasswordConfirm",rules:[{required:!0,message:"Password is required"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return t("newPassword")===a?Promise.resolve():Promise.reject("Passwords do not match.")}}}]},p.a.createElement(g.a.Password,null)))))}var y=a(195);a(193);function O(e){var t=e.addError,a=Object(E.h)(),l=o.a.useForm(),h=Object(m.a)(l,1)[0],g=Object(d.useState)(!1),O=Object(m.a)(g,2),j=O[0],x=O[1],w=Object(d.useState)(!1),I=Object(m.a)(w,2),k=I[0],N=I[1],P=function(){var e=Object(i.a)(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,h.validateFields();case 4:return n=e.sent,e.next=7,Object(y.a)(Object(s.a)({},null===a||void 0===a?void 0:a.state,{},n));case 7:(r=e.sent)&&r.data?(h.resetFields(),N(!0)):r&&r.error&&t(r.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurred",e.t0);case 14:return e.prev=14,x(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(b.a,{title:"Change password"},p.a.createElement(r.a,{justify:"center"},p.a.createElement(n.a,{xs:20,sm:14,md:10,lg:8,xl:6},k?p.a.createElement("div",null,"Password change successful. Proceed to ",p.a.createElement(f.b,{to:"/login"},"login")):p.a.createElement(o.a,{className:"OForm",form:h},p.a.createElement(v,null),p.a.createElement(r.a,{justify:"space-between"},p.a.createElement(f.b,{to:"/login"},p.a.createElement(c.a,{type:"link"},"Login")),p.a.createElement(c.a,{type:"primary",onClick:P,loading:j},"Submit"))))))}},204:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(170);var n=a(171),r=a(0),c=a.n(r);function l(e){var t=e.children;return c.a.createElement(n.a,{xs:24,sm:12,lg:8},t)}},215:function(e,t,a){},250:function(e,t,a){"use strict";a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return k}));a(170);var n=a(171),r=(a(168),a(169)),c=(a(182),a(183)),l=a(172),u=a.n(l),s=a(173),i=(a(175),a(176)),o=a(180),m=a(0),d=a.n(m),p=(a(187),a(185)),E=(a(181),a(184)),f=a(204),b={pattern:/^[a-zA-Z]{2,}$/,message:"Invalid value"};function h(){return d.a.createElement(p.a,{title:"Admin details"},d.a.createElement(r.a,{gutter:16},d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{name:"firstName",label:"First name",rules:[{required:!0,message:"First name is required"},b]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{name:"middleName",label:"Middle name",rules:[b]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{name:"lastName",label:"Last name",rules:[{required:!0,message:"Last name is required"},b]},d.a.createElement(E.a,null)))),d.a.createElement(r.a,{gutter:16},d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9]{1,}$/,message:"Address number is invalid"}]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^\d{1,}$/,message:"Postal code should be a number"}]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Town name is invalid"}]},d.a.createElement(E.a,null)))),d.a.createElement(r.a,{gutter:16},d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"ID/Passport number",name:"idNumber",rules:[{required:!0,message:"ID number is required"},{pattern:/^[0-9]{1,}$/,message:"ID/Passport should be a number"}]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{required:!0,message:"Phone number is required"},{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid phone number"}]},d.a.createElement(E.a,null)))))}var g=a(186),v=a(195);a(193);function y(e){var t=e.addSuccess,a=e.addError,l=i.a.useForm(),p=Object(o.a)(l,1)[0],E=Object(m.useState)(!1),f=Object(o.a)(E,2),b=f[0],y=f[1],O=function(){var e=Object(s.a)(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,p.validateFields();case 4:return n=e.sent,e.next=7,Object(v.c)(n);case 7:(r=e.sent)&&r.data?(t("Data submitted successfully"),p.resetFields()):r&&r.error&&a(r.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a(e.t0.message);case 14:return e.prev=14,y(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(g.a,{pageTitle:"Register new admin"},d.a.createElement(r.a,{justify:"center"},d.a.createElement(n.a,null,d.a.createElement(i.a,{className:"OForm",form:p},d.a.createElement(h,null),d.a.createElement(r.a,{justify:"end"},d.a.createElement(c.a,{type:"primary",onClick:O,loading:b},"Save"))))))}var O=a(66),j=a(13),x=a(199),w=(a(248),a(251));function I(){return d.a.createElement(p.a,null,d.a.createElement(r.a,{gutter:16},d.a.createElement(n.a,{span:24},d.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},d.a.createElement(E.a,null)))),d.a.createElement(r.a,{gutter:16},d.a.createElement(n.a,{span:24},d.a.createElement(i.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Password is required"}]},d.a.createElement(E.a.Password,null)))),d.a.createElement(i.a.Item,{name:"rememberMe",valuePropName:"checked",extra:d.a.createElement("span",null,"Remember me"),className:"RememberMeInput"},d.a.createElement(w.a,{defaultChecked:!1})))}function k(e){var t=e.login,a=e.addError,l=e.auth,p=Object(j.g)(),E=Object(j.h)(),f=i.a.useForm(),b=Object(o.a)(f,1)[0],h=Object(m.useState)(!1),g=Object(o.a)(h,2),y=g[0],w=g[1],k=function(){var e=Object(s.a)(u.a.mark((function e(){var n,r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,b.validateFields();case 4:return n=e.sent,e.next=7,Object(v.b)(n);case 7:(r=e.sent)&&r.error?"NEEDS_RESET"===(null===(c=r.error)||void 0===c?void 0:c.accState)?(a("You need to change your password"),p.push({pathname:"/change-password",state:{adminId:r.error.id}})):a(r.error):r&&r.data&&(b.resetFields(),t(Object(O.a)({rememberMe:n.rememberMe},r.data)),p.push((null===E||void 0===E||null===(l=E.state)||void 0===l?void 0:l.attemptedRoute)||"/app")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurred",e.t0);case 14:return e.prev=14,w(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return(null===l||void 0===l?void 0:l.token)?d.a.createElement(j.a,{to:"/app"}):d.a.createElement(x.a,{title:"Admin login"},d.a.createElement(r.a,{justify:"center"},d.a.createElement(n.a,{xs:20,sm:14,md:10,lg:8,xl:6},d.a.createElement(i.a,{className:"OForm",form:b},d.a.createElement(I,null),d.a.createElement(r.a,{justify:"end"},d.a.createElement(c.a,{type:"primary",onClick:k,loading:y},"Log in"))))))}a(201)},297:function(e,t,a){},445:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){},451:function(e,t,a){},460:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(180),c=(a(202),a(208)),l=(a(231),a(233)),u=a(0),s=a.n(u),i=a(13),o=(a(232),a(238)),m=(a(294),a(454)),d=a(461),p=a(462),E=a(463),f=a(464),b=a(465),h=a(466),g=a(467),v=a(468),y=a(469),O=a(470),j=(a(297),a(65)),x=l.a.Sider,w=m.a.SubMenu;function I(e){var t=e.collapsed,a=e.open,n=void 0===a||a;return s.a.createElement(x,{trigger:null,collapsible:!0,collapsed:t,className:n?"open":""},s.a.createElement("div",{className:"logo"},s.a.createElement("img",{src:"/orient-insurance/orient-logo.png",alt:"Company logo"})),s.a.createElement(m.a,{theme:"dark",mode:"inline"},s.a.createElement(w,{key:"sub1",title:s.a.createElement("span",null,s.a.createElement(d.a,null),s.a.createElement("span",null,"Clients"))},s.a.createElement(m.a.Item,{key:"1"},s.a.createElement(j.b,{to:"/app/clients/new"},s.a.createElement(p.a,null),s.a.createElement("span",null,"New client"))),s.a.createElement(m.a.Item,{key:"2"},s.a.createElement(j.b,{to:"/app/clients"},s.a.createElement(E.a,null),s.a.createElement("span",null,"List clients")))),s.a.createElement(w,{key:"sub2",title:s.a.createElement("span",null,s.a.createElement(f.a,null),s.a.createElement("span",null,"Issuers"))},s.a.createElement(m.a.Item,{key:"3"},s.a.createElement(j.b,{to:"/app/insurers/new"},s.a.createElement(b.a,null),s.a.createElement("span",null,"New issuer"))),s.a.createElement(m.a.Item,{key:"4"},s.a.createElement(j.b,{to:"/app/insurers"},s.a.createElement(h.a,null),s.a.createElement("span",null,"List issuers")))),s.a.createElement(w,{key:"sub3",title:s.a.createElement("span",null,s.a.createElement(g.a,null),s.a.createElement("span",null,"Reports"))},s.a.createElement(m.a.Item,{key:"5"},s.a.createElement(j.b,{to:"/app/reports/applications/new"},s.a.createElement(v.a,null),s.a.createElement("span",null,"New applications"))),s.a.createElement(m.a.Item,{key:"6"},s.a.createElement(j.b,{to:"/app/reports/applications/renewals"},s.a.createElement(y.a,null),s.a.createElement("span",null,"Renewal applications")))),s.a.createElement(o.a,null),s.a.createElement(m.a.Item,{key:"7"},s.a.createElement(j.b,{to:"/app/admins/new"},s.a.createElement(O.a,null),s.a.createElement("span",null,"Add admin")))))}a(260);var k=a(286),N=(a(182),a(183)),P=a(471),C=a(472),T=a(473),S=a(474),q=a(475),A=function(e){return(e=e.split(" ")).map((function(e){return(e=e.split(""))[0]=e[0].toUpperCase(),e.join("")})).join(" ")},R=l.a.Header,F=c.a.useBreakpoint;var L=a(45),D=Object(n.b)((function(e){return{user:e.auth}}),(function(e){return{logout:function(){return e(Object(L.h)())}}}))((function(e){var t=e.collapsed,a=e.toggle,n=e.logout,c=e.user,l=e.open,o=e.toggleOpen,m=F(),p=Object(u.useState)(!1),E=Object(r.a)(p,2),f=E[0],b=E[1];Object(u.useEffect)((function(){m.md?b(!1):b(!0)}),[m]);var h=Object(i.g)();return s.a.createElement(R,{className:"site-layout-background",style:{display:"flex",padding:"0 3em 0 0",justifyContent:"space-between",alignItems:"center"}},f||s.a.createElement(t?P.a:C.a,{className:"trigger",onClick:a}),f&&s.a.createElement(l?T.a:S.a,{className:"trigger",onClick:o}),s.a.createElement(k.a,{trigger:"click",placement:"bottomRight",title:A("".concat(c.firstName," ").concat(c.lastName)),content:s.a.createElement(N.a,{block:!0,icon:s.a.createElement(q.a,null),type:"danger",onClick:function(){n(),h.push("/login")}},"Logout")},s.a.createElement(d.a)))})),M=(a(207),a(206)),B=(a(168),a(169)),z=(a(170),a(171)),U=a(172),V=a.n(U),$=a(173),Y=(a(181),a(184)),G=a(476),H=a(186),K=a(66),Z=a(197);function _(e){return W.apply(this,arguments)}function W(){return(W=Object($.a)(V.a.mark((function e(t){var a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return{firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,email:e.email,idNumber:e.idNumber,phoneNumber:e.phoneNumber,addressNumber:e.addressNumber,addressCode:e.addressCode,addressTown:e.addressTown,kraPin:e.kraPin,insurer:e.insurer,occupation:e.occupation}}(t),"vehicle"===(n=function(e){return{policyNumber:e.policyNumber,policyPeriod:e.policyPeriod,sumInsured:e.sumInsured,premiumRate:e.premiumRate,pvt:e.pvt,excessProtection:e.excessProtection,antiTheftCoverage:e.antiTheftCoverage,rookie:e.rookie,passengersPllCoverage:e.passengersPllCoverage,policyClass:e.policyClass}}(t)).policyClass&&(n.vehicle=function(e){return{registrationNumber:e.registrationNumber,make:e.make,bodyType:e.bodyType,bodyColor:e.bodyColor,manufactureYear:e.manufactureYear,engineNumber:e.engineNumber,chasisNumber:e.chasisNumber,tonnage:e.tonnage,ratingCc:e.ratingCc}}(t)),e.next=5,Object(Z.a)({url:"/clients",method:"POST",body:Object(K.a)({policy:n},a),headers:{Authorization:"Bearer ".concat(t.token)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return X.apply(this,arguments)}function X(){return(X=Object($.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)({url:"/clients",method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return ee.apply(this,arguments)}function ee(){return(ee=Object($.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)({url:"/clients",method:"GET",query:{search:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object($.a)(V.a.mark((function e(t){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.clientId,e.next=3,Object(Z.a)({url:"".concat("/clients","/").concat(a),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=Y.a.Search;var re=a(287),ce=(a(175),a(176)),le=(a(187),a(185)),ue=a(204),se={pattern:/^[a-zA-Z]{2,}$/,message:"Invalid value"};function ie(){return s.a.createElement(le.a,{title:"Client details"},s.a.createElement(B.a,{gutter:16},s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{name:"firstName",label:"First name",rules:[{required:!0,message:"First name is required"},se]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{name:"middleName",label:"Middle name",rules:[se]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{name:"lastName",label:"Last name",rules:[{required:!0,message:"Last name is required"},se]},s.a.createElement(Y.a,null)))),s.a.createElement(B.a,{gutter:16},s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9]{1,}$/,message:"Address number is invalid"}]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^\d{1,}$/,message:"Postal code should be a number"}]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Town name is invalid"}]},s.a.createElement(Y.a,null)))),s.a.createElement(B.a,{gutter:16},s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"ID/Passport number",name:"idNumber",rules:[{required:!0,message:"ID number is required"},{pattern:/^[0-9]{1,}$/,message:"ID/Passport should be a number"}]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{required:!0,message:"Phone number is required"},{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid phone number"}]},s.a.createElement(Y.a,null)))),s.a.createElement(B.a,{gutter:16},s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Occupation",name:"occupation",rules:[{required:!0,message:"Occupation is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Occupation should be a string"}]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"KRA pin",name:"kraPin",rules:[{required:!0,message:"KRA pin is required"},{pattern:/^[a-zA-Z0-9]{11}$/,message:"KRA Pin should be 11 characters"}]},s.a.createElement(Y.a,null)))))}a(248);var oe=a(251),me=(a(431),a(456)),de=(a(433),a(455)),pe=(a(289),a(284)),Ee=(a(178),a(179));function fe(){return s.a.createElement(le.a,{title:"Vehicle details"},s.a.createElement(B.a,{gutter:16},s.a.createElement(z.a,null,s.a.createElement(ce.a.Item,{label:"Registration number",name:"registrationNumber",rules:[{required:!0,message:"Vehicle registration no is required"}]},s.a.createElement(Y.a,null))),s.a.createElement(z.a,null,s.a.createElement(ce.a.Item,{label:"Make",name:"make",rules:[{required:!0,message:"Vehicle make is required"}]},s.a.createElement(Y.a,null))),s.a.createElement(z.a,null,s.a.createElement(ce.a.Item,{label:"Body type",name:"bodyType",rules:[{required:!0,message:"Vehicle body type is required"}]},s.a.createElement(Y.a,null)))),s.a.createElement(B.a,{gutter:16},s.a.createElement(z.a,null,s.a.createElement(ce.a.Item,{label:"Body color",name:"bodyColor",rules:[{required:!0,message:"Vehicle body color is required"}]},s.a.createElement(Y.a,null))),s.a.createElement(z.a,null,s.a.createElement(ce.a.Item,{label:"Chasis number",name:"chasisNumber",rules:[{required:!0,message:"Vehicle chasis number is required"}]},s.a.createElement(Y.a,null))),s.a.createElement(z.a,null,s.a.createElement(ce.a.Item,{label:"Engine number",name:"engineNumber",rules:[{required:!0,message:"Vehicle body type is required"}]},s.a.createElement(Y.a,null)))),s.a.createElement(B.a,{gutter:16},s.a.createElement(z.a,null,s.a.createElement(ce.a.Item,{label:"Rating (cc)",name:"ratingCc",rules:[{required:!0,message:"Vehicle rating (cc) is required"}]},s.a.createElement(Y.a,null))),s.a.createElement(z.a,null,s.a.createElement(ce.a.Item,{label:"Tonnage",name:"tonnage",rules:[{required:!0,message:"Vehicle tonnage is required"}]},s.a.createElement(Y.a,null))),s.a.createElement(z.a,null,s.a.createElement(ce.a.Item,{label:"Year of manufacture",name:"manufactureYear",rules:[{required:!0,message:"Vehicle year of manufacture is required"}]},s.a.createElement(pe.a.YearPicker,null)))))}var be=Ee.a.Text;function he(){var e=Object(u.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],c=Object(u.useState)(null),l=Object(r.a)(c,2),i=l[0],m=l[1];return s.a.createElement(le.a,{title:"Policy details"},s.a.createElement(B.a,{gutter:16},s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Policy number",name:"policyNumber",rules:[{required:!0,message:"Policy number is required"}]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Policy Period"},s.a.createElement(Y.a.Group,null,s.a.createElement(ce.a.Item,{name:["policyPeriod","start"],help:"Select start date",rules:[{required:!0,message:"Start date required"}]},s.a.createElement(pe.a,{disabledDate:function(e){return e.isBefore()},onChange:function(e){return m(e)}})),s.a.createElement(ce.a.Item,{name:["policyPeriod","end"],help:"Select end date",rules:[{required:!0,message:"End date required"}]},s.a.createElement(pe.a,{disabledDate:function(e){return i?e.isSameOrBefore(i):e.isSameOrBefore()}}))))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Sum insured",name:"sumInsured",rules:[{required:!0,message:"Sum is required"}]},s.a.createElement(de.a,{min:1})))),s.a.createElement(B.a,{gutter:16},s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"PVT",name:"pvt",rules:[{required:!0,message:"PVT is required"}]},s.a.createElement(de.a,{min:1}))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Premium rate",name:"premiumRate",rules:[{required:!0,message:"Premium rate is required"}]},s.a.createElement(de.a,{min:1})))),s.a.createElement(B.a,null,s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Select the insurance class",name:"policyClass",rules:[{required:!0,message:"Please select policy class"}]},s.a.createElement(me.a.Group,{onChange:function(e){if("fire"===e.target.value)return n(!1);n(!0)}},s.a.createElement(me.a,{value:"fire"},"Fire"),s.a.createElement(me.a,{value:"vehicle"},"Vehicle"))))),a&&s.a.createElement("div",null,s.a.createElement(o.a,null),s.a.createElement(fe,null),s.a.createElement(be,{strong:!0,style:{marginBottom:"0.7em"}},"Extension"),s.a.createElement(B.a,{className:"OFormRow"},s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{help:"5% with a min of Kshs30,000/=",label:"Add excess protection",name:"excessProtection",valuePropName:"checked"},s.a.createElement(oe.a,{defaultChecked:!1}))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{help:"+ Kshs5000",label:"Young/New driver",name:"rookie",valuePropName:"checked"},s.a.createElement(oe.a,{defaultChecked:!1}))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Passengers (PLL)",name:"passengersPllCoverage",valuePropName:"checked"},s.a.createElement(oe.a,{defaultChecked:!1}))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{help:"10% antitheft device, 20% no device",label:"Theft",name:"antiTheftCoverage",valuePropName:"checked"},s.a.createElement(oe.a,{defaultChecked:!1}))))))}function ge(e){return ve.apply(this,arguments)}function ve(){return(ve=Object($.a)(V.a.mark((function e(t){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"vehicle"===(a=function(e){return{insurer:e.insurer,client:e.client,policyNumber:e.policyNumber,policyPeriod:e.policyPeriod,sumInsured:e.sumInsured,premiumRate:e.premiumRate,pvt:e.pvt,excessProtection:e.excessProtection,antiTheftCoverage:e.antiTheftCoverage,rookie:e.rookie,passengersPllCoverage:e.passengersPllCoverage,policyClass:e.policyClass}}(t)).policyClass&&(a.vehicle=function(e){return{registrationNumber:e.registrationNumber,make:e.make,bodyType:e.bodyType,bodyColor:e.bodyColor,manufactureYear:e.manufactureYear,engineNumber:e.engineNumber,chasisNumber:e.chasisNumber,tonnage:e.tonnage,ratingCc:e.ratingCc}}(t)),e.next=4,Object(Z.a)({url:"/policies",method:"POST",body:a,headers:{Authorization:"Bearer ".concat(t.token)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object($.a)(V.a.mark((function e(t){var a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyId,n=t.token,e.next=3,Object(Z.a)({url:"".concat("/policies","/").concat(a),method:"PUT",body:{approved:!0},headers:{Authorization:"Bearer ".concat(n)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return xe.apply(this,arguments)}function xe(){return(xe=Object($.a)(V.a.mark((function e(t){var a,n,r,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyNumber,n=t.client,r=t.insurer,c=t.type,e.next=3,Object(Z.a)({url:"/policies",method:"GET",query:{search:a,client:n,insurer:r,type:c}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object($.a)(V.a.mark((function e(t){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyId,e.next=3,Object(Z.a)({url:"".concat("/policies","/").concat(a),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object($.a)(V.a.mark((function e(t){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyId,e.next=3,Object(Z.a)({url:"".concat("/policies","/").concat(a,"/vehicle"),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(193);a(445);function Pe(e){var t=e.children;return s.a.createElement(B.a,{justify:"center",style:{paddingTop:"2em"}},s.a.createElement(z.a,{xs:24},s.a.createElement(le.a,null,t)))}var Ce=a(477);var Te=Object(n.b)((function(e,t){var a=t.clientId,n=t.insurerId;return null!=a?{subscriptions:e.policies.filter((function(e){return e.client===a}))}:{subscriptions:e.policies.filter((function(e){return e.insurer===n}))}}))((function(e){var t=e.subscriptions,a=e.fallback,n=e.extra,r=void 0===n?function(){}:n,c=e.onMount,l=Object(i.h)();return Object(u.useEffect)((function(){Object($.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:case"end":return e.stop()}}),e)})))()}),[]),!t.length&&a?s.a.createElement("div",null,r(),a()):s.a.createElement("div",null,r(),s.a.createElement(le.a,{title:"Subscriptions"},s.a.createElement(M.a,{size:"small",itemLayout:"horizontal",dataSource:t,renderItem:function(e){return s.a.createElement(j.b,{to:{pathname:"/app/policies/".concat(e.id),state:{prevPath:l.pathname}}},s.a.createElement(M.a.Item,null,s.a.createElement(M.a.Item.Meta,{title:String(e.policyNumber).toUpperCase()}),s.a.createElement("div",null,s.a.createElement(G.a,null))))}})))})),Se=(a(446),Ee.a.Text),qe=Ee.a.Title;function Ae(e){var t=e.label,a=e.title,n=e.fallbackUrl,r=Object(i.g)(),c=Object(i.h)();return s.a.createElement(B.a,{className:"ProfileHeader"},s.a.createElement(z.a,{flex:"auto"},s.a.createElement(Se,{disabled:!0},t,":"),s.a.createElement(qe,{level:3},a)),s.a.createElement(z.a,null,s.a.createElement(N.a,{danger:!0,size:"small",shape:"circle",icon:s.a.createElement(T.a,null),onClick:function(){var e;return r.push((null===c||void 0===c||null===(e=c.state)||void 0===e?void 0:e.prevPath)||n)}})))}function Re(e){var t=e.header||!0;return s.a.createElement("div",null,t&&s.a.createElement(Ae,e),e.children)}var Fe=Ee.a.Text;function Le(e){var t=e.title,a=e.content,n=e.children;return s.a.createElement(B.a,null,s.a.createElement(z.a,{xs:9,sm:6,md:5},s.a.createElement(Fe,null,t)),s.a.createElement(z.a,{flex:!0},!!a&&s.a.createElement(Fe,{strong:!0},a),n))}a(447);function De(){return s.a.createElement(Re,{header:!1},s.a.createElement("div",{className:"ProfileSkeleton"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null)))}var Me=Ee.a.Text;function Be(e){var t=e.client;return s.a.createElement(B.a,{justify:"center",style:{margin:"2em auto 2em"}},s.a.createElement(z.a,null,s.a.createElement(Me,{style:{marginRight:"1em"},strong:!0},"Add new policy for client"),s.a.createElement(j.b,{to:{pathname:"/app/clients/new",state:{clientId:t.id}}},s.a.createElement(N.a,{type:"primary",shape:"circle",icon:s.a.createElement(Ce.a,null)}))))}var ze=Object(n.b)((function(e,t){var a=t.clientId;return{client:e.clients.find((function(e){return Number(e.id)===Number(a)}))}}),(function(e){return{updatePolicies:function(t){return e(Object(L.m)(t))},addClient:function(t){return e(Object(L.a)(t))}}}))((function(e){var t=e.client,a=e.updatePolicies,n=e.addClient,r=Object(i.i)().clientId,c=Object(i.g)();Object(u.useEffect)((function(){Object($.a)(V.a.mark((function e(){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,te({clientId:r});case 3:(a=e.sent)&&a.data?n(a.data):c.replace("/clients");case 5:case"end":return e.stop()}}),e)})))()}),[t]);var l=function(){var e=Object($.a)(V.a.mark((function e(n){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<=2)){e.next=5;break}return e.next=3,je({client:t.id});case 3:(r=e.sent)&&r.data&&a(r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?s.a.createElement(Re,{label:"Client name",title:A("".concat(t.firstName," ").concat(t.lastName)),fallbackUrl:"/app/clients"},s.a.createElement("div",{style:{paddingLeft:"1em",marginBottom:"1.5em"}},s.a.createElement(Le,{title:"ID No",content:t.idNumber}),s.a.createElement(Le,{title:"Address",content:A("".concat(t.addressNumber," ")+"".concat(t.addressTown,", ").concat(t.addressCode))}),s.a.createElement(Le,{title:"Occupation",content:A(t.occupation)}),s.a.createElement(Le,{title:"Phone",content:t.phoneNumber}),s.a.createElement(Le,{title:"Email",content:t.email}),s.a.createElement(Le,{title:"Member since",content:new Date(t.createdAt).toLocaleDateString()})),s.a.createElement(Te,{clientId:t.id,extra:function(){return s.a.createElement(Be,{client:t})},onMount:l})):s.a.createElement(De,null)}));function Ue(e){e.clients;var t=Object(i.i)().clientId;return s.a.createElement(Pe,null,s.a.createElement(ze,{clientId:t}))}var Ve=Object(n.b)((function(e){return{clients:e.clients}}),(function(e){return{updateClients:function(t){return e(Object(L.k)(t))}}}))((function(e){var t=e.clients,a=e.updateClients,n=Object(i.h)(),c=Object(u.useState)(""),l=Object(r.a)(c,2),o=l[0],m=l[1],d=Object(u.useState)(t),p=Object(r.a)(d,2),E=p[0],f=p[1];Object(u.useEffect)((function(){if(t.length<20)try{Object($.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 7:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR clients",e)}}),[]),Object(u.useEffect)((function(){var e=o?t.filter((function(e){return e.firstName.match(o)||e.lastName.match(o)||e.middleName.match(o)})):t;f(e)}),[o,t]);var b=function(){var e=Object($.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Q(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(H.a,{pageTitle:"Clients"},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{flex:"auto"},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{xs:24,sm:18,lg:12},s.a.createElement(ne,{placeholder:"client name",onSearch:b,enterButton:!0}))),s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{xs:24,lg:20},s.a.createElement(M.a,{itemLayout:"horizontal",dataSource:E,renderItem:function(e){var t=e.firstName,a=e.lastName;return s.a.createElement(j.b,{to:{pathname:"/app/clients/".concat(e.id),state:{prevPath:n.pathname}}},s.a.createElement(M.a.Item,null,s.a.createElement(M.a.Item.Meta,{title:A("".concat(t," ").concat(a)),description:"Member since "+new Date(e.createdAt).toLocaleDateString()}),s.a.createElement("div",null,s.a.createElement(G.a,null))))}}))))))})),$e=Object(n.b)((function(e){return{token:e.auth.token}}),(function(e){return{addClient:function(t){e(Object(L.a)(t))},addVehicle:function(t){e(Object(L.f)(t))},addPolicy:function(t){e(Object(L.d)(t))},addSuccess:function(t){e(Object(L.e)(t))},addError:function(t){return e(Object(L.b)(t))}}}))((function(e){var t,a=e.addClient,n=e.addPolicy,c=e.addVehicle,l=e.addSuccess,o=e.addError,m=e.token,d=Object(i.i)().insurerId,p=Object(i.h)(),E=null===p||void 0===p||null===(t=p.state)||void 0===t?void 0:t.clientId,f=E?"Add policy for client":"Register new client",b=ce.a.useForm(),h=Object(r.a)(b,1)[0],g=Object(u.useState)(!1),v=Object(r.a)(g,2),y=v[0],O=v[1],j=function(e){O(!0);try{e().then((function(){l("Data submitted successfully"),h.resetFields()}))}catch(t){o(t.message)}finally{O(!1)}};return s.a.createElement(H.a,{pageTitle:f},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,null,s.a.createElement(ce.a,{className:"OForm",form:h},!E&&s.a.createElement(ie,null),s.a.createElement(he,null),s.a.createElement(B.a,{justify:"end"},s.a.createElement(N.a,{type:"primary",onClick:E?function(){j(function(){var e=Object($.a)(V.a.mark((function e(){var t,a,r,l,u;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.validateFields();case 2:return t=e.sent,e.next=5,ge(Object(K.a)({insurer:d,client:E,token:m},t));case 5:if(!(a=e.sent)||!a.data){e.next=12;break}r=a.data,l=r.vehicle,u=Object(re.a)(r,["vehicle"]),n(u),l&&c(l),e.next=14;break;case 12:if(!a||!a.error){e.next=14;break}throw Error(a.error);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())}:function(){j(function(){var e=Object($.a)(V.a.mark((function e(){var t,r,l,u,s,i,o;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.validateFields();case 2:return t=e.sent,e.next=5,_(Object(K.a)({insurer:d,token:m},t));case 5:if(!(r=e.sent)||!r.data){e.next=14;break}l=r.data,u=l.policy,s=Object(re.a)(l,["policy"]),a(s),i=u.vehicle,o=Object(re.a)(u,["vehicle"]),n(o),i&&c(i),e.next=16;break;case 14:if(!r||!r.error){e.next=16;break}throw Error(r.error);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())},loading:y},"Submit"))))))}));function Ye(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object($.a)(V.a.mark((function e(t){var a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,n=Object(re.a)(t,["token"]),e.next=3,Object(Z.a)({url:"/insurers",method:"POST",body:n,headers:{Authorization:"Bearer ".concat(a)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object($.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)({url:"/insurers",method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){return _e.apply(this,arguments)}function _e(){return(_e=Object($.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)({url:"/insurers",method:"GET",query:{search:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return Je.apply(this,arguments)}function Je(){return(Je=Object($.a)(V.a.mark((function e(t){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.insurerId,e.next=3,Object(Z.a)({url:"".concat("/insurers","/").concat(a),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xe=Y.a.Search;var Qe=Ee.a.Text;function et(e){var t=e.insurer;return s.a.createElement(B.a,{justify:"center",style:{marginTop:"4em"}},s.a.createElement(z.a,null,s.a.createElement(Qe,{style:{marginRight:"1em"},strong:!0},"This insurer has no clients yet."),s.a.createElement(j.b,{to:{pathname:"/app/clients/new/".concat(t.id)}},s.a.createElement(N.a,{type:"primary",shape:"circle",icon:s.a.createElement(Ce.a,null)}))))}var tt=Object(n.b)((function(e,t){var a=t.insurerId;return{insurer:e.insurers.find((function(e){return Number(e.id)===Number(a)}))}}),(function(e){return{updatePolicies:function(t){return e(Object(L.m)(t))},addInsurer:function(t){return e(Object(L.c)(t))}}}))((function(e){var t=e.insurer,a=e.updatePolicies,n=e.addInsurer,r=Object(i.i)().insurerId,c=Object(i.g)();Object(u.useEffect)((function(){Object($.a)(V.a.mark((function e(){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,We({insurerId:r});case 3:(a=e.sent)&&a.data?n(a.data):c.replace("/insurers");case 5:case"end":return e.stop()}}),e)})))()}),[t]);var l=function(){var e=Object($.a)(V.a.mark((function e(n){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<=2)){e.next=5;break}return e.next=3,je({insurer:t.id});case 3:(r=e.sent)&&r.data&&a(r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?s.a.createElement(Re,{label:"Insurer name",title:A(t.name),fallbackUrl:"/app/insurers"},s.a.createElement("div",{style:{paddingLeft:"1em",marginBottom:"1.5em"}},s.a.createElement(Le,{title:"Address",content:A("".concat(t.addressNumber," ")+"".concat(t.addressTown,", ").concat(t.addressCode))}),s.a.createElement(Le,{title:"Phone",content:t.phoneNumber})),s.a.createElement(Te,{insurerId:t.id,fallback:function(){return s.a.createElement(et,{insurer:t})},onMount:l})):s.a.createElement(De,null)}));function at(){var e=Object(i.i)().insurerId;return s.a.createElement(Pe,null,s.a.createElement(tt,{insurerId:e}))}function nt(){return s.a.createElement(le.a,{title:"Vehicle details"},s.a.createElement(B.a,{gutter:16},s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Issuer name",name:"name",rules:[{required:!0,message:"Insurer name is required"},{pattern:/^[a-zA-Z0-9\s]{2,}$/,message:"At least 2 characters and no contain special characters."}]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid format"}]},s.a.createElement(Y.a,null)))),s.a.createElement(B.a,{gutter:16},s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9\s]{1,}$/,message:"Invalid address"}]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^[0-9]{1,}$/,message:"Value should be a number"}]},s.a.createElement(Y.a,null))),s.a.createElement(ue.a,null,s.a.createElement(ce.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z\s]{2,}$/,message:"Invalid town name"}]},s.a.createElement(Y.a,null)))))}var rt=Object(n.b)((function(e){return{token:e.auth.token}}),(function(e){return{addInsurer:function(t){e(Object(L.c)(t))},addSuccess:function(t){e(Object(L.e)(t))},addError:function(t){return e(Object(L.b)(t))}}}))((function(e){var t=e.addInsurer,a=e.addSuccess,n=e.token,c=e.addError,l=ce.a.useForm(),i=Object(r.a)(l,1)[0],o=Object(u.useState)(!1),m=Object(r.a)(o,2),d=m[0],p=m[1],E=function(){var e=Object($.a)(V.a.mark((function e(){var r,l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,i.validateFields();case 4:return r=e.sent,e.next=7,Ye(Object(K.a)({token:n},r));case 7:(l=e.sent)&&l.data?(t(l.data),a("Data submitted successfully"),i.resetFields()):l&&l.error&&c(l.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),c(e.t0.message);case 14:return e.prev=14,p(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(H.a,{pageTitle:"Register new insurer"},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,null,s.a.createElement(ce.a,{className:"OForm",form:i,colon:!1,labelAlign:"left",scrollToFirstError:!0,onFinishFailed:function(e){e.values;var t=e.errorFields;console.log("Error",t)}},s.a.createElement(nt,null),s.a.createElement(B.a,{justify:"end"},s.a.createElement(N.a,{type:"primary",onClick:E,loading:d},"Submit"))))))})),ct=Object(n.b)((function(e){return{insurers:e.insurers}}),(function(e){return{updateInsurers:function(t){return e(Object(L.l)(t))}}}))((function(e){var t=e.insurers,a=e.updateInsurers,n=Object(i.h)(),c=Object(u.useState)(""),l=Object(r.a)(c,2),o=l[0],m=l[1],d=Object(u.useState)(t),p=Object(r.a)(d,2),E=p[0],f=p[1];Object(u.useEffect)((function(){if(t.length<20)try{Object($.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR insurers",e)}}),[]),Object(u.useEffect)((function(){var e=o?t.filter((function(e){return e.name.match(o)})):t;f(e)}),[t,o]);var b=function(){var e=Object($.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ze(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(H.a,{pageTitle:"Registered Insurers"},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{flex:"auto"},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{xs:24,sm:18,lg:12},s.a.createElement(Xe,{placeholder:"Insurer name",onSearch:b,enterButton:!0}))),s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{xs:24,lg:20},s.a.createElement(M.a,{itemLayout:"horizontal",dataSource:E,renderItem:function(e){return s.a.createElement(j.b,{to:{pathname:"/app/insurers/".concat(e.id),state:{prevPath:n.pathname}}},s.a.createElement(M.a.Item,null,s.a.createElement(M.a.Item.Meta,{title:A(e.name),description:"Registered "+new Date(e.createdAt).toLocaleDateString()}),s.a.createElement("div",null,s.a.createElement(G.a,null))))}}))))))})),lt=Y.a.Search;var ut=Object(n.b)((function(e){return{insurers:e.insurers}}),(function(e){return{updateInsurers:function(t){return e(Object(L.l)(t))}}}))((function(e){var t=e.insurers,a=e.updateInsurers,n=Object(i.h)(),c=Object(u.useState)(""),l=Object(r.a)(c,2),m=l[0],d=l[1],p=Object(u.useState)(t),E=Object(r.a)(p,2),f=E[0],b=E[1];Object(u.useEffect)((function(){if(t.length<20)try{Object($.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR insurers",e)}}),[]),Object(u.useEffect)((function(){var e=m?t.filter((function(e){return e.name.match(m)})):t;b(e)}),[m,t]);var h=function(){var e=Object($.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ze(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(H.a,{pageTitle:"Select insurance provider."},s.a.createElement(B.a,{justify:"center",style:{marginTop:"1.5em"}},s.a.createElement(z.a,{flex:"auto",xs:24,lg:12},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{xs:24,sm:18},s.a.createElement(lt,{placeholder:"insurer name",onSearch:h,enterButton:!0}))),s.a.createElement(o.a,null),s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{flex:"auto",xs:24,lg:20},s.a.createElement(M.a,{dataSource:f,itemLayout:"horizontal",renderItem:function(e){var t,a={pathname:"/app/clients/new/".concat(e.id),state:{clientId:null===n||void 0===n||null===(t=n.state)||void 0===t?void 0:t.clientId}};return s.a.createElement(j.b,{to:a},s.a.createElement(M.a.Item,null,s.a.createElement(M.a.Item.Meta,{title:s.a.createElement(j.b,{to:a},A(e.name))}),s.a.createElement(G.a,null)))}}))))))})),st=a(250),it=Object(n.b)(null,(function(e){return{addSuccess:function(t){return e(Object(L.e)(t))},addError:function(t){return e(Object(L.b)(t))}}}))(st.b),ot=(a(448),a(450)),mt=a(4),dt=a(478),pt=a(479),Et=a(480),ft=a(481),bt=Y.a.Search;function ht(e){var t=e.icon,a=e.text,n=e.type;return s.a.createElement(ot.a,null,s.a.createElement(Ee.a.Text,{type:n},s.a.createElement(t)," ",a))}var gt=Y.a.Search;var vt={policyHoldersFund:40,trainingLevy:32,withholdingTax:160},yt=(a(451),Ee.a.Text),Ot=Ee.a.Title,jt=vt.trainingLevy.toFixed(2),xt=vt.policyHoldersFund.toFixed(2),wt=16e3+vt.policyHoldersFund+vt.trainingLevy,It=vt.withholdingTax.toFixed(2),kt=wt-1600+vt.withholdingTax;function Nt(){return s.a.createElement(B.a,null,s.a.createElement(z.a,{flex:"auto"},s.a.createElement(Ot,{level:3},"PREMIUM DEBIT NOTE"),s.a.createElement(B.a,{className:"AddressRow"},s.a.createElement(z.a,{flex:"auto"},s.a.createElement("p",null,s.a.createElement(yt,{strong:!0},"Insurer")),s.a.createElement("p",null,"CARE INSURANCE AGENCY"),s.a.createElement("p",null,"P.O BOX 34"),s.a.createElement("p",null,"KERUGOYA")),s.a.createElement(z.a,{flex:"auto"},s.a.createElement("p",null,s.a.createElement(yt,{strong:!0},"Client")),s.a.createElement("p",null,"Martin muthika"),s.a.createElement("p",null,"p.o box 56"),s.a.createElement("p",null,"KERUGOYA"))),s.a.createElement(B.a,null,s.a.createElement(z.a,{flex:"auto"},s.a.createElement(B.a,{gutter:24},s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,{strong:!0},"Policy Number:")),s.a.createElement(z.a,null,s.a.createElement(yt,null,"EMB/7878/2011"))),s.a.createElement(B.a,{gutter:24},s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,{strong:!0},"Regarding:")),s.a.createElement(z.a,null,s.a.createElement(yt,null,"RENEWAL PREMIUM"))),s.a.createElement(B.a,{gutter:24},s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,{strong:!0},"Class:")),s.a.createElement(z.a,null,s.a.createElement(yt,null,"Vehicle"))),s.a.createElement(B.a,{gutter:24},s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,{strong:!0},"Reg No:")),s.a.createElement(z.a,null,s.a.createElement(yt,null,"KBA 457Y")))),s.a.createElement(z.a,{flex:"auto"},s.a.createElement(B.a,{gutter:24},s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,{strong:!0},"Cover from:")),s.a.createElement(z.a,null,s.a.createElement(yt,null,"11/3/2019"))),s.a.createElement(B.a,{gutter:24},s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,{strong:!0},"To:")),s.a.createElement(z.a,null,s.a.createElement(yt,null,"11/3/2020"))))),s.a.createElement(B.a,{justify:"end",style:{marginTop:"2em"}},s.a.createElement(z.a,{span:12},s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(yt,{strong:!0},"Basic premium:")),s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,null,16e3))),s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(yt,{strong:!0},"Policyholders fund:")),s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,null,xt))),s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(yt,{strong:!0},"Training levy:")),s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,null,jt))),s.a.createElement("hr",null),s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(yt,{strong:!0},"RENEWAL PREMIUM:")),s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,{strong:!0},wt.toFixed(2)))),s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(yt,{strong:!0},"Commission:")),s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,null,"-",1600))),s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(yt,{strong:!0},"Withholding Tax:")),s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,null,It))),s.a.createElement("hr",null),s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(yt,{strong:!0},"Net Amount Due:")),s.a.createElement(z.a,{span:8,className:"text-right"},s.a.createElement(yt,{strong:!0},kt.toFixed(2)))))),s.a.createElement(B.a,{style:{marginTop:"3.5em"}},s.a.createElement(z.a,{flex:"auto"},"Prepared by: ",s.a.createElement(yt,{strong:!0},"ESEDIEM")),s.a.createElement(z.a,{flex:"auto"},"Signed By: ",s.a.createElement(yt,{strong:!0},"For and on behalf of KENYA ORIENT INSURANCE LTD")),s.a.createElement(z.a,{flex:"auto"},s.a.createElement(yt,{strong:!0},"13-Nov-2019")))))}var Pt=Object(n.b)((function(e){return{newApplications:e.policies.filter((function(e){return"renewal"!==e.type}))}}),(function(e){return{updatePolicies:function(t){return e(Object(L.m)(t))}}}))((function(e){var t=e.newApplications,a=e.updatePolicies,n=Object(i.h)(),c=Object(u.useState)(""),l=Object(r.a)(c,2),o=l[0],m=l[1],d=Object(u.useState)(t),p=Object(r.a)(d,2),E=p[0],f=p[1];Object(u.useEffect)((function(){if(t.length<20)try{Object($.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je({type:"new"});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR new policies",e)}}),[]),Object(u.useEffect)((function(){var e=o?t.filter((function(e){return e.policyNumber.match(o)})):t;f(e)}),[t,o]);var b=function(){var e=Object($.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,je(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(H.a,{pageTitle:"New Applications"},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{flex:"auto"},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{xs:24,sm:18,lg:12},s.a.createElement(bt,{placeholder:"Policy number",onSearch:b,enterButton:!0}))),s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{xs:24,lg:20},s.a.createElement(M.a,{itemLayout:"vertical",dataSource:E,renderItem:function(e){return s.a.createElement(j.b,{to:{pathname:"/app/policies/".concat(e.id),state:{prevPath:n.pathname}}},s.a.createElement(M.a.Item,{actions:[s.a.createElement(ht,{icon:"fire"===e.policyClass?dt.a:pt.a,text:"".concat(e.policyClass||"vehicle"),key:"policyClass"})].concat(Object(mt.a)(e.approved?[s.a.createElement(ht,{icon:Et.a,text:"Approved",type:"success",key:"approvedIcon"})]:[s.a.createElement(ht,{icon:ft.a,text:"Not approved",type:"warning",key:"notApprovedIcon"})])),extra:s.a.createElement(G.a,null)},s.a.createElement(M.a.Item.Meta,{title:String(e.policyNumber).toUpperCase(),description:"Applied "+new Date(e.createdAt).toLocaleDateString()})))}}))))))})),Ct=Object(n.b)((function(e){return{renewalApplications:e.policies.filter((function(e){return"renewal"===e.type}))}}),(function(e){return{updatePolicies:function(t){return e(Object(L.m)(t))}}}))((function(e){var t=e.renewalApplications,a=e.updatePolicies,n=Object(i.h)(),c=Object(u.useState)(""),l=Object(r.a)(c,2),o=l[0],m=l[1],d=Object(u.useState)(t),p=Object(r.a)(d,2),E=p[0],f=p[1];Object(u.useEffect)((function(){if(t.length<20)try{Object($.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je({type:"renewal"});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR renewal policies",e)}}),[]),Object(u.useEffect)((function(){var e=o?t.filter((function(e){return e.policyNumber.match(o)})):t;f(e)}),[t,o]);var b=function(){var e=Object($.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,je(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(H.a,{pageTitle:"Renewal Applications"},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{flex:"auto"},s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{xs:24,sm:18,lg:12},s.a.createElement(gt,{placeholder:"Policy number",onSearch:b,enterButton:!0}))),s.a.createElement(B.a,{justify:"center"},s.a.createElement(z.a,{xs:24,lg:20},s.a.createElement(M.a,{itemLayout:"horizontal",dataSource:E,renderItem:function(e){return s.a.createElement(j.b,{to:{pathname:"/app/policies/".concat(e.id),state:{prevPath:n.pathname}}},s.a.createElement(M.a.Item,null,s.a.createElement(M.a.Item.Meta,{title:String(e.policyNumber).toUpperCase(),description:"Applied "+new Date(e.createdAt).toLocaleDateString()}),s.a.createElement("div",null,s.a.createElement(G.a,null))))}}))))))}));function Tt(){var e=Object(i.j)().path;return s.a.createElement(i.d,null,s.a.createElement(i.b,{path:"".concat(e,"/new")},s.a.createElement(Pt,null)),s.a.createElement(i.b,{path:"".concat(e,"/renewals")},s.a.createElement(Ct,null)),s.a.createElement(i.b,{path:"".concat(e,"/debit-note")},s.a.createElement(Nt,null)),s.a.createElement(i.b,{path:"*"},s.a.createElement(i.a,{to:"".concat(e,"/new")})))}var St=a(482);function qt(e){var t=Object(i.h)(),a=function(t){var a=t.title,n=t.children,c=Object(u.useState)(!1),l=Object(r.a)(c,2),i=l[0],o=l[1];return s.a.createElement(le.a,{onMouseEnter:function(){if(!e.routerTo)return null;o(!0)},onMouseLeave:function(){if(!e.routerTo)return null;o(!1)}},s.a.createElement("div",null,s.a.createElement(Ee.a.Title,{level:4,style:{fontSize:16}},a,i&&s.a.createElement(St.a,{style:{marginLeft:"0.5em"}}))),n)};return s.a.createElement(z.a,{xs:24,sm:12},e.routerTo?s.a.createElement(j.b,{to:{pathname:e.routerTo,state:{prevPath:t.pathname}}},s.a.createElement(a,e,e.children)):s.a.createElement(a,e))}var At=Ee.a.Text;function Rt(e){var t=e.policyId,a=e.vehicle,n=e.addVehicle;return Object(u.useEffect)((function(){Object($.a)(V.a.mark((function e(){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return e.next=3,ke({policyId:t});case 3:(r=e.sent)&&r.data&&n(r.data);case 5:case"end":return e.stop()}}),e)})))()}),[a]),a?s.a.createElement(qt,{title:"Vehicle"},s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(At,null,"Reg No")),s.a.createElement(z.a,null,s.a.createElement(At,{strong:!0},String(a.registrationNumber).toUpperCase()))),s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(At,null,"Make")),s.a.createElement(z.a,null,s.a.createElement(At,{strong:!0},A(a.make)))),s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(At,null,"Y.o.M")),s.a.createElement(z.a,null,s.a.createElement(At,{strong:!0},new Date(a.manufactureYear).getFullYear()))),s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(At,null,"Rating (cc)")),s.a.createElement(z.a,null,s.a.createElement(At,{strong:!0},a.ratingCc))),s.a.createElement(B.a,null,s.a.createElement(z.a,{span:10},s.a.createElement(At,null,"Body color")),s.a.createElement(z.a,null,s.a.createElement(Ft,{color:a.bodyColor})))):null}function Ft(e){var t=e.color;return s.a.createElement("div",{style:{display:"inline-block",width:"1em",height:"1em",backgroundColor:t,borderRadius:3}})}function Lt(e){var t=e.insurerId,a=e.insurer,n=e.addInsurer;return Object(u.useEffect)((function(){Object($.a)(V.a.mark((function e(){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return e.next=3,We({insurerId:t});case 3:(r=e.sent)&&r.data&&n(r.data);case 5:case"end":return e.stop()}}),e)})))()}),[a]),a?s.a.createElement(qt,{title:"Insurer",routerTo:"/app/insurers/".concat(a.id)},s.a.createElement(B.a,null,s.a.createElement(z.a,{span:6},s.a.createElement(Ee.a.Text,null,"Name")),s.a.createElement(z.a,null,s.a.createElement(Ee.a.Text,{strong:!0},A(a.name))))):null}var Dt=Object(n.b)((function(e,t){var a=t.policyId,n=t.insurerId;return{vehicle:e.vehicles.find((function(e){return Number(e.policy)===Number(a)})),insurer:e.insurers.find((function(e){return Number(e.id)===Number(n)}))}}),(function(e){return{addVehicle:function(t){return e(Object(L.f)(t))},addInsurer:function(t){return e(Object(L.c)(t))}}}))((function(e){return s.a.createElement(B.a,{gutter:[32,16]},"vehicle"===e.policyClass&&s.a.createElement(Rt,e),s.a.createElement(Lt,e))}));var Mt=Object(n.b)((function(e,t){var a=t.clientId;return{client:e.clients.find((function(e){return e.id===a}))}}),(function(e){return{addClient:function(t){return e(Object(L.a)(t))}}}))((function(e){var t=e.client,a=e.clientId,n=e.addClient;return Object(u.useEffect)((function(){Object($.a)(V.a.mark((function e(){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,te({clientId:a});case 3:(r=e.sent)&&r.data&&n(r.data);case 5:case"end":return e.stop()}}),e)})))()}),[t]),t?s.a.createElement(k.a,{placement:"bottomLeft",title:"ID Number",content:s.a.createElement(Ee.a.Text,null,t.idNumber)},s.a.createElement(j.b,{to:{pathname:"/app/clients/".concat(t.id)}},A("".concat(t.firstName," ").concat(t.lastName[0])))):null})),Bt=(a(452),a(457)),zt=a(483);var Ut=Object(n.b)((function(e){return{token:e.auth.token}}),(function(e){return{updatePolicy:function(t){return e(Object(L.n)(t))},addSuccess:function(t){return e(Object(L.e)(t))}}}))((function(e){var t=e.policy,a=e.updatePolicy,n=e.addSuccess,c=e.token,l=Object(u.useState)(!1),i=Object(r.a)(l,2),o=i[0],m=i[1],d=function(){var e=Object($.a)(V.a.mark((function e(){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ye({policyId:t.id,token:c});case 4:(r=e.sent)&&r.data?(a(r.data),n("Policy has been approved")):m(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("ERROR",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(B.a,{style:{margin:"2em auto 1em"}},s.a.createElement(z.a,{xs:24,sm:8,span:5,style:{display:"flex",alignItems:"center"}},s.a.createElement(Bt.a,{dot:!0,status:"warning"},s.a.createElement(zt.a,null)),s.a.createElement(Ee.a.Text,{style:{marginLeft:"0.5em"}},"Not approved")),s.a.createElement(z.a,{flex:!0},s.a.createElement(N.a,{type:"primary",loading:o,onClick:d},"Approve")))}));Ee.a.Text;var Vt=Object(n.b)((function(e,t){var a=t.policyId;return{policy:e.policies.find((function(e){return Number(e.id)===Number(a)}))}}),(function(e){return{addPolicy:function(t){return e(Object(L.d)(t))}}}))((function(e){var t=e.policy,a=e.addPolicy,n=Object(i.i)().policyId,r=Object(i.g)();return Object(u.useEffect)((function(){Object($.a)(V.a.mark((function e(){var c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,we({policyId:n});case 3:(c=e.sent)&&c.data?a(c.data):r.push("/reports/applications");case 5:case"end":return e.stop()}}),e)})))()}),[t]),t?s.a.createElement(Re,{label:"Policy no",title:String(t.policyNumber).toUpperCase(),fallbackUrl:"/app/reports/applications"},s.a.createElement("div",{style:{paddingLeft:"1em",marginBottom:"1.5em"}},s.a.createElement(Le,{title:"Applied",content:new Date(t.createdAt).toLocaleDateString()}),s.a.createElement(Le,{title:"Client"},s.a.createElement(Mt,{clientId:t.client})),s.a.createElement(Le,{title:"Class",content:t.policyClass}),!t.approved&&s.a.createElement(Ut,{policy:t})),s.a.createElement(Dt,{policyId:t.id,insurerId:t.insurer,policyClass:t.policyClass})):s.a.createElement(De,null)}));function $t(e){e.insurers;var t=Object(i.i)().policyId;return s.a.createElement(Pe,null,s.a.createElement(Vt,{policyId:t}))}var Yt=l.a.Content,Gt=c.a.useBreakpoint;t.default=Object(n.b)((function(e){return{auth:e.auth}}),(function(e){return{addError:function(t){return e(Object(L.b)(t))}}}))((function(e){var t=e.auth,a=e.addError,n=Object(i.h)(),c=Object(i.j)().path,o=Object(u.useState)(!1),m=Object(r.a)(o,2),d=m[0],p=m[1],E=Object(u.useState)(!0),f=Object(r.a)(E,2),b=f[0],h=f[1],g=Gt();return Object(u.useEffect)((function(){g.md||(p(!1),h(!1)),!(null===t||void 0===t?void 0:t.token)&&a("You need to login first")}),[g]),(null===t||void 0===t?void 0:t.token)?s.a.createElement(l.a,null,s.a.createElement(I,{collapsed:d,open:b}),s.a.createElement(l.a,{className:"site-layout"},s.a.createElement(D,{collapsed:d,toggle:function(){p(!d)},open:b,toggleOpen:function(){h(!b)}}),s.a.createElement(Yt,{className:"site-layout-background",style:{margin:"8px 0 0",padding:"0 24px 24px",minHeight:280,position:"relative"}},s.a.createElement(i.d,null,s.a.createElement(i.b,{exact:!0,path:"".concat(c,"/clients/new")},s.a.createElement(ut,null)),s.a.createElement(i.b,{exact:!0,path:"".concat(c,"/clients/new/:insurerId")},s.a.createElement($e,null)),s.a.createElement(i.b,{exact:!0,path:"".concat(c,"/clients/:clientId")},s.a.createElement(Ue,null)),s.a.createElement(i.b,{path:"".concat(c,"/clients")},s.a.createElement(Ve,null)),s.a.createElement(i.b,{exact:!0,path:"".concat(c,"/insurers/new")},s.a.createElement(rt,null)),s.a.createElement(i.b,{exact:!0,path:"".concat(c,"/insurers/:insurerId")},s.a.createElement(at,null)),s.a.createElement(i.b,{path:"".concat(c,"/insurers")},s.a.createElement(ct,null)),s.a.createElement(i.b,{path:"".concat(c,"/reports/applications")},s.a.createElement(Tt,null)),s.a.createElement(i.b,{path:"".concat(c,"/policies/:policyId")},s.a.createElement($t,null)),s.a.createElement(i.b,{path:"".concat(c,"/admins/new")},s.a.createElement(it,null)),s.a.createElement(i.b,{path:"*"},s.a.createElement(i.a,{to:"".concat(c,"/clients")})))))):s.a.createElement(i.a,{to:{pathname:"/login",state:{attemptedRoute:n.pathname}}})}))}}]);
//# sourceMappingURL=6.df611347.chunk.js.map