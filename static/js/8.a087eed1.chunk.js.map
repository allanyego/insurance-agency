{"version":3,"sources":["components/PageTitle.js","components/Page.js","util/http/admins.js","util/http/helpers/handleError.js","util/http/constants.js","util/http/helpers/request.js","pages/admins/parts/AuthPage.js","pages/admins/parts/PasswordDetails.js","pages/admins/ChangePassword.js","containers/admins/ChangePassword.js"],"names":["PageTitle","pageTitle","justify","Title","level","Page","children","className","postAdmin","admin","a","newAdmin","firstName","middleName","lastName","email","idNumber","phoneNumber","addressNumber","addressCode","addressTown","request","url","method","body","headers","Authorization","token","login","password","changePassword","adminId","oldPassword","newPassword","newPasswordConfirm","handleError","error","console","log","store","dispatch","addError","API_URL","query","queryBody","constructUrlBody","requestUrl","fetch","JSON","stringify","resp","json","status","data","message","ulrBody","name","hasOwnProperty","value","toString","encodeURIComponent","replace","push","join","AuthPage","title","src","alt","style","margin","display","borderRadius","width","marginBottom","PasswordDetails","gutter","span","Item","label","rules","required","Password","pattern","dependencies","hasFeedback","getFieldValue","validator","rule","Promise","resolve","reject","ChangePassword","location","useLocation","useForm","form","useState","loading","setLoading","changeSuccess","setChangeSuccess","submitPassword","validateFields","values","state","resetFields","xs","sm","md","lg","xl","to","type","onClick","connect"],"mappings":"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","file":"static/js/8.a087eed1.chunk.js","sourcesContent":["import React from 'react';\nimport { Col, Row, Typography } from 'antd';\n\nexport default function PageTitle({ pageTitle }) {\n  return(\n    <Row justify=\"center\">\n        <Col>\n          <Typography.Title\n            level={3}>\n              {pageTitle}\n          </Typography.Title>\n        </Col>\n      </Row>\n  );\n}\n","import React from 'react';\n\nimport PageTitle from './PageTitle';\n\nimport './Page.css';\n\nexport default function Page({ pageTitle, children }) {\n  return (\n    <section className=\"Page\">\n      {pageTitle &&\n        <PageTitle pageTitle={pageTitle} />\n      }\n      {children}\n    </section>\n  );\n}","import request from './helpers/request';\n\nconst BASE_URL = '/admins';\n\nexport async function postAdmin(admin) {\n  const newAdmin = function (admin) {\n    return {\n      firstName: admin.firstName,\n      middleName: admin.middleName,\n      lastName: admin.lastName,\n      email: admin.email,\n      idNumber: admin.idNumber,\n      phoneNumber: admin.phoneNumber,\n      addressNumber: admin.addressNumber,\n      addressCode: admin.addressCode,\n      addressTown: admin.addressTown,\n    };\n  }(admin);\n\n  return await request({\n    url: `${BASE_URL}/register`,\n    method: 'POST',\n    body: newAdmin,\n    headers: {\n      Authorization: `Bearer ${admin.token}`,\n    }\n  });\n}\n\nexport async function login({\n  email,\n  password\n}) {\n  return await request({\n    url: `${BASE_URL}/login`,\n    method: 'POST',\n    body: {\n      email,\n      password,\n    }\n  });\n}\n\nexport async function changePassword({\n  adminId,\n  oldPassword,\n  newPassword,\n  newPasswordConfirm\n}) {\n  return await request({\n    url: `${BASE_URL}/${adminId}/change-password`,\n    method: 'PUT',\n    body: {\n      oldPassword,\n      newPassword,\n      newPasswordConfirm\n    }\n  });\n}","import store from '../../../redux/store';\nimport { addError } from '../../../redux/actions';\n\nexport default function handleError(error) {\n  console.log('TODO: handle error', error);\n  store.dispatch(addError(error));\n  return null;\n}","const API_URL = 'http://localhost:4000/api/v1';\n\nexport {\n  API_URL\n};","import handleError from \"./handleError\";\nimport { API_URL as api_url } from \"../constants\";\n\nconst { NODE_ENV } = process.env;\nconst API_URL =\n  NODE_ENV === \"production\"\n    ? \"https://orient-backend-ke.herokuapp.com/api/v1\"\n    : api_url;\n\nexport default async function request({ url, method, body, query, headers }) {\n  try {\n    const queryBody = constructUrlBody(query);\n    const requestUrl = `${API_URL}${url}?${queryBody}`;\n    const resp = await fetch(requestUrl, {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...headers,\n      },\n      body: JSON.stringify(body),\n    });\n\n    const { status, data, error } = await resp.json();\n    if (resp.status >= 500) {\n      return handleError(\"Uh oh, something's not right. Try again later.\");\n    }\n\n    if (resp.status >= 400 && error) {\n      return handleError(error);\n    }\n\n    return { status, data, error };\n  } catch (error) {\n    handleError(error.message);\n  }\n}\n\nfunction constructUrlBody(data) {\n  if (!data) {\n    return \"\";\n  }\n\n  let ulrBody = [];\n  for (let name in data) {\n    // skip inherited and functions\n    if (!data.hasOwnProperty(name) || typeof name === \"function\") {\n      continue;\n    }\n    let value = data[name];\n    if (!value) {\n      continue; // skip null/undefined\n    }\n    value = value.toString();\n    name = encodeURIComponent(name.replace(\" \", \"+\"));\n    value = encodeURIComponent(value.replace(\" \", \"+\"));\n    ulrBody.push(`${name}=${value}`);\n  }\n\n  return ulrBody.join(\"&\");\n}\n","import React from 'react';\nimport {\n  Col,\n  Row,\n  Typography,\n} from 'antd';\n\nimport Page from '../../../components/Page';\n\nexport default function AuthPage({title, children}) {\n  return (\n    <Page>\n      <Row justify=\"center\">\n        <Col>\n          <img src=\"/orient-insurance/orient-logo.png\" alt=\"Company logo\"\n            style={{\n              margin: '0 auto',\n              display: 'block',\n              borderRadius: '10%',\n              width: '75px',\n              marginBottom: '1em',\n            }} />\n          <Typography.Title level={3}>{title}</Typography.Title>\n        </Col>\n      </Row>\n      {children}\n    </Page>\n  );\n}","import React from 'react';\nimport {\n  Card,\n  Col,\n  Form,\n  Input,\n  Row,\n} from 'antd';\n\nexport default function PasswordDetails() {\n  return (\n    <Card>\n      <Row gutter={16}>\n        <Col span={24}>\n          <Form.Item\n            label=\"Old password\"\n            name=\"oldPassword\"\n            rules={[\n              { required: true, message: 'Password is required' },\n            ]}>\n            <Input.Password />\n          </Form.Item>\n        </Col>\n      </Row>\n      <Row gutter={16}>\n        <Col span={24}>\n          <Form.Item\n            label=\"New password\"\n            name=\"newPassword\"\n            rules={[\n              { required: true, message: 'Password is required' },\n              { \n                pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=^.{8,45}$)/,\n                message: `Password should contain numbers, letters and \n                at least 8 characters`\n              }\n            ]}>\n            <Input.Password />\n          </Form.Item>\n        </Col>\n      </Row>\n      <Row gutter={16}>\n        <Col span={24}>\n          <Form.Item\n            label=\"Confirm new password\"\n            dependencies={['newPassword']}\n            hasFeedback\n            name=\"newPasswordConfirm\"\n            rules={[\n              { required: true, message: 'Password is required' },\n              ({getFieldValue}) => ({\n                validator(rule, value) {\n                  if (getFieldValue('newPassword') === value) {\n                    return Promise.resolve();\n                  }\n                  return Promise.reject('Passwords do not match.');\n                }\n              })\n            ]}>\n            <Input.Password />\n          </Form.Item>\n        </Col>\n      </Row>\n    </Card>\n  );\n}","import React, { useState } from 'react';\nimport {\n  Button,\n  Col,\n  Form,\n  Row,\n} from 'antd';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport AuthPage from './parts/AuthPage';\nimport PasswordDetails from './parts/PasswordDetails';\nimport { changePassword } from '../../util/http/admins';\n\nimport '../Form.css';\n\nexport default function ChangePassword({ addError }) {\n  const location = useLocation();\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [changeSuccess, setChangeSuccess] = useState(false);\n  const submitPassword = async () => {\n    setLoading(true);\n    try {\n      const values = await form.validateFields();\n      const resp = await changePassword({\n        ...location?.state,\n        ...values,\n      });\n      if (resp && resp.data) {\n        form.resetFields();\n        setChangeSuccess(true);\n      } else if (resp && resp.error) {\n        addError(resp.error);\n      }\n    } catch (error) {\n      console.log('An error occurred', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <AuthPage title=\"Change password\">\n      <Row justify=\"center\">\n        <Col xs={20} sm={14} md={10} lg={8} xl={6}>\n          {changeSuccess ?\n            <div>\n              Password change successful. Proceed to <Link to=\"/login\">login</Link>\n            </div> :\n            <Form className=\"OForm\"\n              form={form}>\n              <PasswordDetails />\n              <Row justify=\"space-between\">\n                <Link to=\"/login\">\n                  <Button type=\"link\">Login</Button>\n                </Link>\n                <Button\n                  type=\"primary\"\n                  onClick={submitPassword}\n                  loading={loading}>\n                  Submit\n              </Button>\n              </Row>\n            </Form>\n          }\n        </Col>\n      </Row>\n    </AuthPage>\n  );\n}","import { connect } from 'react-redux';\n\nimport ChangePassword from '../../pages/admins/ChangePassword';\nimport { addError } from '../../redux/actions';\n\nconst mapDispatchToProps = (dispatch) => ({\n  addError: error => dispatch(addError(error))\n})\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(ChangePassword);"],"sourceRoot":""}