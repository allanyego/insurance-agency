(this["webpackJsonporient-insurance"]=this["webpackJsonporient-insurance"]||[]).push([[6],{644:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1),r=a.n(n),c=(a(81),a(13)),l=(a(82),a(4)),u=(a(83),a(32));function i(e){var t=e.pageTitle;return r.a.createElement(c.a,{justify:"center"},r.a.createElement(l.a,null,r.a.createElement(u.a.Title,{level:3},t)))}a(652);function s(e){var t=e.pageTitle,a=e.children;return r.a.createElement("section",{className:"Page"},t&&r.a.createElement(i,{pageTitle:t}),a)}},645:function(e,t,a){},646:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return m}));var n=a(366),r=a.n(n),c=a(640),l=a(647);function u(e){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return{firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,email:e.email,idNumber:e.idNumber,phoneNumber:e.phoneNumber,addressNumber:e.addressNumber,addressCode:e.addressCode,addressTown:e.addressTown}}(t),e.next=3,Object(l.a)({url:"".concat("/admins","/register"),method:"POST",body:a,headers:{Authorization:"Bearer ".concat(t.token)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.next=3,Object(l.a)({url:"".concat("/admins","/login"),method:"POST",body:{email:a,password:n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(r.a.mark((function e(t){var a,n,c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.adminId,n=t.oldPassword,c=t.newPassword,u=t.newPasswordConfirm,e.next=3,Object(l.a)({url:"".concat("/admins","/").concat(a,"/change-password"),method:"PUT",body:{oldPassword:n,newPassword:c,newPasswordConfirm:u}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},647:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(366),r=a.n(n),c=a(158),l=a(640),u=a(174),i=a(198);function s(e){return console.log("TODO: handle error",e),u.a.dispatch(Object(i.b)(e)),null}var o="https://orient-backend-ke.herokuapp.com/api/v1";function m(e){return d.apply(this,arguments)}function d(){return(d=Object(l.a)(r.a.mark((function e(t){var a,n,l,u,i,m,d,f,E,b,h,v;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.method,l=t.body,u=t.query,i=t.headers,e.prev=1,m=p(u),d="".concat(o).concat(a,"?").concat(m),e.next=6,fetch(d,{method:n,headers:Object(c.a)({"Content-Type":"application/json"},i),body:JSON.stringify(l)});case 6:return f=e.sent,e.next=9,f.json();case 9:if(E=e.sent,b=E.status,h=E.data,v=E.error,!(f.status>=500)){e.next=15;break}return e.abrupt("return",s("Uh oh, something's not right. Try again later."));case 15:if(!(f.status>=400&&v)){e.next=17;break}return e.abrupt("return",s(v));case 17:return e.abrupt("return",{status:b,data:h,error:v});case 20:e.prev=20,e.t0=e.catch(1),s(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function p(e){if(!e)return"";var t=[];for(var a in e)if(e.hasOwnProperty(a)&&"function"!==typeof a){var n=e[a];n&&(n=n.toString(),a=encodeURIComponent(a.replace(" ","+")),n=encodeURIComponent(n.replace(" ","+")),t.push("".concat(a,"=").concat(n)))}return t.join("&")}},648:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(81);var n=a(13),r=(a(82),a(4)),c=(a(83),a(32)),l=a(1),u=a.n(l),i=a(644);function s(e){var t=e.title,a=e.children;return u.a.createElement(i.a,null,u.a.createElement(n.a,{justify:"center"},u.a.createElement(r.a,null,u.a.createElement("img",{src:"/orient-insurance/orient-logo.png",alt:"Company logo",style:{margin:"0 auto",display:"block",borderRadius:"10%",width:"75px",marginBottom:"1em"}}),u.a.createElement(c.a.Title,{level:3},t))),a)}},649:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));a(82);var n=a(4),r=(a(81),a(13)),c=(a(133),a(85)),l=a(366),u=a.n(l),i=a(158),s=a(640),o=(a(641),a(642)),m=a(157),d=a(1),p=a.n(d),f=a(69),E=a(60),b=a(648),h=(a(368),a(260)),v=(a(367),a(643));function g(){return p.a.createElement(h.a,null,p.a.createElement(r.a,{gutter:16},p.a.createElement(n.a,{span:24},p.a.createElement(o.a.Item,{label:"Old password",name:"oldPassword",rules:[{required:!0,message:"Password is required"}]},p.a.createElement(v.a.Password,null)))),p.a.createElement(r.a,{gutter:16},p.a.createElement(n.a,{span:24},p.a.createElement(o.a.Item,{label:"New password",name:"newPassword",rules:[{required:!0,message:"Password is required"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=^.{8,45}$)/,message:"Password should contain numbers, letters and \n                at least 8 characters"}]},p.a.createElement(v.a.Password,null)))),p.a.createElement(r.a,{gutter:16},p.a.createElement(n.a,{span:24},p.a.createElement(o.a.Item,{label:"Confirm new password",dependencies:["newPassword"],hasFeedback:!0,name:"newPasswordConfirm",rules:[{required:!0,message:"Password is required"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return t("newPassword")===a?Promise.resolve():Promise.reject("Passwords do not match.")}}}]},p.a.createElement(v.a.Password,null)))))}var y=a(646);a(645);function j(e){var t=e.addError,a=Object(f.h)(),l=o.a.useForm(),h=Object(m.a)(l,1)[0],v=Object(d.useState)(!1),j=Object(m.a)(v,2),O=j[0],w=j[1],x=Object(d.useState)(!1),k=Object(m.a)(x,2),I=k[0],N=k[1],P=function(){var e=Object(s.a)(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,h.validateFields();case 4:return n=e.sent,e.next=7,Object(y.a)(Object(i.a)({},null===a||void 0===a?void 0:a.state,{},n));case 7:(r=e.sent)&&r.data?(h.resetFields(),N(!0)):r&&r.error&&t(r.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurred",e.t0);case 14:return e.prev=14,w(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(b.a,{title:"Change password"},p.a.createElement(r.a,{justify:"center"},p.a.createElement(n.a,{xs:20,sm:14,md:10,lg:8,xl:6},I?p.a.createElement("div",null,"Password change successful. Proceed to ",p.a.createElement(E.b,{to:"/login"},"login")):p.a.createElement(o.a,{className:"OForm",form:h},p.a.createElement(g,null),p.a.createElement(r.a,{justify:"space-between"},p.a.createElement(E.b,{to:"/login"},p.a.createElement(c.a,{type:"link"},"Login")),p.a.createElement(c.a,{type:"primary",onClick:P,loading:O},"Submit"))))))}},650:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(82);var n=a(4),r=a(1),c=a.n(r);function l(e){var t=e.children;return c.a.createElement(n.a,{xs:24,sm:12,lg:8},t)}},652:function(e,t,a){},671:function(e,t,a){"use strict";a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return I}));a(82);var n=a(4),r=(a(81),a(13)),c=(a(133),a(85)),l=a(366),u=a.n(l),i=a(640),s=(a(641),a(642)),o=a(157),m=a(1),d=a.n(m),p=(a(368),a(260)),f=(a(367),a(643)),E=a(650),b={pattern:/^[a-zA-Z]{2,}$/,message:"Invalid value"};function h(){return d.a.createElement(p.a,{title:"Admin details"},d.a.createElement(r.a,{gutter:16},d.a.createElement(E.a,null,d.a.createElement(s.a.Item,{name:"firstName",label:"First name",rules:[{required:!0,message:"First name is required"},b]},d.a.createElement(f.a,null))),d.a.createElement(E.a,null,d.a.createElement(s.a.Item,{name:"middleName",label:"Middle name",rules:[b]},d.a.createElement(f.a,null))),d.a.createElement(E.a,null,d.a.createElement(s.a.Item,{name:"lastName",label:"Last name",rules:[{required:!0,message:"Last name is required"},b]},d.a.createElement(f.a,null)))),d.a.createElement(r.a,{gutter:16},d.a.createElement(E.a,null,d.a.createElement(s.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9]{1,}$/,message:"Address number is invalid"}]},d.a.createElement(f.a,null))),d.a.createElement(E.a,null,d.a.createElement(s.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^\d{1,}$/,message:"Postal code should be a number"}]},d.a.createElement(f.a,null))),d.a.createElement(E.a,null,d.a.createElement(s.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Town name is invalid"}]},d.a.createElement(f.a,null)))),d.a.createElement(r.a,{gutter:16},d.a.createElement(E.a,null,d.a.createElement(s.a.Item,{label:"ID/Passport number",name:"idNumber",rules:[{required:!0,message:"ID number is required"},{pattern:/^[0-9]{1,}$/,message:"ID/Passport should be a number"}]},d.a.createElement(f.a,null))),d.a.createElement(E.a,null,d.a.createElement(s.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},d.a.createElement(f.a,null))),d.a.createElement(E.a,null,d.a.createElement(s.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{required:!0,message:"Phone number is required"},{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid phone number"}]},d.a.createElement(f.a,null)))))}var v=a(644),g=a(646);a(645);function y(e){var t=e.addSuccess,a=e.addError,l=s.a.useForm(),p=Object(o.a)(l,1)[0],f=Object(m.useState)(!1),E=Object(o.a)(f,2),b=E[0],y=E[1],j=function(){var e=Object(i.a)(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,p.validateFields();case 4:return n=e.sent,e.next=7,Object(g.c)(n);case 7:(r=e.sent)&&r.data?(t("Data submitted successfully"),p.resetFields()):r&&r.error&&a(r.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a(e.t0.message);case 14:return e.prev=14,y(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(v.a,{pageTitle:"Register new admin"},d.a.createElement(r.a,{justify:"center"},d.a.createElement(n.a,null,d.a.createElement(s.a,{className:"OForm",form:p},d.a.createElement(h,null),d.a.createElement(r.a,{justify:"end"},d.a.createElement(c.a,{type:"primary",onClick:j,loading:b},"Save"))))))}var j=a(158),O=a(69),w=a(648),x=(a(670),a(672));function k(){return d.a.createElement(p.a,null,d.a.createElement(r.a,{gutter:16},d.a.createElement(n.a,{span:24},d.a.createElement(s.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},d.a.createElement(f.a,null)))),d.a.createElement(r.a,{gutter:16},d.a.createElement(n.a,{span:24},d.a.createElement(s.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Password is required"}]},d.a.createElement(f.a.Password,null)))),d.a.createElement(s.a.Item,{name:"rememberMe",valuePropName:"checked",extra:d.a.createElement("span",null,"Remember me"),className:"RememberMeInput"},d.a.createElement(x.a,{defaultChecked:!1})))}function I(e){var t=e.login,a=e.addError,l=e.auth,p=Object(O.g)(),f=Object(O.h)(),E=s.a.useForm(),b=Object(o.a)(E,1)[0],h=Object(m.useState)(!1),v=Object(o.a)(h,2),y=v[0],x=v[1],I=function(){var e=Object(i.a)(u.a.mark((function e(){var n,r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,b.validateFields();case 4:return n=e.sent,e.next=7,Object(g.b)(n);case 7:(r=e.sent)&&r.error?"NEEDS_RESET"===(null===(c=r.error)||void 0===c?void 0:c.accState)?(a("You need to change your password"),p.push({pathname:"/change-password",state:{adminId:r.error.id}})):a(r.error):r&&r.data&&(b.resetFields(),t(Object(j.a)({rememberMe:n.rememberMe},r.data)),p.push((null===f||void 0===f||null===(l=f.state)||void 0===l?void 0:l.attemptedRoute)||"/app")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurred",e.t0);case 14:return e.prev=14,x(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return(null===l||void 0===l?void 0:l.token)?d.a.createElement(O.a,{to:"/app"}):d.a.createElement(w.a,{title:"Admin login"},d.a.createElement(r.a,{justify:"center"},d.a.createElement(n.a,{xs:20,sm:14,md:10,lg:8,xl:6},d.a.createElement(s.a,{className:"OForm",form:b},d.a.createElement(k,null),d.a.createElement(r.a,{justify:"end"},d.a.createElement(c.a,{type:"primary",onClick:I,loading:y},"Log in"))))))}a(649)},700:function(e,t,a){},806:function(e,t,a){},807:function(e,t,a){},808:function(e,t,a){},818:function(e,t,a){"use strict";a.r(t);var n=a(105),r=a(157),c=(a(263),a(369)),l=(a(661),a(663)),u=a(1),i=a.n(u),s=a(69),o=(a(662),a(665)),m=(a(698),a(813)),d=a(819),p=a(820),f=a(821),E=a(822),b=a(823),h=a(824),v=a(825),g=a(826),y=a(827),j=a(828),O=(a(700),a(60)),w=l.a.Sider,x=m.a.SubMenu;function k(e){var t=e.collapsed,a=e.open,n=void 0===a||a;return i.a.createElement(w,{trigger:null,collapsible:!0,collapsed:t,className:n?"open":""},i.a.createElement("div",{className:"logo"},i.a.createElement("img",{src:"/orient-insurance/orient-logo.png",alt:"Company logo"})),i.a.createElement(m.a,{theme:"dark",mode:"inline"},i.a.createElement(x,{key:"sub1",title:i.a.createElement("span",null,i.a.createElement(d.a,null),i.a.createElement("span",null,"Clients"))},i.a.createElement(m.a.Item,{key:"1"},i.a.createElement(O.b,{to:"/app/clients/new"},i.a.createElement(p.a,null),i.a.createElement("span",null,"New client"))),i.a.createElement(m.a.Item,{key:"2"},i.a.createElement(O.b,{to:"/app/clients"},i.a.createElement(f.a,null),i.a.createElement("span",null,"List clients")))),i.a.createElement(x,{key:"sub2",title:i.a.createElement("span",null,i.a.createElement(E.a,null),i.a.createElement("span",null,"Issuers"))},i.a.createElement(m.a.Item,{key:"3"},i.a.createElement(O.b,{to:"/app/insurers/new"},i.a.createElement(b.a,null),i.a.createElement("span",null,"New issuer"))),i.a.createElement(m.a.Item,{key:"4"},i.a.createElement(O.b,{to:"/app/insurers"},i.a.createElement(h.a,null),i.a.createElement("span",null,"List issuers")))),i.a.createElement(x,{key:"sub3",title:i.a.createElement("span",null,i.a.createElement(v.a,null),i.a.createElement("span",null,"Reports"))},i.a.createElement(m.a.Item,{key:"5"},i.a.createElement(O.b,{to:"/app/reports/applications/new"},i.a.createElement(g.a,null),i.a.createElement("span",null,"New applications"))),i.a.createElement(m.a.Item,{key:"6"},i.a.createElement(O.b,{to:"/app/reports/applications/renewals"},i.a.createElement(y.a,null),i.a.createElement("span",null,"Renewal applications")))),i.a.createElement(o.a,null),i.a.createElement(m.a.Item,{key:"7"},i.a.createElement(O.b,{to:"/app/admins/new"},i.a.createElement(j.a,null),i.a.createElement("span",null,"Add admin")))))}a(675);var I=a(691),N=(a(133),a(85)),P=a(829),C=a(830),T=a(636),q=a(831),S=a(832),A=function(e){return(e=e.split(" ")).map((function(e){return(e=e.split(""))[0]=e[0].toUpperCase(),e.join("")})).join(" ")},R=l.a.Header,F=c.a.useBreakpoint;var L=a(198),D=Object(n.b)((function(e){return{user:e.auth}}),(function(e){return{logout:function(){return e(Object(L.h)())}}}))((function(e){var t=e.collapsed,a=e.toggle,n=e.logout,c=e.user,l=e.open,o=e.toggleOpen,m=F(),p=Object(u.useState)(!1),f=Object(r.a)(p,2),E=f[0],b=f[1];Object(u.useEffect)((function(){m.md?b(!1):b(!0)}),[m]);var h=Object(s.g)();return i.a.createElement(R,{className:"site-layout-background",style:{display:"flex",padding:"0 3em 0 0",justifyContent:"space-between",alignItems:"center"}},E||i.a.createElement(t?P.a:C.a,{className:"trigger",onClick:a}),E&&i.a.createElement(l?T.a:q.a,{className:"trigger",onClick:o}),i.a.createElement(I.a,{trigger:"click",placement:"bottomRight",title:A("".concat(c.firstName," ").concat(c.lastName)),content:i.a.createElement(N.a,{block:!0,icon:i.a.createElement(S.a,null),type:"danger",onClick:function(){n(),h.push("/login")}},"Logout")},i.a.createElement(d.a)))})),z=(a(654),a(653)),B=(a(81),a(13)),V=(a(82),a(4)),M=a(366),$=a.n(M),U=a(640),Y=(a(367),a(643)),G=a(833),Z=a(644),H=a(158),K=a(647);function J(e){return _.apply(this,arguments)}function _(){return(_=Object(U.a)($.a.mark((function e(t){var a,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return{firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,email:e.email,idNumber:e.idNumber,phoneNumber:e.phoneNumber,addressNumber:e.addressNumber,addressCode:e.addressCode,addressTown:e.addressTown,kraPin:e.kraPin,insurer:e.insurer,occupation:e.occupation}}(t),"vehicle"===(n=function(e){return{policyNumber:e.policyNumber,policyPeriod:e.policyPeriod,sumInsured:e.sumInsured,premiumRate:e.premiumRate,pvt:e.pvt,excessProtection:e.excessProtection,antiTheftCoverage:e.antiTheftCoverage,rookie:e.rookie,passengersPllCoverage:e.passengersPllCoverage,policyClass:e.policyClass}}(t)).policyClass&&(n.vehicle=function(e){return{registrationNumber:e.registrationNumber,make:e.make,bodyType:e.bodyType,bodyColor:e.bodyColor,manufactureYear:e.manufactureYear,engineNumber:e.engineNumber,chasisNumber:e.chasisNumber,tonnage:e.tonnage,ratingCc:e.ratingCc}}(t)),e.next=5,Object(K.a)({url:"/clients",method:"POST",body:Object(H.a)({policy:n},a),headers:{Authorization:"Bearer ".concat(t.token)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return W.apply(this,arguments)}function W(){return(W=Object(U.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.a)({url:"/clients",method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(U.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.a)({url:"/clients",method:"GET",query:{search:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(U.a)($.a.mark((function e(t){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.clientId,e.next=3,Object(K.a)({url:"".concat("/clients","/").concat(a),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=Y.a.Search;var re=a(692),ce=(a(641),a(642)),le=(a(368),a(260)),ue=a(650),ie={pattern:/^[a-zA-Z]{2,}$/,message:"Invalid value"};function se(){return i.a.createElement(le.a,{title:"Client details"},i.a.createElement(B.a,{gutter:16},i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{name:"firstName",label:"First name",rules:[{required:!0,message:"First name is required"},ie]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{name:"middleName",label:"Middle name",rules:[ie]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{name:"lastName",label:"Last name",rules:[{required:!0,message:"Last name is required"},ie]},i.a.createElement(Y.a,null)))),i.a.createElement(B.a,{gutter:16},i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9]{1,}$/,message:"Address number is invalid"}]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^\d{1,}$/,message:"Postal code should be a number"}]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Town name is invalid"}]},i.a.createElement(Y.a,null)))),i.a.createElement(B.a,{gutter:16},i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"ID/Passport number",name:"idNumber",rules:[{required:!0,message:"ID number is required"},{pattern:/^[0-9]{1,}$/,message:"ID/Passport should be a number"}]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{required:!0,message:"Phone number is required"},{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid phone number"}]},i.a.createElement(Y.a,null)))),i.a.createElement(B.a,{gutter:16},i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Occupation",name:"occupation",rules:[{required:!0,message:"Occupation is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Occupation should be a string"}]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"KRA pin",name:"kraPin",rules:[{required:!0,message:"KRA pin is required"},{pattern:/^[a-zA-Z0-9]{11}$/,message:"KRA Pin should be 11 characters"}]},i.a.createElement(Y.a,null)))))}a(670);var oe=a(672),me=(a(792),a(815)),de=(a(794),a(814)),pe=(a(694),a(690)),fe=(a(83),a(32));function Ee(){return i.a.createElement(le.a,{title:"Vehicle details"},i.a.createElement(B.a,{gutter:16},i.a.createElement(V.a,null,i.a.createElement(ce.a.Item,{label:"Registration number",name:"registrationNumber",rules:[{required:!0,message:"Vehicle registration no is required"}]},i.a.createElement(Y.a,null))),i.a.createElement(V.a,null,i.a.createElement(ce.a.Item,{label:"Make",name:"make",rules:[{required:!0,message:"Vehicle make is required"}]},i.a.createElement(Y.a,null))),i.a.createElement(V.a,null,i.a.createElement(ce.a.Item,{label:"Body type",name:"bodyType",rules:[{required:!0,message:"Vehicle body type is required"}]},i.a.createElement(Y.a,null)))),i.a.createElement(B.a,{gutter:16},i.a.createElement(V.a,null,i.a.createElement(ce.a.Item,{label:"Body color",name:"bodyColor",rules:[{required:!0,message:"Vehicle body color is required"}]},i.a.createElement(Y.a,null))),i.a.createElement(V.a,null,i.a.createElement(ce.a.Item,{label:"Chasis number",name:"chasisNumber",rules:[{required:!0,message:"Vehicle chasis number is required"}]},i.a.createElement(Y.a,null))),i.a.createElement(V.a,null,i.a.createElement(ce.a.Item,{label:"Engine number",name:"engineNumber",rules:[{required:!0,message:"Vehicle body type is required"}]},i.a.createElement(Y.a,null)))),i.a.createElement(B.a,{gutter:16},i.a.createElement(V.a,null,i.a.createElement(ce.a.Item,{label:"Rating (cc)",name:"ratingCc",rules:[{required:!0,message:"Vehicle rating (cc) is required"}]},i.a.createElement(Y.a,null))),i.a.createElement(V.a,null,i.a.createElement(ce.a.Item,{label:"Tonnage",name:"tonnage",rules:[{required:!0,message:"Vehicle tonnage is required"}]},i.a.createElement(Y.a,null))),i.a.createElement(V.a,null,i.a.createElement(ce.a.Item,{label:"Year of manufacture",name:"manufactureYear",rules:[{required:!0,message:"Vehicle year of manufacture is required"}]},i.a.createElement(pe.a.YearPicker,null)))))}var be=fe.a.Text;function he(){var e=Object(u.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],c=Object(u.useState)(null),l=Object(r.a)(c,2),s=l[0],m=l[1];return i.a.createElement(le.a,{title:"Policy details"},i.a.createElement(B.a,{gutter:16},i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Policy number",name:"policyNumber",rules:[{required:!0,message:"Policy number is required"}]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Policy Period"},i.a.createElement(Y.a.Group,null,i.a.createElement(ce.a.Item,{name:["policyPeriod","start"],help:"Select start date",rules:[{required:!0,message:"Start date required"}]},i.a.createElement(pe.a,{disabledDate:function(e){return e.isBefore()},onChange:function(e){return m(e)}})),i.a.createElement(ce.a.Item,{name:["policyPeriod","end"],help:"Select end date",rules:[{required:!0,message:"End date required"}]},i.a.createElement(pe.a,{disabledDate:function(e){return s?e.isSameOrBefore(s):e.isSameOrBefore()}}))))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Sum insured",name:"sumInsured",rules:[{required:!0,message:"Sum is required"}]},i.a.createElement(de.a,{min:1})))),i.a.createElement(B.a,{gutter:16},i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"PVT",name:"pvt",rules:[{required:!0,message:"PVT is required"}]},i.a.createElement(de.a,{min:1}))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Premium rate",name:"premiumRate",rules:[{required:!0,message:"Premium rate is required"}]},i.a.createElement(de.a,{min:1})))),i.a.createElement(B.a,null,i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Select the insurance class",name:"policyClass",rules:[{required:!0,message:"Please select policy class"}]},i.a.createElement(me.a.Group,{onChange:function(e){if("fire"===e.target.value)return n(!1);n(!0)}},i.a.createElement(me.a,{value:"fire"},"Fire"),i.a.createElement(me.a,{value:"vehicle"},"Vehicle"))))),a&&i.a.createElement("div",null,i.a.createElement(o.a,null),i.a.createElement(Ee,null),i.a.createElement(be,{strong:!0,style:{marginBottom:"0.7em"}},"Extension"),i.a.createElement(B.a,{className:"OFormRow"},i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{help:"5% with a min of Kshs30,000/=",label:"Add excess protection",name:"excessProtection",valuePropName:"checked"},i.a.createElement(oe.a,{defaultChecked:!1}))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{help:"+ Kshs5000",label:"Young/New driver",name:"rookie",valuePropName:"checked"},i.a.createElement(oe.a,{defaultChecked:!1}))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Passengers (PLL)",name:"passengersPllCoverage",valuePropName:"checked"},i.a.createElement(oe.a,{defaultChecked:!1}))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{help:"10% antitheft device, 20% no device",label:"Theft",name:"antiTheftCoverage",valuePropName:"checked"},i.a.createElement(oe.a,{defaultChecked:!1}))))))}function ve(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(U.a)($.a.mark((function e(t){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"vehicle"===(a=function(e){return{insurer:e.insurer,client:e.client,policyNumber:e.policyNumber,policyPeriod:e.policyPeriod,sumInsured:e.sumInsured,premiumRate:e.premiumRate,pvt:e.pvt,excessProtection:e.excessProtection,antiTheftCoverage:e.antiTheftCoverage,rookie:e.rookie,passengersPllCoverage:e.passengersPllCoverage,policyClass:e.policyClass}}(t)).policyClass&&(a.vehicle=function(e){return{registrationNumber:e.registrationNumber,make:e.make,bodyType:e.bodyType,bodyColor:e.bodyColor,manufactureYear:e.manufactureYear,engineNumber:e.engineNumber,chasisNumber:e.chasisNumber,tonnage:e.tonnage,ratingCc:e.ratingCc}}(t)),e.next=4,Object(K.a)({url:"/policies",method:"POST",body:a,headers:{Authorization:"Bearer ".concat(t.token)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return je.apply(this,arguments)}function je(){return(je=Object(U.a)($.a.mark((function e(t){var a,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyId,n=t.token,e.next=3,Object(K.a)({url:"".concat("/policies","/").concat(a),method:"PUT",body:{approved:!0},headers:{Authorization:"Bearer ".concat(n)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return we.apply(this,arguments)}function we(){return(we=Object(U.a)($.a.mark((function e(t){var a,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyId,n=t.token,e.next=3,Object(K.a)({url:"".concat("/policies","/").concat(a,"/renew"),method:"PUT",headers:{Authorization:"Bearer ".concat(n)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(U.a)($.a.mark((function e(t){var a,n,r,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyNumber,n=t.client,r=t.insurer,c=t.type,e.next=3,Object(K.a)({url:"/policies",method:"GET",query:{search:a,client:n,insurer:r,type:c}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(U.a)($.a.mark((function e(t){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyId,e.next=3,Object(K.a)({url:"".concat("/policies","/").concat(a),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(U.a)($.a.mark((function e(t){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyId,e.next=3,Object(K.a)({url:"".concat("/policies","/").concat(a,"/vehicle"),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(645);a(806);function Te(e){var t=e.children;return i.a.createElement(B.a,{justify:"center",style:{paddingTop:"2em"}},i.a.createElement(V.a,{xs:24},i.a.createElement(le.a,null,t)))}var qe=a(834);var Se=Object(n.b)((function(e,t){var a=t.clientId,n=t.insurerId;return null!=a?{subscriptions:e.policies.filter((function(e){return e.client===a}))}:{subscriptions:e.policies.filter((function(e){return e.insurer===n}))}}))((function(e){var t=e.subscriptions,a=e.fallback,n=e.extra,r=void 0===n?function(){}:n,c=e.onMount,l=Object(s.h)();return Object(u.useEffect)((function(){Object(U.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:case"end":return e.stop()}}),e)})))()}),[]),!t.length&&a?i.a.createElement("div",null,r(),a()):i.a.createElement("div",null,r(),i.a.createElement(le.a,{title:"Subscriptions"},i.a.createElement(z.a,{size:"small",itemLayout:"horizontal",dataSource:t,renderItem:function(e){return i.a.createElement(O.b,{to:{pathname:"/app/policies/".concat(e.id),state:{prevPath:l.pathname}}},i.a.createElement(z.a.Item,null,i.a.createElement(z.a.Item.Meta,{title:String(e.policyNumber).toUpperCase()}),i.a.createElement("div",null,i.a.createElement(G.a,null))))}})))})),Ae=a(338),Re=(a(807),fe.a.Text),Fe=fe.a.Title;function Le(e){var t=e.label,a=e.title,n=e.fallbackUrl;return i.a.createElement(B.a,{className:"ProfileHeader"},i.a.createElement(V.a,{flex:"auto"},i.a.createElement(Re,{disabled:!0},t,":"),i.a.createElement(Fe,{level:3},a)),i.a.createElement(V.a,null,i.a.createElement(Ae.a,{fallbackUrl:n})))}function De(e){var t=e.header||!0;return i.a.createElement("div",null,t&&i.a.createElement(Le,e),e.children)}var ze=fe.a.Text;function Be(e){var t=e.title,a=e.content,n=e.children;return i.a.createElement(B.a,null,i.a.createElement(V.a,{xs:9,sm:6,md:5},i.a.createElement(ze,null,t)),i.a.createElement(V.a,{flex:!0},!!a&&i.a.createElement(ze,{strong:!0},a),n))}a(808);function Ve(){return i.a.createElement(De,{header:!1},i.a.createElement("div",{className:"ProfileSkeleton"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)))}var Me=fe.a.Text;function $e(e){var t=e.client;return i.a.createElement(B.a,{justify:"center",style:{margin:"2em auto 2em"}},i.a.createElement(V.a,null,i.a.createElement(Me,{style:{marginRight:"1em"},strong:!0},"Add new policy for client"),i.a.createElement(O.b,{to:{pathname:"/app/clients/new",state:{clientId:t.id}}},i.a.createElement(N.a,{type:"primary",shape:"circle",icon:i.a.createElement(qe.a,null)}))))}var Ue=Object(n.b)((function(e,t){var a=t.clientId;return{client:e.clients.find((function(e){return Number(e.id)===Number(a)}))}}),(function(e){return{updatePolicies:function(t){return e(Object(L.m)(t))},addClient:function(t){return e(Object(L.a)(t))}}}))((function(e){var t=e.client,a=e.updatePolicies,n=e.addClient,r=Object(s.i)().clientId,c=Object(s.g)();Object(u.useEffect)((function(){Object(U.a)($.a.mark((function e(){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,te({clientId:r});case 3:(a=e.sent)&&a.data?n(a.data):c.replace("/clients");case 5:case"end":return e.stop()}}),e)})))()}),[t]);var l=function(){var e=Object(U.a)($.a.mark((function e(n){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<=2)){e.next=5;break}return e.next=3,xe({client:t.id});case 3:(r=e.sent)&&r.data&&a(r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?i.a.createElement(De,{label:"Client name",title:A("".concat(t.firstName," ").concat(t.lastName)),fallbackUrl:"/app/clients"},i.a.createElement("div",{style:{paddingLeft:"1em",marginBottom:"1.5em"}},i.a.createElement(Be,{title:"ID No",content:t.idNumber}),i.a.createElement(Be,{title:"Address",content:A("".concat(t.addressNumber," ")+"".concat(t.addressTown,", ").concat(t.addressCode))}),i.a.createElement(Be,{title:"Occupation",content:A(t.occupation)}),i.a.createElement(Be,{title:"Phone",content:t.phoneNumber}),i.a.createElement(Be,{title:"Email",content:t.email}),i.a.createElement(Be,{title:"Member since",content:new Date(t.createdAt).toLocaleDateString()})),i.a.createElement(Se,{clientId:t.id,extra:function(){return i.a.createElement($e,{client:t})},onMount:l})):i.a.createElement(Ve,null)}));function Ye(e){e.clients;var t=Object(s.i)().clientId;return i.a.createElement(Te,null,i.a.createElement(Ue,{clientId:t}))}var Ge=Object(n.b)((function(e){return{clients:e.clients}}),(function(e){return{updateClients:function(t){return e(Object(L.k)(t))}}}))((function(e){var t=e.clients,a=e.updateClients,n=Object(s.h)(),c=Object(u.useState)(""),l=Object(r.a)(c,2),o=l[0],m=l[1],d=Object(u.useState)(t),p=Object(r.a)(d,2),f=p[0],E=p[1];Object(u.useEffect)((function(){if(t.length<20)try{Object(U.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 7:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR clients",e)}}),[]),Object(u.useEffect)((function(){var e=o?t.filter((function(e){return e.firstName.match(o)||e.lastName.match(o)||e.middleName.match(o)})):t;E(e)}),[o,t]);var b=function(){var e=Object(U.a)($.a.mark((function e(t){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,X(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Z.a,{pageTitle:"Clients"},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{flex:"auto"},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{xs:24,sm:18,lg:12},i.a.createElement(ne,{placeholder:"client name",onSearch:b,enterButton:!0}))),i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{xs:24,lg:20},i.a.createElement(z.a,{itemLayout:"horizontal",dataSource:f,renderItem:function(e){var t=e.firstName,a=e.lastName;return i.a.createElement(O.b,{to:{pathname:"/app/clients/".concat(e.id),state:{prevPath:n.pathname}}},i.a.createElement(z.a.Item,null,i.a.createElement(z.a.Item.Meta,{title:A("".concat(t," ").concat(a)),description:"Member since "+new Date(e.createdAt).toLocaleDateString()}),i.a.createElement("div",null,i.a.createElement(G.a,null))))}}))))))})),Ze=Object(n.b)((function(e){return{token:e.auth.token}}),(function(e){return{addClient:function(t){e(Object(L.a)(t))},addVehicle:function(t){e(Object(L.f)(t))},addPolicy:function(t){e(Object(L.d)(t))},addSuccess:function(t){e(Object(L.e)(t))},addError:function(t){return e(Object(L.b)(t))}}}))((function(e){var t,a=e.addClient,n=e.addPolicy,c=e.addVehicle,l=e.addSuccess,o=e.addError,m=e.token,d=Object(s.i)().insurerId,p=Object(s.h)(),f=null===p||void 0===p||null===(t=p.state)||void 0===t?void 0:t.clientId,E=f?"Add policy for client":"Register new client",b=ce.a.useForm(),h=Object(r.a)(b,1)[0],v=Object(u.useState)(!1),g=Object(r.a)(v,2),y=g[0],j=g[1],O=function(e){j(!0);try{e().then((function(){l("Data submitted successfully"),h.resetFields()}))}catch(t){o(t.message)}finally{j(!1)}};return i.a.createElement(Z.a,{pageTitle:E},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,null,i.a.createElement(ce.a,{className:"OForm",form:h},!f&&i.a.createElement(se,null),i.a.createElement(he,null),i.a.createElement(B.a,{justify:"end"},i.a.createElement(N.a,{type:"primary",onClick:f?function(){O(function(){var e=Object(U.a)($.a.mark((function e(){var t,a,r,l,u;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.validateFields();case 2:return t=e.sent,e.next=5,ve(Object(H.a)({insurer:d,client:f,token:m},t));case 5:if(!(a=e.sent)||!a.data){e.next=12;break}r=a.data,l=r.vehicle,u=Object(re.a)(r,["vehicle"]),n(u),l&&c(l),e.next=14;break;case 12:if(!a||!a.error){e.next=14;break}throw Error(a.error);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())}:function(){O(function(){var e=Object(U.a)($.a.mark((function e(){var t,r,l,u,i,s,o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.validateFields();case 2:return t=e.sent,e.next=5,J(Object(H.a)({insurer:d,token:m},t));case 5:if(!(r=e.sent)||!r.data){e.next=14;break}l=r.data,u=l.policy,i=Object(re.a)(l,["policy"]),a(i),s=u.vehicle,o=Object(re.a)(u,["vehicle"]),n(o),s&&c(s),e.next=16;break;case 14:if(!r||!r.error){e.next=16;break}throw Error(r.error);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())},loading:y},"Submit"))))))}));function He(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(U.a)($.a.mark((function e(t){var a,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,n=Object(re.a)(t,["token"]),e.next=3,Object(K.a)({url:"/insurers",method:"POST",body:n,headers:{Authorization:"Bearer ".concat(a)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return _e.apply(this,arguments)}function _e(){return(_e=Object(U.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.a)({url:"/insurers",method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return We.apply(this,arguments)}function We(){return(We=Object(U.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.a)({url:"/insurers",method:"GET",query:{search:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return et.apply(this,arguments)}function et(){return(et=Object(U.a)($.a.mark((function e(t){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.insurerId,e.next=3,Object(K.a)({url:"".concat("/insurers","/").concat(a),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tt=Y.a.Search;var at=fe.a.Text;function nt(e){var t=e.insurer;return i.a.createElement(B.a,{justify:"center",style:{marginTop:"4em"}},i.a.createElement(V.a,null,i.a.createElement(at,{style:{marginRight:"1em"},strong:!0},"This insurer has no clients yet."),i.a.createElement(O.b,{to:{pathname:"/app/clients/new/".concat(t.id)}},i.a.createElement(N.a,{type:"primary",shape:"circle",icon:i.a.createElement(qe.a,null)}))))}var rt=Object(n.b)((function(e,t){var a=t.insurerId;return{insurer:e.insurers.find((function(e){return Number(e.id)===Number(a)}))}}),(function(e){return{updatePolicies:function(t){return e(Object(L.m)(t))},addInsurer:function(t){return e(Object(L.c)(t))}}}))((function(e){var t=e.insurer,a=e.updatePolicies,n=e.addInsurer,r=Object(s.i)().insurerId,c=Object(s.g)();Object(u.useEffect)((function(){Object(U.a)($.a.mark((function e(){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,Xe({insurerId:r});case 3:(a=e.sent)&&a.data?n(a.data):c.replace("/insurers");case 5:case"end":return e.stop()}}),e)})))()}),[t]);var l=function(){var e=Object(U.a)($.a.mark((function e(n){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<=2)){e.next=5;break}return e.next=3,xe({insurer:t.id});case 3:(r=e.sent)&&r.data&&a(r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?i.a.createElement(De,{label:"Insurer name",title:A(t.name),fallbackUrl:"/app/insurers"},i.a.createElement("div",{style:{paddingLeft:"1em",marginBottom:"1.5em"}},i.a.createElement(Be,{title:"Address",content:A("".concat(t.addressNumber," ")+"".concat(t.addressTown,", ").concat(t.addressCode))}),i.a.createElement(Be,{title:"Phone",content:t.phoneNumber})),i.a.createElement(Se,{insurerId:t.id,fallback:function(){return i.a.createElement(nt,{insurer:t})},onMount:l})):i.a.createElement(Ve,null)}));function ct(){var e=Object(s.i)().insurerId;return i.a.createElement(Te,null,i.a.createElement(rt,{insurerId:e}))}function lt(){return i.a.createElement(le.a,{title:"Vehicle details"},i.a.createElement(B.a,{gutter:16},i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Issuer name",name:"name",rules:[{required:!0,message:"Insurer name is required"},{pattern:/^[a-zA-Z0-9\s]{2,}$/,message:"At least 2 characters and no contain special characters."}]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid format"}]},i.a.createElement(Y.a,null)))),i.a.createElement(B.a,{gutter:16},i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9\s]{1,}$/,message:"Invalid address"}]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^[0-9]{1,}$/,message:"Value should be a number"}]},i.a.createElement(Y.a,null))),i.a.createElement(ue.a,null,i.a.createElement(ce.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z\s]{2,}$/,message:"Invalid town name"}]},i.a.createElement(Y.a,null)))))}var ut=Object(n.b)((function(e){return{token:e.auth.token}}),(function(e){return{addInsurer:function(t){e(Object(L.c)(t))},addSuccess:function(t){e(Object(L.e)(t))},addError:function(t){return e(Object(L.b)(t))}}}))((function(e){var t=e.addInsurer,a=e.addSuccess,n=e.token,c=e.addError,l=ce.a.useForm(),s=Object(r.a)(l,1)[0],o=Object(u.useState)(!1),m=Object(r.a)(o,2),d=m[0],p=m[1],f=function(){var e=Object(U.a)($.a.mark((function e(){var r,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,s.validateFields();case 4:return r=e.sent,e.next=7,He(Object(H.a)({token:n},r));case 7:(l=e.sent)&&l.data?(t(l.data),a("Data submitted successfully"),s.resetFields()):l&&l.error&&c(l.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),c(e.t0.message);case 14:return e.prev=14,p(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(Z.a,{pageTitle:"Register new insurer"},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,null,i.a.createElement(ce.a,{className:"OForm",form:s,colon:!1,labelAlign:"left",scrollToFirstError:!0,onFinishFailed:function(e){e.values;var t=e.errorFields;console.log("Error",t)}},i.a.createElement(lt,null),i.a.createElement(B.a,{justify:"end"},i.a.createElement(N.a,{type:"primary",onClick:f,loading:d},"Submit"))))))})),it=Object(n.b)((function(e){return{insurers:e.insurers}}),(function(e){return{updateInsurers:function(t){return e(Object(L.l)(t))}}}))((function(e){var t=e.insurers,a=e.updateInsurers,n=Object(s.h)(),c=Object(u.useState)(""),l=Object(r.a)(c,2),o=l[0],m=l[1],d=Object(u.useState)(t),p=Object(r.a)(d,2),f=p[0],E=p[1];Object(u.useEffect)((function(){if(t.length<20)try{Object(U.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR insurers",e)}}),[]),Object(u.useEffect)((function(){var e=o?t.filter((function(e){return e.name.match(o)})):t;E(e)}),[t,o]);var b=function(){var e=Object(U.a)($.a.mark((function e(t){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Qe(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Z.a,{pageTitle:"Registered Insurers"},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{flex:"auto"},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{xs:24,sm:18,lg:12},i.a.createElement(tt,{placeholder:"Insurer name",onSearch:b,enterButton:!0}))),i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{xs:24,lg:20},i.a.createElement(z.a,{itemLayout:"horizontal",dataSource:f,renderItem:function(e){return i.a.createElement(O.b,{to:{pathname:"/app/insurers/".concat(e.id),state:{prevPath:n.pathname}}},i.a.createElement(z.a.Item,null,i.a.createElement(z.a.Item.Meta,{title:A(e.name),description:"Registered "+new Date(e.createdAt).toLocaleDateString()}),i.a.createElement("div",null,i.a.createElement(G.a,null))))}}))))))})),st=Y.a.Search;var ot=Object(n.b)((function(e){return{insurers:e.insurers}}),(function(e){return{updateInsurers:function(t){return e(Object(L.l)(t))}}}))((function(e){var t=e.insurers,a=e.updateInsurers,n=Object(s.h)(),c=Object(u.useState)(""),l=Object(r.a)(c,2),m=l[0],d=l[1],p=Object(u.useState)(t),f=Object(r.a)(p,2),E=f[0],b=f[1];Object(u.useEffect)((function(){if(t.length<20)try{Object(U.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR insurers",e)}}),[]),Object(u.useEffect)((function(){var e=m?t.filter((function(e){return e.name.match(m)})):t;b(e)}),[m,t]);var h=function(){var e=Object(U.a)($.a.mark((function e(t){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Qe(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Z.a,{pageTitle:"Select insurance provider."},i.a.createElement(B.a,{justify:"center",style:{marginTop:"1.5em"}},i.a.createElement(V.a,{flex:"auto",xs:24,lg:12},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{xs:24,sm:18},i.a.createElement(st,{placeholder:"insurer name",onSearch:h,enterButton:!0}))),i.a.createElement(o.a,null),i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{flex:"auto",xs:24,lg:20},i.a.createElement(z.a,{dataSource:E,itemLayout:"horizontal",renderItem:function(e){var t,a={pathname:"/app/clients/new/".concat(e.id),state:{clientId:null===n||void 0===n||null===(t=n.state)||void 0===t?void 0:t.clientId}};return i.a.createElement(O.b,{to:a},i.a.createElement(z.a.Item,null,i.a.createElement(z.a.Item.Meta,{title:i.a.createElement(O.b,{to:a},A(e.name))}),i.a.createElement(G.a,null)))}}))))))})),mt=a(671),dt=Object(n.b)(null,(function(e){return{addSuccess:function(t){return e(Object(L.e)(t))},addError:function(t){return e(Object(L.b)(t))}}}))(mt.b),pt=a(31),ft=(a(809),a(811)),Et=a(835),bt=a(836),ht=a(837),vt=a(838),gt=Y.a.Search;function yt(e){var t=e.icon,a=e.text,n=e.type;return i.a.createElement(ft.a,null,i.a.createElement(fe.a.Text,{type:n},i.a.createElement(t)," ",a))}function jt(e){var t=e.items,a=Object(s.h)();return i.a.createElement(z.a,{itemLayout:"vertical",dataSource:t,renderItem:function(e){return i.a.createElement(O.b,{to:{pathname:"/app/policies/".concat(e.id),state:{prevPath:a.pathname}}},i.a.createElement(z.a.Item,{actions:[i.a.createElement(yt,{icon:"fire"===e.policyClass?Et.a:bt.a,text:A(e.policyClass),key:"policyClass"})].concat(Object(pt.a)(e.approved?[i.a.createElement(yt,{icon:ht.a,text:"Approved",type:"success",key:"approvedIcon"})]:[i.a.createElement(yt,{icon:vt.a,text:"Not approved",type:"warning",key:"notApprovedIcon"})])),extra:i.a.createElement(G.a,null)},i.a.createElement(z.a.Item.Meta,{title:String(e.policyNumber).toUpperCase(),description:"Applied "+new Date(e.createdAt).toLocaleDateString()})))}})}var Ot=Y.a.Search;var wt=a(265),xt=Object(n.b)((function(e){return{newApplications:e.policies.filter((function(e){return"renewal"!==e.type}))}}),(function(e){return{updatePolicies:function(t){return e(Object(L.m)(t))}}}))((function(e){var t=e.newApplications,a=e.updatePolicies,n=Object(u.useState)(""),c=Object(r.a)(n,2),l=c[0],s=c[1],o=Object(u.useState)(t),m=Object(r.a)(o,2),d=m[0],p=m[1];Object(u.useEffect)((function(){if(t.length<20)try{Object(U.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe({type:"new"});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR new policies",e)}}),[]),Object(u.useEffect)((function(){var e=l?t.filter((function(e){return e.policyNumber.match(l)})):t;p(e)}),[t,l]);var f=function(){var e=Object(U.a)($.a.mark((function e(t){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,xe(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Z.a,{pageTitle:"New Applications"},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{flex:"auto"},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{xs:24,sm:18,lg:12},i.a.createElement(gt,{placeholder:"Policy number",onSearch:f,enterButton:!0}))),i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{xs:24,lg:20},i.a.createElement(jt,{items:d}))))))})),kt=Object(n.b)((function(e){return{renewalApplications:e.policies.filter((function(e){return"renewal"===e.type}))}}),(function(e){return{updatePolicies:function(t){return e(Object(L.m)(t))}}}))((function(e){var t=e.renewalApplications,a=e.updatePolicies,n=Object(u.useState)(""),c=Object(r.a)(n,2),l=c[0],s=c[1],o=Object(u.useState)(t),m=Object(r.a)(o,2),d=m[0],p=m[1];Object(u.useEffect)((function(){if(t.length<20)try{Object(U.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe({type:"renewal"});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR renewal policies",e)}}),[]),Object(u.useEffect)((function(){var e=l?t.filter((function(e){return e.policyNumber.match(l)})):t;p(e)}),[t,l]);var f=function(){var e=Object(U.a)($.a.mark((function e(t){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,xe(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Z.a,{pageTitle:"Renewal Applications"},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{flex:"auto"},i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{xs:24,sm:18,lg:12},i.a.createElement(Ot,{placeholder:"Policy number",onSearch:f,enterButton:!0}))),i.a.createElement(B.a,{justify:"center"},i.a.createElement(V.a,{xs:24,lg:20},i.a.createElement(jt,{items:d}))))))}));function It(){var e=Object(s.j)().path;return i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"".concat(e,"/new")},i.a.createElement(xt,null)),i.a.createElement(s.b,{path:"".concat(e,"/renewals")},i.a.createElement(kt,null)),i.a.createElement(s.b,{path:"".concat(e,"/debit-note")},i.a.createElement(wt.b,null)),i.a.createElement(s.b,{path:"*"},i.a.createElement(s.a,{to:"".concat(e,"/new")})))}var Nt=a(839);function Pt(e){var t=Object(s.h)(),a=function(t){var a=t.title,n=t.children,c=Object(u.useState)(!1),l=Object(r.a)(c,2),s=l[0],o=l[1];return i.a.createElement(le.a,{onMouseEnter:function(){if(!e.routerTo)return null;o(!0)},onMouseLeave:function(){if(!e.routerTo)return null;o(!1)}},i.a.createElement("div",null,i.a.createElement(fe.a.Title,{level:4,style:{fontSize:16}},a,s&&i.a.createElement(Nt.a,{style:{marginLeft:"0.5em"}}))),n)};return i.a.createElement(V.a,{xs:24,sm:12},e.routerTo?i.a.createElement(O.b,{to:{pathname:e.routerTo,state:{prevPath:t.pathname}}},i.a.createElement(a,e,e.children)):i.a.createElement(a,e))}var Ct=fe.a.Text;function Tt(e){var t=e.policyId,a=e.vehicle,n=e.addVehicle;return Object(u.useEffect)((function(){Object(U.a)($.a.mark((function e(){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return e.next=3,Pe({policyId:t});case 3:(r=e.sent)&&r.data&&n(r.data);case 5:case"end":return e.stop()}}),e)})))()}),[a]),a?i.a.createElement(Pt,{title:"Vehicle"},i.a.createElement(B.a,null,i.a.createElement(V.a,{span:10},i.a.createElement(Ct,null,"Reg No")),i.a.createElement(V.a,null,i.a.createElement(Ct,{strong:!0},String(a.registrationNumber).toUpperCase()))),i.a.createElement(B.a,null,i.a.createElement(V.a,{span:10},i.a.createElement(Ct,null,"Make")),i.a.createElement(V.a,null,i.a.createElement(Ct,{strong:!0},A(a.make)))),i.a.createElement(B.a,null,i.a.createElement(V.a,{span:10},i.a.createElement(Ct,null,"Y.o.M")),i.a.createElement(V.a,null,i.a.createElement(Ct,{strong:!0},new Date(a.manufactureYear).getFullYear()))),i.a.createElement(B.a,null,i.a.createElement(V.a,{span:10},i.a.createElement(Ct,null,"Rating (cc)")),i.a.createElement(V.a,null,i.a.createElement(Ct,{strong:!0},a.ratingCc))),i.a.createElement(B.a,null,i.a.createElement(V.a,{span:10},i.a.createElement(Ct,null,"Body color")),i.a.createElement(V.a,null,i.a.createElement(qt,{color:a.bodyColor})))):null}function qt(e){var t=e.color;return i.a.createElement("div",{style:{display:"inline-block",width:"1em",height:"1em",backgroundColor:t,borderRadius:3}})}function St(e){var t=e.insurerId,a=e.insurer,n=e.addInsurer;return Object(u.useEffect)((function(){Object(U.a)($.a.mark((function e(){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return e.next=3,Xe({insurerId:t});case 3:(r=e.sent)&&r.data&&n(r.data);case 5:case"end":return e.stop()}}),e)})))()}),[a]),a?i.a.createElement(Pt,{title:"Insurer",routerTo:"/app/insurers/".concat(a.id)},i.a.createElement(B.a,null,i.a.createElement(V.a,{span:6},i.a.createElement(fe.a.Text,null,"Name")),i.a.createElement(V.a,null,i.a.createElement(fe.a.Text,{strong:!0},A(a.name))))):null}var At=Object(n.b)((function(e,t){var a=t.policyId,n=t.insurerId;return{vehicle:e.vehicles.find((function(e){return Number(e.policy)===Number(a)})),insurer:e.insurers.find((function(e){return Number(e.id)===Number(n)}))}}),(function(e){return{addVehicle:function(t){return e(Object(L.f)(t))},addInsurer:function(t){return e(Object(L.c)(t))}}}))((function(e){return i.a.createElement(B.a,{gutter:[32,16]},"vehicle"===e.policyClass&&i.a.createElement(Tt,e),i.a.createElement(St,e))}));var Rt=Object(n.b)((function(e,t){var a=t.clientId;return{client:e.clients.find((function(e){return e.id===a}))}}),(function(e){return{addClient:function(t){return e(Object(L.a)(t))}}}))((function(e){var t=e.client,a=e.clientId,n=e.addClient;return Object(u.useEffect)((function(){Object(U.a)($.a.mark((function e(){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,te({clientId:a});case 3:(r=e.sent)&&r.data&&n(r.data);case 5:case"end":return e.stop()}}),e)})))()}),[t]),t?i.a.createElement(I.a,{placement:"bottomLeft",title:"ID Number",content:i.a.createElement(fe.a.Text,null,t.idNumber)},i.a.createElement(O.b,{to:{pathname:"/app/clients/".concat(t.id)}},A("".concat(t.firstName," ").concat(t.lastName[0])))):null})),Ft=(a(689),a(695)),Lt=a(639);var Dt=Object(n.b)((function(e){return{token:e.auth.token}}),(function(e){return{updatePolicy:function(t){return e(Object(L.n)(t))},addSuccess:function(t){return e(Object(L.e)(t))}}}))((function(e){var t=e.policy,a=e.updatePolicy,n=e.addSuccess,c=e.token,l=Object(u.useState)(!1),s=Object(r.a)(l,2),o=s[0],m=s[1],d=function(){var e=Object(U.a)($.a.mark((function e(){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ye({policyId:t.id,token:c});case 4:(r=e.sent)&&r.data?(a(r.data),n("Policy has been approved")):m(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("ERROR",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(B.a,{style:{margin:"2em auto 1em"}},i.a.createElement(V.a,{xs:24,sm:8,span:5,style:{display:"flex",alignItems:"center"}},i.a.createElement(Ft.a,{dot:!0,status:"warning"},i.a.createElement(Lt.a,null)),i.a.createElement(fe.a.Text,{style:{marginLeft:"0.5em"}},"Not approved")),i.a.createElement(V.a,{flex:!0},i.a.createElement(N.a,{type:"primary",loading:o,onClick:d},"Approve")))})),zt=a(840);var Bt=Object(n.b)((function(e){return{token:e.auth.token}}),(function(e){return{updatePolicy:function(t){return e(Object(L.n)(t))},addSuccess:function(t){return e(Object(L.e)(t))}}}))((function(e){var t=e.policy,a=e.updatePolicy,n=e.addSuccess,c=e.token,l=Object(u.useState)(!1),s=Object(r.a)(l,2),o=s[0],m=s[1],d=function(){var e=Object(U.a)($.a.mark((function e(){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,Oe({policyId:t.id,token:c});case 4:(r=e.sent)&&r.data?(a(r.data),n("Policy has been renewed.")):m(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("ERROR",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(B.a,{style:{margin:"2em auto 1em"}},i.a.createElement(V.a,{xs:24,sm:8,span:5,style:{display:"flex",alignItems:"center"}},i.a.createElement(Ft.a,{dot:!0,status:"danger"},i.a.createElement(zt.a,null)),i.a.createElement(fe.a.Text,{style:{marginLeft:"0.5em"}},"Expired")),i.a.createElement(V.a,{flex:!0},i.a.createElement(N.a,{type:"primary",loading:o,onClick:d},"Renew")))}));function Vt(e){var t=e.id,a=e.type;return e.approved?i.a.createElement(O.b,{to:"/app/note/".concat(t,"/").concat(a)},"View Note"):i.a.createElement(fe.a.Text,{disabled:!0},"View Note")}var Mt=Object(n.b)((function(e,t){var a=t.policyId;return{policy:e.policies.find((function(e){return Number(e.id)===Number(a)}))}}),(function(e){return{addPolicy:function(t){return e(Object(L.d)(t))}}}))((function(e){var t=e.policy,a=e.addPolicy,n=Object(s.i)().policyId,r=Object(s.g)(),c=new Date>new Date(t.policyPeriodEnd);return Object(u.useEffect)((function(){Object(U.a)($.a.mark((function e(){var c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,Ie({policyId:n});case 3:(c=e.sent)&&c.data?a(c.data):r.push("/reports/applications");case 5:case"end":return e.stop()}}),e)})))()}),[t]),t?i.a.createElement(De,{label:"Policy no",title:String(t.policyNumber).toUpperCase(),fallbackUrl:"/app/reports/applications"},i.a.createElement("div",{style:{paddingLeft:"1em",marginBottom:"1.5em"}},i.a.createElement(Be,{title:"Applied",content:new Date(t.createdAt).toLocaleDateString()}),i.a.createElement(Be,{title:"Client"},i.a.createElement(Rt,{clientId:t.client})),i.a.createElement(Be,{title:"Class",content:A(t.policyClass)}),i.a.createElement(Be,{title:"Type"},i.a.createElement("div",null,A(t.type)," | ",i.a.createElement(Vt,t))),c&&i.a.createElement(Bt,{policy:t}),!t.approved&&!c&&i.a.createElement(Dt,{policy:t})),i.a.createElement(At,{policyId:t.id,insurerId:t.insurer,policyClass:t.policyClass})):i.a.createElement(Ve,null)}));function $t(e){e.insurers;var t=Object(s.i)().policyId;return i.a.createElement(Te,null,i.a.createElement(Mt,{policyId:t}))}var Ut=a(123),Yt=Object(n.b)((function(e,t){var a=t.policyId,n=e.policies.find((function(e){return Number(e.id)===Number(a)}));return{client:e.clients.find((function(e){return Number(e.id)===Number(n.client)})),vehicle:e.vehicles.find((function(e){return function(e){return Number(e.policy)===Number(a)}})),insurer:e.insurers.find((function(e){return Number(e.id)===Number(n.insurer)})),auth:e.auth,policy:n}}))(Ut.b);function Gt(){var e=Object(s.i)().policyId;return i.a.createElement(Yt,{policyId:e})}var Zt=Object(n.b)((function(e,t){var a=t.policyId,n=e.policies.find((function(e){return Number(e.id)===Number(a)}));return{client:e.clients.find((function(e){return Number(e.id)===Number(n.client)})),vehicle:e.vehicles.find((function(e){return function(e){return Number(e.policy)===Number(a)}})),insurer:e.insurers.find((function(e){return Number(e.id)===Number(n.insurer)})),auth:e.auth,policy:n}}))(wt.b);function Ht(){var e=Object(s.i)().policyId;return i.a.createElement(Zt,{policyId:e})}function Kt(){var e=Object(s.j)().path;return console.log("Getting into note!!"),i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"".concat(e,"/:policyId/new")},i.a.createElement(Gt,null)),i.a.createElement(s.b,{path:"".concat(e,"/:policyId/renewal")},i.a.createElement(Ht,null)))}var Jt=l.a.Content,_t=c.a.useBreakpoint;t.default=Object(n.b)((function(e){return{auth:e.auth}}),(function(e){return{addError:function(t){return e(Object(L.b)(t))}}}))((function(e){var t=e.auth,a=e.addError,n=Object(s.h)(),c=Object(s.j)().path,o=Object(u.useState)(!1),m=Object(r.a)(o,2),d=m[0],p=m[1],f=Object(u.useState)(!0),E=Object(r.a)(f,2),b=E[0],h=E[1],v=_t();return Object(u.useEffect)((function(){v.md||(p(!1),h(!1)),!(null===t||void 0===t?void 0:t.token)&&a("You need to login first")}),[v]),(null===t||void 0===t?void 0:t.token)?i.a.createElement(l.a,null,i.a.createElement(k,{collapsed:d,open:b}),i.a.createElement(l.a,{className:"site-layout"},i.a.createElement(D,{collapsed:d,toggle:function(){p(!d)},open:b,toggleOpen:function(){h(!b)}}),i.a.createElement(Jt,{className:"site-layout-background",style:{margin:"8px 0 0",padding:"0 24px 24px",minHeight:280,position:"relative"}},i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"".concat(c,"/clients/new")},i.a.createElement(ot,null)),i.a.createElement(s.b,{exact:!0,path:"".concat(c,"/clients/new/:insurerId")},i.a.createElement(Ze,null)),i.a.createElement(s.b,{exact:!0,path:"".concat(c,"/clients/:clientId")},i.a.createElement(Ye,null)),i.a.createElement(s.b,{path:"".concat(c,"/clients")},i.a.createElement(Ge,null)),i.a.createElement(s.b,{exact:!0,path:"".concat(c,"/insurers/new")},i.a.createElement(ut,null)),i.a.createElement(s.b,{exact:!0,path:"".concat(c,"/insurers/:insurerId")},i.a.createElement(ct,null)),i.a.createElement(s.b,{path:"".concat(c,"/insurers")},i.a.createElement(it,null)),i.a.createElement(s.b,{path:"".concat(c,"/reports/applications")},i.a.createElement(It,null)),i.a.createElement(s.b,{path:"".concat(c,"/policies/:policyId")},i.a.createElement($t,null)),i.a.createElement(s.b,{path:"".concat(c,"/admins/new")},i.a.createElement(dt,null)),i.a.createElement(s.b,{path:"".concat(c,"/note")},i.a.createElement(Kt,null)),i.a.createElement(s.b,{path:"*"},i.a.createElement(s.a,{to:"".concat(c,"/clients")})))))):i.a.createElement(s.a,{to:{pathname:"/login",state:{attemptedRoute:n.pathname}}})}))}}]);
//# sourceMappingURL=6.2a7f55c7.chunk.js.map