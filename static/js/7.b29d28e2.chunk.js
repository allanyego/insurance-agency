(this["webpackJsonporient-insurance"]=this["webpackJsonporient-insurance"]||[]).push([[7],{186:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var r=t(0),n=t.n(r),s=(t(168),t(169)),l=(t(170),t(171)),c=(t(178),t(179));function u(e){var a=e.pageTitle;return n.a.createElement(s.a,{justify:"center"},n.a.createElement(l.a,null,n.a.createElement(c.a.Title,{level:3},a)))}t(215);function i(e){var a=e.pageTitle,t=e.children;return n.a.createElement("section",{className:"Page"},a&&n.a.createElement(u,{pageTitle:a}),t)}},193:function(e,a,t){},195:function(e,a,t){"use strict";t.d(a,"c",(function(){return c})),t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return m}));var r=t(172),n=t.n(r),s=t(173),l=t(197);function c(e){return u.apply(this,arguments)}function u(){return(u=Object(s.a)(n.a.mark((function e(a){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return{firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,email:e.email,idNumber:e.idNumber,phoneNumber:e.phoneNumber,addressNumber:e.addressNumber,addressCode:e.addressCode,addressTown:e.addressTown}}(a),e.next=3,Object(l.a)({url:"".concat("/admins","/register"),method:"POST",body:t,headers:{Authorization:"Bearer ".concat(a.token)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return o.apply(this,arguments)}function o(){return(o=Object(s.a)(n.a.mark((function e(a){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.email,r=a.password,e.next=3,Object(l.a)({url:"".concat("/admins","/login"),method:"POST",body:{email:t,password:r}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(n.a.mark((function e(a){var t,r,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.adminId,r=a.oldPassword,s=a.newPassword,c=a.newPasswordConfirm,e.next=3,Object(l.a)({url:"".concat("/admins","/").concat(t,"/change-password"),method:"PUT",body:{oldPassword:r,newPassword:s,newPasswordConfirm:c}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},197:function(e,a,t){"use strict";t.d(a,"a",(function(){return E}));var r=t(172),n=t.n(r),s=t(66),l=t(173),c=t(40),u=t(45);function i(e){return console.log("TODO: handle error",e),c.a.dispatch(Object(u.b)(e)),null}var o=Object({NODE_ENV:"production",PUBLIC_URL:"/orient-insurance",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),m=o.NODE_ENV,d=o.SERVER_URL,p="production"===m?d:"http://localhost:4000/api/v1";function E(e){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(n.a.mark((function e(a){var t,r,l,c,u,o,m,d,E,f,v,h;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.url,r=a.method,l=a.body,c=a.query,u=a.headers,e.prev=1,o=b(c),m="".concat(p).concat(t,"?").concat(o),e.next=6,fetch(m,{method:r,headers:Object(s.a)({"Content-Type":"application/json"},u),body:JSON.stringify(l)});case 6:return d=e.sent,e.next=9,d.json();case 9:if(E=e.sent,f=E.status,v=E.data,h=E.error,!(d.status>=500)){e.next=15;break}return e.abrupt("return",i("Uh oh, something's not right. Try again later."));case 15:if(!(d.status>=400&&h)){e.next=17;break}return e.abrupt("return",i(h));case 17:return e.abrupt("return",{status:f,data:v,error:h});case 20:e.prev=20,e.t0=e.catch(1),i(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function b(e){if(!e)return"";var a=[];for(var t in e)if(e.hasOwnProperty(t)&&"function"!==typeof t){var r=e[t];r&&(r=r.toString(),t=encodeURIComponent(t.replace(" ","+")),r=encodeURIComponent(r.replace(" ","+")),a.push("".concat(t,"=").concat(r)))}return a.join("&")}},199:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));t(168);var r=t(169),n=(t(170),t(171)),s=(t(178),t(179)),l=t(0),c=t.n(l),u=t(186);function i(e){var a=e.title,t=e.children;return c.a.createElement(u.a,null,c.a.createElement(r.a,{justify:"center"},c.a.createElement(n.a,null,c.a.createElement("img",{src:"orient-insurance/orient-logo.png",alt:"Company logo",style:{margin:"0 auto",display:"block",borderRadius:"10%",width:"75px",marginBottom:"1em"}}),c.a.createElement(s.a.Title,{level:3},a))),t)}},201:function(e,a,t){"use strict";t.d(a,"a",(function(){return O}));t(170);var r=t(171),n=(t(168),t(169)),s=(t(182),t(183)),l=t(172),c=t.n(l),u=t(66),i=t(173),o=(t(175),t(176)),m=t(180),d=t(0),p=t.n(d),E=t(13),f=t(65),b=t(199),v=(t(187),t(185)),h=(t(181),t(184));function g(){return p.a.createElement(v.a,null,p.a.createElement(n.a,{gutter:16},p.a.createElement(r.a,{span:24},p.a.createElement(o.a.Item,{label:"Old password",name:"oldPassword",rules:[{required:!0,message:"Password is required"}]},p.a.createElement(h.a.Password,null)))),p.a.createElement(n.a,{gutter:16},p.a.createElement(r.a,{span:24},p.a.createElement(o.a.Item,{label:"New password",name:"newPassword",rules:[{required:!0,message:"Password is required"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=^.{8,45}$)/,message:"Password should contain numbers, letters and \n                at least 8 characters"}]},p.a.createElement(h.a.Password,null)))),p.a.createElement(n.a,{gutter:16},p.a.createElement(r.a,{span:24},p.a.createElement(o.a.Item,{label:"Confirm new password",dependencies:["newPassword"],hasFeedback:!0,name:"newPasswordConfirm",rules:[{required:!0,message:"Password is required"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return a("newPassword")===t?Promise.resolve():Promise.reject("Passwords do not match.")}}}]},p.a.createElement(h.a.Password,null)))))}var w=t(195);t(193);function O(e){var a=e.addError,t=Object(E.h)(),l=o.a.useForm(),v=Object(m.a)(l,1)[0],h=Object(d.useState)(!1),O=Object(m.a)(h,2),j=O[0],y=O[1],P=Object(d.useState)(!1),N=Object(m.a)(P,2),x=N[0],I=N[1],q=function(){var e=Object(i.a)(c.a.mark((function e(){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,v.validateFields();case 4:return r=e.sent,e.next=7,Object(w.a)(Object(u.a)({},null===t||void 0===t?void 0:t.state,{},r));case 7:(n=e.sent)&&n.data?(v.resetFields(),I(!0)):n&&n.error&&a(n.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurred",e.t0);case 14:return e.prev=14,y(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(b.a,{title:"Change password"},p.a.createElement(n.a,{justify:"center"},p.a.createElement(r.a,{xs:20,sm:14,md:10,lg:8,xl:6},x?p.a.createElement("div",null,"Password change successful. Proceed to ",p.a.createElement(f.b,{to:"/login"},"login")):p.a.createElement(o.a,{className:"OForm",form:v},p.a.createElement(g,null),p.a.createElement(n.a,{justify:"space-between"},p.a.createElement(f.b,{to:"/login"},p.a.createElement(s.a,{type:"link"},"Login")),p.a.createElement(s.a,{type:"primary",onClick:q,loading:j},"Submit"))))))}},204:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));t(170);var r=t(171),n=t(0),s=t.n(n);function l(e){var a=e.children;return s.a.createElement(r.a,{xs:24,sm:12,lg:8},a)}},215:function(e,a,t){},250:function(e,a,t){"use strict";t.d(a,"b",(function(){return w})),t.d(a,"a",(function(){return x}));t(170);var r=t(171),n=(t(168),t(169)),s=(t(182),t(183)),l=t(172),c=t.n(l),u=t(173),i=(t(175),t(176)),o=t(180),m=t(0),d=t.n(m),p=(t(187),t(185)),E=(t(181),t(184)),f=t(204),b={pattern:/^[a-zA-Z]{2,}$/,message:"Invalid value"};function v(){return d.a.createElement(p.a,{title:"Admin details"},d.a.createElement(n.a,{gutter:16},d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{name:"firstName",label:"First name",rules:[{required:!0,message:"First name is required"},b]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{name:"middleName",label:"Middle name",rules:[b]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{name:"lastName",label:"Last name",rules:[{required:!0,message:"Last name is required"},b]},d.a.createElement(E.a,null)))),d.a.createElement(n.a,{gutter:16},d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9]{1,}$/,message:"Address number is invalid"}]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^\d{1,}$/,message:"Postal code should be a number"}]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Town name is invalid"}]},d.a.createElement(E.a,null)))),d.a.createElement(n.a,{gutter:16},d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"ID/Passport number",name:"idNumber",rules:[{required:!0,message:"ID number is required"},{pattern:/^[0-9]{1,}$/,message:"ID/Passport should be a number"}]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},d.a.createElement(E.a,null))),d.a.createElement(f.a,null,d.a.createElement(i.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{required:!0,message:"Phone number is required"},{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid phone number"}]},d.a.createElement(E.a,null)))))}var h=t(186),g=t(195);t(193);function w(e){var a=e.addSuccess,t=e.addError,l=i.a.useForm(),p=Object(o.a)(l,1)[0],E=Object(m.useState)(!1),f=Object(o.a)(E,2),b=f[0],w=f[1],O=function(){var e=Object(u.a)(c.a.mark((function e(){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,p.validateFields();case 4:return r=e.sent,e.next=7,Object(g.c)(r);case 7:(n=e.sent)&&n.data?(a("Data submitted successfully"),p.resetFields()):n&&n.error&&t(n.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(e.t0.message);case 14:return e.prev=14,w(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(h.a,{pageTitle:"Register new admin"},d.a.createElement(n.a,{justify:"center"},d.a.createElement(r.a,null,d.a.createElement(i.a,{className:"OForm",form:p},d.a.createElement(v,null),d.a.createElement(n.a,{justify:"end"},d.a.createElement(s.a,{type:"primary",onClick:O,loading:b},"Save"))))))}var O=t(66),j=t(13),y=t(199),P=(t(248),t(251));function N(){return d.a.createElement(p.a,null,d.a.createElement(n.a,{gutter:16},d.a.createElement(r.a,{span:24},d.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},d.a.createElement(E.a,null)))),d.a.createElement(n.a,{gutter:16},d.a.createElement(r.a,{span:24},d.a.createElement(i.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Password is required"}]},d.a.createElement(E.a.Password,null)))),d.a.createElement(i.a.Item,{name:"rememberMe",valuePropName:"checked",extra:d.a.createElement("span",null,"Remember me"),className:"RememberMeInput"},d.a.createElement(P.a,{defaultChecked:!1})))}function x(e){var a=e.login,t=e.addError,l=e.auth,p=Object(j.g)(),E=Object(j.h)(),f=i.a.useForm(),b=Object(o.a)(f,1)[0],v=Object(m.useState)(!1),h=Object(o.a)(v,2),w=h[0],P=h[1],x=function(){var e=Object(u.a)(c.a.mark((function e(){var r,n,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,e.next=4,b.validateFields();case 4:return r=e.sent,e.next=7,Object(g.b)(r);case 7:(n=e.sent)&&n.error?"NEEDS_RESET"===(null===(s=n.error)||void 0===s?void 0:s.accState)?(t("You need to change your password"),p.push({pathname:"/change-password",state:{adminId:n.error.id}})):t(n.error):n&&n.data&&(b.resetFields(),a(Object(O.a)({rememberMe:r.rememberMe},n.data)),p.push((null===E||void 0===E||null===(l=E.state)||void 0===l?void 0:l.attemptedRoute)||"/app")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurred",e.t0);case 14:return e.prev=14,P(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return(null===l||void 0===l?void 0:l.token)?d.a.createElement(j.a,{to:"/app"}):d.a.createElement(y.a,{title:"Admin login"},d.a.createElement(n.a,{justify:"center"},d.a.createElement(r.a,{xs:20,sm:14,md:10,lg:8,xl:6},d.a.createElement(i.a,{className:"OForm",form:b},d.a.createElement(N,null),d.a.createElement(n.a,{justify:"end"},d.a.createElement(s.a,{type:"primary",onClick:x,loading:w},"Log in"))))))}t(201)},458:function(e,a,t){"use strict";t.r(a);var r=t(29),n=t(250),s=t(45);a.default=Object(r.b)((function(e){return{auth:e.auth}}),(function(e){return{login:function(a){return e(Object(s.g)(a))},addError:function(a){return e(Object(s.b)(a))}}}))(n.a)}}]);
//# sourceMappingURL=7.b29d28e2.chunk.js.map