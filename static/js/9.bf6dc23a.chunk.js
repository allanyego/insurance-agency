(this["webpackJsonporient-insurance"]=this["webpackJsonporient-insurance"]||[]).push([[9],{199:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var r=t(0),n=t.n(r),s=(t(172),t(173)),l=(t(175),t(176)),c=(t(179),t(180));function u(e){var a=e.pageTitle;return n.a.createElement(s.a,{justify:"center"},n.a.createElement(l.a,null,n.a.createElement(c.a.Title,{level:3},a)))}t(267);function i(e){var a=e.pageTitle,t=e.children;return n.a.createElement("section",{className:"Page"},a&&n.a.createElement(u,{pageTitle:a}),t)}},214:function(e,a,t){},217:function(e,a,t){"use strict";t.d(a,"c",(function(){return c})),t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return m}));var r=t(181),n=t.n(r),s=t(182),l=t(220);function c(e){return u.apply(this,arguments)}function u(){return(u=Object(s.a)(n.a.mark((function e(a){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return{firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,email:e.email,idNumber:e.idNumber,phoneNumber:e.phoneNumber,addressNumber:e.addressNumber,addressCode:e.addressCode,addressTown:e.addressTown}}(a),e.next=3,Object(l.a)({url:"".concat("/admins","/register"),method:"POST",body:t,headers:{Authorization:"Bearer ".concat(a.token)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return o.apply(this,arguments)}function o(){return(o=Object(s.a)(n.a.mark((function e(a){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.email,r=a.password,e.next=3,Object(l.a)({url:"".concat("/admins","/login"),method:"POST",body:{email:t,password:r}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(n.a.mark((function e(a){var t,r,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.adminId,r=a.oldPassword,s=a.newPassword,c=a.newPasswordConfirm,e.next=3,Object(l.a)({url:"".concat("/admins","/").concat(t,"/change-password"),method:"PUT",body:{oldPassword:r,newPassword:s,newPasswordConfirm:c}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},220:function(e,a,t){"use strict";t.d(a,"a",(function(){return m}));var r=t(181),n=t.n(r),s=t(67),l=t(182),c=t(40),u=t(45);function i(e){return console.log("TODO: handle error",e),c.a.dispatch(Object(u.b)(e)),null}var o="https://orient-backend-ke.herokuapp.com/api/v1";function m(e){return d.apply(this,arguments)}function d(){return(d=Object(l.a)(n.a.mark((function e(a){var t,r,l,c,u,m,d,f,b,E,h,v;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.url,r=a.method,l=a.body,c=a.query,u=a.headers,e.prev=1,m=p(c),d="".concat(o).concat(t,"?").concat(m),e.next=6,fetch(d,{method:r,headers:Object(s.a)({"Content-Type":"application/json"},u),body:JSON.stringify(l)});case 6:return f=e.sent,e.next=9,f.json();case 9:if(b=e.sent,E=b.status,h=b.data,v=b.error,!(f.status>=500)){e.next=15;break}return e.abrupt("return",i("Uh oh, something's not right. Try again later."));case 15:if(!(f.status>=400&&v)){e.next=17;break}return e.abrupt("return",i(v));case 17:return e.abrupt("return",{status:E,data:h,error:v});case 20:e.prev=20,e.t0=e.catch(1),i(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function p(e){if(!e)return"";var a=[];for(var t in e)if(e.hasOwnProperty(t)&&"function"!==typeof t){var r=e[t];r&&(r=r.toString(),t=encodeURIComponent(t.replace(" ","+")),r=encodeURIComponent(r.replace(" ","+")),a.push("".concat(t,"=").concat(r)))}return a.join("&")}},229:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));t(172);var r=t(173),n=(t(175),t(176)),s=(t(179),t(180)),l=t(0),c=t.n(l),u=t(199);function i(e){var a=e.title,t=e.children;return c.a.createElement(u.a,null,c.a.createElement(r.a,{justify:"center"},c.a.createElement(n.a,null,c.a.createElement("img",{src:"/orient-insurance/orient-logo.png",alt:"Company logo",style:{margin:"0 auto",display:"block",borderRadius:"10%",width:"75px",marginBottom:"1em"}}),c.a.createElement(s.a.Title,{level:3},a))),t)}},231:function(e,a,t){"use strict";t.d(a,"a",(function(){return j}));t(175);var r=t(176),n=(t(172),t(173)),s=(t(184),t(185)),l=t(181),c=t.n(l),u=t(67),i=t(182),o=(t(189),t(190)),m=t(186),d=t(0),p=t.n(d),f=t(13),b=t(65),E=t(229),h=(t(198),t(196)),v=(t(194),t(197));function g(){return p.a.createElement(h.a,null,p.a.createElement(n.a,{gutter:16},p.a.createElement(r.a,{span:24},p.a.createElement(o.a.Item,{label:"Old password",name:"oldPassword",rules:[{required:!0,message:"Password is required"}]},p.a.createElement(v.a.Password,null)))),p.a.createElement(n.a,{gutter:16},p.a.createElement(r.a,{span:24},p.a.createElement(o.a.Item,{label:"New password",name:"newPassword",rules:[{required:!0,message:"Password is required"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=^.{8,45}$)/,message:"Password should contain numbers, letters and \n                at least 8 characters"}]},p.a.createElement(v.a.Password,null)))),p.a.createElement(n.a,{gutter:16},p.a.createElement(r.a,{span:24},p.a.createElement(o.a.Item,{label:"Confirm new password",dependencies:["newPassword"],hasFeedback:!0,name:"newPasswordConfirm",rules:[{required:!0,message:"Password is required"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return a("newPassword")===t?Promise.resolve():Promise.reject("Passwords do not match.")}}}]},p.a.createElement(v.a.Password,null)))))}var w=t(217);t(214);function j(e){var a=e.addError,t=Object(f.h)(),l=o.a.useForm(),h=Object(m.a)(l,1)[0],v=Object(d.useState)(!1),j=Object(m.a)(v,2),y=j[0],O=j[1],P=Object(d.useState)(!1),x=Object(m.a)(P,2),k=x[0],q=x[1],I=function(){var e=Object(i.a)(c.a.mark((function e(){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,h.validateFields();case 4:return r=e.sent,e.next=7,Object(w.a)(Object(u.a)({},null===t||void 0===t?void 0:t.state,{},r));case 7:(n=e.sent)&&n.data?(h.resetFields(),q(!0)):n&&n.error&&a(n.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurred",e.t0);case 14:return e.prev=14,O(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(E.a,{title:"Change password"},p.a.createElement(n.a,{justify:"center"},p.a.createElement(r.a,{xs:20,sm:14,md:10,lg:8,xl:6},k?p.a.createElement("div",null,"Password change successful. Proceed to ",p.a.createElement(b.b,{to:"/login"},"login")):p.a.createElement(o.a,{className:"OForm",form:h},p.a.createElement(g,null),p.a.createElement(n.a,{justify:"space-between"},p.a.createElement(b.b,{to:"/login"},p.a.createElement(s.a,{type:"link"},"Login")),p.a.createElement(s.a,{type:"primary",onClick:I,loading:y},"Submit"))))))}},241:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));t(175);var r=t(176),n=t(0),s=t.n(n);function l(e){var a=e.children;return s.a.createElement(r.a,{xs:24,sm:12,lg:8},a)}},267:function(e,a,t){},347:function(e,a,t){"use strict";t.d(a,"b",(function(){return w})),t.d(a,"a",(function(){return k}));t(175);var r=t(176),n=(t(172),t(173)),s=(t(184),t(185)),l=t(181),c=t.n(l),u=t(182),i=(t(189),t(190)),o=t(186),m=t(0),d=t.n(m),p=(t(198),t(196)),f=(t(194),t(197)),b=t(241),E={pattern:/^[a-zA-Z]{2,}$/,message:"Invalid value"};function h(){return d.a.createElement(p.a,{title:"Admin details"},d.a.createElement(n.a,{gutter:16},d.a.createElement(b.a,null,d.a.createElement(i.a.Item,{name:"firstName",label:"First name",rules:[{required:!0,message:"First name is required"},E]},d.a.createElement(f.a,null))),d.a.createElement(b.a,null,d.a.createElement(i.a.Item,{name:"middleName",label:"Middle name",rules:[E]},d.a.createElement(f.a,null))),d.a.createElement(b.a,null,d.a.createElement(i.a.Item,{name:"lastName",label:"Last name",rules:[{required:!0,message:"Last name is required"},E]},d.a.createElement(f.a,null)))),d.a.createElement(n.a,{gutter:16},d.a.createElement(b.a,null,d.a.createElement(i.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9]{1,}$/,message:"Address number is invalid"}]},d.a.createElement(f.a,null))),d.a.createElement(b.a,null,d.a.createElement(i.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^\d{1,}$/,message:"Postal code should be a number"}]},d.a.createElement(f.a,null))),d.a.createElement(b.a,null,d.a.createElement(i.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Town name is invalid"}]},d.a.createElement(f.a,null)))),d.a.createElement(n.a,{gutter:16},d.a.createElement(b.a,null,d.a.createElement(i.a.Item,{label:"ID/Passport number",name:"idNumber",rules:[{required:!0,message:"ID number is required"},{pattern:/^[0-9]{1,}$/,message:"ID/Passport should be a number"}]},d.a.createElement(f.a,null))),d.a.createElement(b.a,null,d.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},d.a.createElement(f.a,null))),d.a.createElement(b.a,null,d.a.createElement(i.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{required:!0,message:"Phone number is required"},{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid phone number"}]},d.a.createElement(f.a,null)))))}var v=t(199),g=t(217);t(214);function w(e){var a=e.addSuccess,t=e.addError,l=i.a.useForm(),p=Object(o.a)(l,1)[0],f=Object(m.useState)(!1),b=Object(o.a)(f,2),E=b[0],w=b[1],j=function(){var e=Object(u.a)(c.a.mark((function e(){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,p.validateFields();case 4:return r=e.sent,e.next=7,Object(g.c)(r);case 7:(n=e.sent)&&n.data?(a("Data submitted successfully"),p.resetFields()):n&&n.error&&t(n.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(e.t0.message);case 14:return e.prev=14,w(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(v.a,{pageTitle:"Register new admin"},d.a.createElement(n.a,{justify:"center"},d.a.createElement(r.a,null,d.a.createElement(i.a,{className:"OForm",form:p},d.a.createElement(h,null),d.a.createElement(n.a,{justify:"end"},d.a.createElement(s.a,{type:"primary",onClick:j,loading:E},"Save"))))))}var j=t(67),y=t(13),O=t(229),P=(t(345),t(348));function x(){return d.a.createElement(p.a,null,d.a.createElement(n.a,{gutter:16},d.a.createElement(r.a,{span:24},d.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},d.a.createElement(f.a,null)))),d.a.createElement(n.a,{gutter:16},d.a.createElement(r.a,{span:24},d.a.createElement(i.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Password is required"}]},d.a.createElement(f.a.Password,null)))),d.a.createElement(i.a.Item,{name:"rememberMe",valuePropName:"checked",extra:d.a.createElement("span",null,"Remember me"),className:"RememberMeInput"},d.a.createElement(P.a,{defaultChecked:!1})))}function k(e){var a=e.login,t=e.addError,l=e.auth,p=Object(y.g)(),f=Object(y.h)(),b=i.a.useForm(),E=Object(o.a)(b,1)[0],h=Object(m.useState)(!1),v=Object(o.a)(h,2),w=v[0],P=v[1],k=function(){var e=Object(u.a)(c.a.mark((function e(){var r,n,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,e.next=4,E.validateFields();case 4:return r=e.sent,e.next=7,Object(g.b)(r);case 7:(n=e.sent)&&n.error?"NEEDS_RESET"===(null===(s=n.error)||void 0===s?void 0:s.accState)?(t("You need to change your password"),p.push({pathname:"/change-password",state:{adminId:n.error.id}})):t(n.error):n&&n.data&&(E.resetFields(),a(Object(j.a)({rememberMe:r.rememberMe},n.data)),p.push((null===f||void 0===f||null===(l=f.state)||void 0===l?void 0:l.attemptedRoute)||"/app")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurred",e.t0);case 14:return e.prev=14,P(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return(null===l||void 0===l?void 0:l.token)?d.a.createElement(y.a,{to:"/app"}):d.a.createElement(O.a,{title:"Admin login"},d.a.createElement(n.a,{justify:"center"},d.a.createElement(r.a,{xs:20,sm:14,md:10,lg:8,xl:6},d.a.createElement(i.a,{className:"OForm",form:E},d.a.createElement(x,null),d.a.createElement(n.a,{justify:"end"},d.a.createElement(s.a,{type:"primary",onClick:k,loading:w},"Log in"))))))}t(231)},790:function(e,a,t){"use strict";t.r(a);var r=t(29),n=t(347),s=t(45);a.default=Object(r.b)((function(e){return{auth:e.auth}}),(function(e){return{login:function(a){return e(Object(s.g)(a))},addError:function(a){return e(Object(s.b)(a))}}}))(n.a)}}]);
//# sourceMappingURL=9.bf6dc23a.chunk.js.map