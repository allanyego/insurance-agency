(this["webpackJsonporient-insurance"]=this["webpackJsonporient-insurance"]||[]).push([[6],{186:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n),c=(a(168),a(170)),l=(a(169),a(171)),u=(a(178),a(179));function s(e){var t=e.pageTitle;return r.a.createElement(c.a,{justify:"center"},r.a.createElement(l.a,null,r.a.createElement(u.a.Title,{level:3},t)))}function i(e){var t=e.pageTitle,a=e.children;return r.a.createElement("section",{style:{padding:"2.5em 0 1.5em"}},t&&r.a.createElement(s,{pageTitle:t}),a)}},193:function(e,t,a){},195:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return m}));var n=a(172),r=a.n(n),c=a(173),l=a(197);function u(e){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return{firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,email:e.email,idNumber:e.idNumber,phoneNumber:e.phoneNumber,addressNumber:e.addressNumber,addressCode:e.addressCode,addressTown:e.addressTown}}(t),e.next=3,Object(l.a)({url:"".concat("/admins","/register"),method:"POST",body:a,headers:{Authorization:"Bearer ".concat(t.token)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.next=3,Object(l.a)({url:"".concat("/admins","/login"),method:"POST",body:{email:a,password:n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(r.a.mark((function e(t){var a,n,c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.adminId,n=t.oldPassword,c=t.newPassword,u=t.newPasswordConfirm,e.next=3,Object(l.a)({url:"".concat("/admins","/").concat(a,"/change-password"),method:"PUT",body:{oldPassword:n,newPassword:c,newPasswordConfirm:u}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},197:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(172),r=a.n(n),c=a(66),l=a(173),u=a(40),s=a(45);function i(e){return console.log("TODO: handle error",e),u.a.dispatch(Object(s.b)(e)),null}var o=Object({NODE_ENV:"production",PUBLIC_URL:"/orient-insurance",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),m=o.NODE_ENV,d=o.SERVER_URL,p="production"===m?d:"http://localhost:4000/api/v1";function E(e){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(r.a.mark((function e(t){var a,n,l,u,s,o,m,d,E,f,h,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.method,l=t.body,u=t.query,s=t.headers,e.prev=1,o=b(u),m="".concat(p).concat(a,"?").concat(o),e.next=6,fetch(m,{method:n,headers:Object(c.a)({"Content-Type":"application/json"},s),body:JSON.stringify(l)});case 6:return d=e.sent,e.next=9,d.json();case 9:if(E=e.sent,f=E.status,h=E.data,g=E.error,!(d.status>=500)){e.next=15;break}return e.abrupt("return",i("Uh oh, something's not right. Try again later."));case 15:if(!(d.status>=400&&g)){e.next=17;break}return e.abrupt("return",i(g));case 17:return e.abrupt("return",{status:f,data:h,error:g});case 20:e.prev=20,e.t0=e.catch(1),i(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function b(e){if(!e)return"";var t=[];for(var a in e)if(e.hasOwnProperty(a)&&"function"!==typeof a){var n=e[a];n&&(n=n.toString(),a=encodeURIComponent(a.replace(" ","+")),n=encodeURIComponent(n.replace(" ","+")),t.push("".concat(a,"=").concat(n)))}return t.join("&")}},199:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a(168);var n=a(170),r=(a(169),a(171)),c=(a(178),a(179)),l=a(0),u=a.n(l),s=a(186);function i(e){var t=e.title,a=e.children;return u.a.createElement(s.a,null,u.a.createElement(n.a,{justify:"center"},u.a.createElement(r.a,null,u.a.createElement("img",{src:"orient-logo.png",alt:"Company logo",style:{margin:"0 auto",display:"block",borderRadius:"10%",width:"75px",marginBottom:"1em"}}),u.a.createElement(c.a.Title,{level:3},t))),a)}},201:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));a(169);var n=a(171),r=(a(168),a(170)),c=(a(182),a(183)),l=a(172),u=a.n(l),s=a(66),i=a(173),o=(a(175),a(176)),m=a(180),d=a(0),p=a.n(d),E=a(13),f=a(65),b=a(199),h=(a(187),a(185)),g=(a(181),a(184));function v(){return p.a.createElement(h.a,null,p.a.createElement(r.a,{gutter:16},p.a.createElement(n.a,{span:24},p.a.createElement(o.a.Item,{label:"Old password",name:"oldPassword",rules:[{required:!0,message:"Password is required"}]},p.a.createElement(g.a.Password,null)))),p.a.createElement(r.a,{gutter:16},p.a.createElement(n.a,{span:24},p.a.createElement(o.a.Item,{label:"New password",name:"newPassword",rules:[{required:!0,message:"Password is required"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=^.{8,45}$)/,message:"Password should contain numbers, letters and \n                at least 8 characters"}]},p.a.createElement(g.a.Password,null)))),p.a.createElement(r.a,{gutter:16},p.a.createElement(n.a,{span:24},p.a.createElement(o.a.Item,{label:"Confirm new password",dependencies:["newPassword"],hasFeedback:!0,name:"newPasswordConfirm",rules:[{required:!0,message:"Password is required"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return t("newPassword")===a?Promise.resolve():Promise.reject("Passwords do not match.")}}}]},p.a.createElement(g.a.Password,null)))))}var y=a(195);a(193);function O(e){var t=e.addError,a=Object(E.h)(),l=o.a.useForm(),h=Object(m.a)(l,1)[0],g=Object(d.useState)(!1),O=Object(m.a)(g,2),j=O[0],x=O[1],w=Object(d.useState)(!1),I=Object(m.a)(w,2),k=I[0],N=I[1],P=function(){var e=Object(i.a)(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,h.validateFields();case 4:return n=e.sent,e.next=7,Object(y.a)(Object(s.a)({},null===a||void 0===a?void 0:a.state,{},n));case 7:(r=e.sent)&&r.data?(h.resetFields(),N(!0)):r&&r.error&&t(r.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurred",e.t0);case 14:return e.prev=14,x(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(b.a,{title:"Change password"},p.a.createElement(r.a,{justify:"center"},p.a.createElement(n.a,{span:6},k?p.a.createElement("div",null,"Password change successful. Proceed to ",p.a.createElement(f.b,{to:"/login"},"login")):p.a.createElement(o.a,{className:"OForm",form:h},p.a.createElement(v,null),p.a.createElement(r.a,{justify:"space-between"},p.a.createElement(f.b,{to:"/login"},p.a.createElement(c.a,{type:"link"},"Login")),p.a.createElement(c.a,{type:"primary",onClick:P,loading:j},"Submit"))))))}},245:function(e,t,a){"use strict";a.d(t,"b",(function(){return v})),a.d(t,"a",(function(){return I}));a(168);var n=a(170),r=(a(169),a(171)),c=(a(182),a(183)),l=a(172),u=a.n(l),s=a(173),i=(a(175),a(176)),o=a(180),m=a(0),d=a.n(m),p=(a(187),a(185)),E=(a(181),a(184)),f={pattern:/^[a-zA-Z]{2,}$/,message:"Invalid value"};function b(){return d.a.createElement(p.a,{title:"Admin details"},d.a.createElement(n.a,{gutter:16},d.a.createElement(r.a,null,d.a.createElement(i.a.Item,{name:"firstName",label:"First name",rules:[{required:!0,message:"First name is required"},f]},d.a.createElement(E.a,null))),d.a.createElement(r.a,null,d.a.createElement(i.a.Item,{name:"middleName",label:"Middle name",rules:[f]},d.a.createElement(E.a,null))),d.a.createElement(r.a,null,d.a.createElement(i.a.Item,{name:"lastName",label:"Last name",rules:[{required:!0,message:"Last name is required"},f]},d.a.createElement(E.a,null)))),d.a.createElement(n.a,{gutter:16},d.a.createElement(r.a,null,d.a.createElement(i.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9]{1,}$/,message:"Address number is invalid"}]},d.a.createElement(E.a,null))),d.a.createElement(r.a,null,d.a.createElement(i.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^\d{1,}$/,message:"Postal code should be a number"}]},d.a.createElement(E.a,null))),d.a.createElement(r.a,null,d.a.createElement(i.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Town name is invalid"}]},d.a.createElement(E.a,null)))),d.a.createElement(n.a,{gutter:16},d.a.createElement(r.a,null,d.a.createElement(i.a.Item,{label:"ID/Passport number",name:"idNumber",rules:[{required:!0,message:"ID number is required"},{pattern:/^[0-9]{1,}$/,message:"ID/Passport should be a number"}]},d.a.createElement(E.a,null))),d.a.createElement(r.a,null,d.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},d.a.createElement(E.a,null))),d.a.createElement(r.a,null,d.a.createElement(i.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{required:!0,message:"Phone number is required"},{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid phone number"}]},d.a.createElement(E.a,null)))))}var h=a(186),g=a(195);a(193);function v(e){var t=e.addSuccess,a=e.addError,l=i.a.useForm(),p=Object(o.a)(l,1)[0],E=Object(m.useState)(!1),f=Object(o.a)(E,2),v=f[0],y=f[1],O=function(){var e=Object(s.a)(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,p.validateFields();case 4:return n=e.sent,e.next=7,Object(g.c)(n);case 7:(r=e.sent)&&r.data?(t("Data submitted successfully"),p.resetFields()):r&&r.error&&a(r.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a(e.t0.message);case 14:return e.prev=14,y(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(h.a,{pageTitle:"Register new admin"},d.a.createElement(n.a,{justify:"center"},d.a.createElement(r.a,null,d.a.createElement(i.a,{className:"OForm",form:p},d.a.createElement(b,null),d.a.createElement(c.a,{type:"primary",onClick:O,loading:v},"Save")))))}var y=a(66),O=a(13),j=a(199),x=(a(243),a(246));function w(){return d.a.createElement(p.a,null,d.a.createElement(n.a,{gutter:16},d.a.createElement(r.a,{span:24},d.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},d.a.createElement(E.a,null)))),d.a.createElement(n.a,{gutter:16},d.a.createElement(r.a,{span:24},d.a.createElement(i.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Password is required"}]},d.a.createElement(E.a.Password,null)))),d.a.createElement(i.a.Item,{name:"rememberMe",valuePropName:"checked",extra:d.a.createElement("span",null,"Remember me"),className:"RememberMeInput"},d.a.createElement(x.a,{defaultChecked:!1})))}function I(e){var t=e.login,a=e.addError,l=e.auth,p=Object(O.g)(),E=Object(O.h)(),f=i.a.useForm(),b=Object(o.a)(f,1)[0],h=Object(m.useState)(!1),v=Object(o.a)(h,2),x=v[0],I=v[1],k=function(){var e=Object(s.a)(u.a.mark((function e(){var n,r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.prev=1,e.next=4,b.validateFields();case 4:return n=e.sent,e.next=7,Object(g.b)(n);case 7:(r=e.sent)&&r.error?"NEEDS_RESET"===(null===(c=r.error)||void 0===c?void 0:c.accState)?(a("You need to change your password"),p.push({pathname:"/change-password",state:{adminId:r.error.id}})):a(r.error):r&&r.data&&(b.resetFields(),t(Object(y.a)({rememberMe:n.rememberMe},r.data)),p.push((null===E||void 0===E||null===(l=E.state)||void 0===l?void 0:l.attemptedRoute)||"/app")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("An error occurred",e.t0);case 14:return e.prev=14,I(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return(null===l||void 0===l?void 0:l.token)?d.a.createElement(O.a,{to:"/app"}):d.a.createElement(j.a,{title:"Admin login"},d.a.createElement(n.a,{justify:"center"},d.a.createElement(r.a,{span:6},d.a.createElement(i.a,{className:"OForm",form:b},d.a.createElement(w,null),d.a.createElement(c.a,{type:"primary",onClick:k,loading:x},"Log in")))))}a(201)},293:function(e,t,a){},443:function(e,t,a){},444:function(e,t,a){},448:function(e,t,a){},457:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(180),c=(a(228),a(230)),l=a(0),u=a.n(l),s=a(13),i=(a(229),a(235)),o=(a(290),a(451)),m=a(458),d=a(459),p=a(460),E=a(461),f=a(462),b=a(463),h=a(464),g=a(465),v=a(466),y=a(467),O=(a(293),a(65)),j=c.a.Sider,x=o.a.SubMenu;function w(e){var t=e.collapsed;return u.a.createElement(j,{trigger:null,collapsible:!0,collapsed:t},u.a.createElement("div",{className:"logo"},u.a.createElement("img",{src:"/orient-logo.png",alt:"Company logo"})),u.a.createElement(o.a,{theme:"dark",mode:"inline"},u.a.createElement(x,{key:"sub1",title:u.a.createElement("span",null,u.a.createElement(m.a,null),u.a.createElement("span",null,"Clients"))},u.a.createElement(o.a.Item,{key:"1"},u.a.createElement(O.b,{to:"/app/clients/new"},u.a.createElement(d.a,null),u.a.createElement("span",null,"New client"))),u.a.createElement(o.a.Item,{key:"2"},u.a.createElement(O.b,{to:"/app/clients"},u.a.createElement(p.a,null),u.a.createElement("span",null,"List clients")))),u.a.createElement(x,{key:"sub2",title:u.a.createElement("span",null,u.a.createElement(E.a,null),u.a.createElement("span",null,"Issuers"))},u.a.createElement(o.a.Item,{key:"3"},u.a.createElement(O.b,{to:"/app/insurers/new"},u.a.createElement(f.a,null),u.a.createElement("span",null,"New issuer"))),u.a.createElement(o.a.Item,{key:"4"},u.a.createElement(O.b,{to:"/app/insurers"},u.a.createElement(b.a,null),u.a.createElement("span",null,"List issuers")))),u.a.createElement(x,{key:"sub3",title:u.a.createElement("span",null,u.a.createElement(h.a,null),u.a.createElement("span",null,"Reports"))},u.a.createElement(o.a.Item,{key:"5"},u.a.createElement(O.b,{to:"/app/reports/applications/new"},u.a.createElement(g.a,null),u.a.createElement("span",null,"New applications"))),u.a.createElement(o.a.Item,{key:"6"},u.a.createElement(O.b,{to:"/app/reports/applications/renewals"},u.a.createElement(v.a,null),u.a.createElement("span",null,"Renewal applications")))),u.a.createElement(i.a,null),u.a.createElement(o.a.Item,{key:"7"},u.a.createElement(O.b,{to:"/app/admins/new"},u.a.createElement(y.a,null),u.a.createElement("span",null,"Add admin")))))}a(255);var I=a(283),k=(a(182),a(183)),N=a(468),P=a(469),C=a(470),T=function(e){return(e=e.split(" ")).map((function(e){return(e=e.split(""))[0]=e[0].toUpperCase(),e.join("")})).join(" ")},S=c.a.Header;var q=a(45),A=Object(n.b)((function(e){return{user:e.auth}}),(function(e){return{logout:function(){return e(Object(q.h)())}}}))((function(e){var t=e.collapsed,a=e.toggle,n=e.logout,r=e.user,c=Object(s.g)();return u.a.createElement(S,{className:"site-layout-background",style:{display:"flex",padding:"0 3em 0 0",justifyContent:"space-between",alignItems:"center"}},u.a.createElement(t?N.a:P.a,{className:"trigger",onClick:a}),u.a.createElement(I.a,{trigger:"click",placement:"bottomRight",title:T("".concat(r.firstName," ").concat(r.lastName)),content:u.a.createElement(k.a,{block:!0,icon:u.a.createElement(C.a,null),type:"danger",onClick:function(){n(),c.push("/login")}},"Logout")},u.a.createElement(m.a)))})),R=(a(205),a(204)),F=(a(168),a(170)),L=(a(169),a(171)),D=a(172),M=a.n(D),B=a(173),z=(a(181),a(184)),U=a(471),V=a(186),$=a(66),Y=a(197);function G(e){return H.apply(this,arguments)}function H(){return(H=Object(B.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return{firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,email:e.email,idNumber:e.idNumber,phoneNumber:e.phoneNumber,addressNumber:e.addressNumber,addressCode:e.addressCode,addressTown:e.addressTown,kraPin:e.kraPin,insurer:e.insurer,occupation:e.occupation}}(t),"vehicle"===(n=function(e){return{policyNumber:e.policyNumber,policyPeriod:e.policyPeriod,sumInsured:e.sumInsured,premiumRate:e.premiumRate,pvt:e.pvt,excessProtection:e.excessProtection,antiTheftCoverage:e.antiTheftCoverage,rookie:e.rookie,passengersPllCoverage:e.passengersPllCoverage,policyClass:e.policyClass}}(t)).policyClass&&(n.vehicle=function(e){return{registrationNumber:e.registrationNumber,make:e.make,bodyType:e.bodyType,bodyColor:e.bodyColor,manufactureYear:e.manufactureYear,engineNumber:e.engineNumber,chasisNumber:e.chasisNumber,tonnage:e.tonnage,ratingCc:e.ratingCc}}(t)),e.next=5,Object(Y.a)({url:"/clients",method:"POST",body:Object($.a)({policy:n},a),headers:{Authorization:"Bearer ".concat(t.token)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return Z.apply(this,arguments)}function Z(){return(Z=Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.a)({url:"/clients",method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return W.apply(this,arguments)}function W(){return(W=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.a)({url:"/clients",method:"GET",query:{search:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return X.apply(this,arguments)}function X(){return(X=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.clientId,e.next=3,Object(Y.a)({url:"".concat("/clients","/").concat(a),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=z.a.Search;var ee=a(284),te=(a(175),a(176)),ae=(a(187),a(185)),ne={pattern:/^[a-zA-Z]{2,}$/,message:"Invalid value"};function re(){return u.a.createElement(ae.a,{title:"Client details"},u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{name:"firstName",label:"First name",rules:[{required:!0,message:"First name is required"},ne]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{name:"middleName",label:"Middle name",rules:[ne]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{name:"lastName",label:"Last name",rules:[{required:!0,message:"Last name is required"},ne]},u.a.createElement(z.a,null)))),u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9]{1,}$/,message:"Address number is invalid"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^\d{1,}$/,message:"Postal code should be a number"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Town name is invalid"}]},u.a.createElement(z.a,null)))),u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"ID/Passport number",name:"idNumber",rules:[{required:!0,message:"ID number is required"},{pattern:/^[0-9]{1,}$/,message:"ID/Passport should be a number"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid email"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{required:!0,message:"Phone number is required"},{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid phone number"}]},u.a.createElement(z.a,null)))),u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Occupation",name:"occupation",rules:[{required:!0,message:"Occupation is required"},{pattern:/^[a-zA-Z]{2,}$/,message:"Occupation should be a string"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"KRA pin",name:"kraPin",rules:[{required:!0,message:"KRA pin is required"},{pattern:/^[a-zA-Z0-9]{11}$/,message:"KRA Pin should be 11 characters"}]},u.a.createElement(z.a,null)))))}a(243);var ce=a(246),le=(a(429),a(453)),ue=(a(431),a(452)),se=(a(286),a(281)),ie=(a(178),a(179));function oe(){return u.a.createElement(ae.a,{title:"Vehicle details"},u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Registration number",name:"registrationNumber",rules:[{required:!0,message:"Vehicle registration no is required"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Make",name:"make",rules:[{required:!0,message:"Vehicle make is required"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Body type",name:"bodyType",rules:[{required:!0,message:"Vehicle body type is required"}]},u.a.createElement(z.a,null)))),u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Body color",name:"bodyColor",rules:[{required:!0,message:"Vehicle body color is required"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Chasis number",name:"chasisNumber",rules:[{required:!0,message:"Vehicle chasis number is required"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Engine number",name:"engineNumber",rules:[{required:!0,message:"Vehicle body type is required"}]},u.a.createElement(z.a,null)))),u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Rating (cc)",name:"ratingCc",rules:[{required:!0,message:"Vehicle rating (cc) is required"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Tonnage",name:"tonnage",rules:[{required:!0,message:"Vehicle tonnage is required"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Year of manufacture",name:"manufactureYear",rules:[{required:!0,message:"Vehicle year of manufacture is required"}]},u.a.createElement(se.a.YearPicker,null)))))}var me=ie.a.Text;function de(){var e=Object(l.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],c=Object(l.useState)(null),s=Object(r.a)(c,2),o=s[0],m=s[1];return u.a.createElement(ae.a,{title:"Policy details"},u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,{flex:"auto"},u.a.createElement(te.a.Item,{label:"Policy number",name:"policyNumber",rules:[{required:!0,message:"Policy number is required"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,{flex:"auto"},u.a.createElement(te.a.Item,{label:"Policy Period"},u.a.createElement(z.a.Group,null,u.a.createElement(te.a.Item,{name:["policyPeriod","start"],help:"Select start date",rules:[{required:!0,message:"Start date required"}]},u.a.createElement(se.a,{disabledDate:function(e){return e.isBefore()},onChange:function(e){return m(e)}})),u.a.createElement(te.a.Item,{name:["policyPeriod","end"],help:"Select end date",rules:[{required:!0,message:"End date required"}]},u.a.createElement(se.a,{disabledDate:function(e){return o?e.isSameOrBefore(o):e.isSameOrBefore()}}))))),u.a.createElement(L.a,{flex:"auto"},u.a.createElement(te.a.Item,{label:"Sum insured",name:"sumInsured",rules:[{required:!0,message:"Sum is required"}]},u.a.createElement(ue.a,{min:1})))),u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,{flex:"auto"},u.a.createElement(te.a.Item,{label:"PVT",name:"pvt",rules:[{required:!0,message:"PVT is required"}]},u.a.createElement(ue.a,{min:1}))),u.a.createElement(L.a,{flex:"auto"},u.a.createElement(te.a.Item,{label:"Premium rate",name:"premiumRate",rules:[{required:!0,message:"Premium rate is required"}]},u.a.createElement(ue.a,{min:1})))),u.a.createElement(F.a,null,u.a.createElement(te.a.Item,{label:"Select the insurance class",name:"policyClass",rules:[{required:!0,message:"Please select policy class"}]},u.a.createElement(le.a.Group,{onChange:function(e){if("fire"===e.target.value)return n(!1);n(!0)}},u.a.createElement(le.a,{value:"fire"},"Fire"),u.a.createElement(le.a,{value:"vehicle"},"Vehicle")))),a&&u.a.createElement("div",null,u.a.createElement(i.a,null),u.a.createElement(oe,null),u.a.createElement(me,{strong:!0,style:{marginBottom:"0.7em"}},"Extension"),u.a.createElement(F.a,{className:"OFormRow"},u.a.createElement(L.a,{span:12},u.a.createElement(te.a.Item,{help:"5% with a min of Kshs30,000/=",label:"Add excess protection",name:"excessProtection",valuePropName:"checked"},u.a.createElement(ce.a,{defaultChecked:!1}))),u.a.createElement(L.a,{span:12},u.a.createElement(te.a.Item,{help:"+ Kshs5000",label:"Young/New drivers",name:"rookie",valuePropName:"checked"},u.a.createElement(ce.a,{defaultChecked:!1}))),u.a.createElement(L.a,{span:12},u.a.createElement(te.a.Item,{label:"Passengers (PLL)",name:"passengersPllCoverage",valuePropName:"checked"},u.a.createElement(ce.a,{defaultChecked:!1}))),u.a.createElement(L.a,{span:12},u.a.createElement(te.a.Item,{help:"10% antitheft device, 20% no device",label:"Theft",name:"antiTheftCoverage",valuePropName:"checked"},u.a.createElement(ce.a,{defaultChecked:!1}))))))}function pe(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"vehicle"===(a=function(e){return{insurer:e.insurer,client:e.client,policyNumber:e.policyNumber,policyPeriod:e.policyPeriod,sumInsured:e.sumInsured,premiumRate:e.premiumRate,pvt:e.pvt,excessProtection:e.excessProtection,antiTheftCoverage:e.antiTheftCoverage,rookie:e.rookie,passengersPllCoverage:e.passengersPllCoverage,policyClass:e.policyClass}}(t)).policyClass&&(a.vehicle=function(e){return{registrationNumber:e.registrationNumber,make:e.make,bodyType:e.bodyType,bodyColor:e.bodyColor,manufactureYear:e.manufactureYear,engineNumber:e.engineNumber,chasisNumber:e.chasisNumber,tonnage:e.tonnage,ratingCc:e.ratingCc}}(t)),e.next=4,Object(Y.a)({url:"/policies",method:"POST",body:a,headers:{Authorization:"Bearer ".concat(t.token)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return be.apply(this,arguments)}function be(){return(be=Object(B.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyId,n=t.token,e.next=3,Object(Y.a)({url:"".concat("/policies","/").concat(a),method:"PUT",body:{approved:!0},headers:{Authorization:"Bearer ".concat(n)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(B.a)(M.a.mark((function e(t){var a,n,r,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyNumber,n=t.client,r=t.insurer,c=t.type,e.next=3,Object(Y.a)({url:"/policies",method:"GET",query:{search:a,client:n,insurer:r,type:c}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyId,e.next=3,Object(Y.a)({url:"".concat("/policies","/").concat(a),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return je.apply(this,arguments)}function je(){return(je=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.policyId,e.next=3,Object(Y.a)({url:"".concat("/policies","/").concat(a,"/vehicle"),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(193);a(443);function xe(e){var t=e.children;return u.a.createElement(F.a,{justify:"center",style:{paddingTop:"2em"}},u.a.createElement(L.a,{span:18},u.a.createElement(ae.a,null,t)))}var we=a(473);var Ie=Object(n.b)((function(e,t){var a=t.clientId,n=t.insurerId;return null!=a?{subscriptions:e.policies.filter((function(e){return e.client===a}))}:{subscriptions:e.policies.filter((function(e){return e.insurer===n}))}}))((function(e){var t=e.subscriptions,a=e.fallback,n=e.extra,r=void 0===n?function(){}:n,c=e.onMount,i=Object(s.h)();return Object(l.useEffect)((function(){Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:case"end":return e.stop()}}),e)})))()}),[]),!t.length&&a?u.a.createElement("div",null,r(),a()):u.a.createElement("div",null,r(),u.a.createElement(ae.a,{title:"Subscriptions"},u.a.createElement(R.a,{size:"small",itemLayout:"horizontal",dataSource:t,renderItem:function(e){return u.a.createElement(O.b,{to:{pathname:"/app/policies/".concat(e.id),state:{prevPath:i.pathname}}},u.a.createElement(R.a.Item,null,u.a.createElement(R.a.Item.Meta,{title:String(e.policyNumber).toUpperCase()}),u.a.createElement("div",null,u.a.createElement(U.a,null))))}})))})),ke=a(472),Ne=ie.a.Text,Pe=ie.a.Title;function Ce(e){var t=e.label,a=e.title,n=e.fallbackUrl,r=Object(s.g)(),c=Object(s.h)();return u.a.createElement(F.a,null,u.a.createElement(L.a,{flex:"auto",style:{display:"flex",alignItems:"center"}},u.a.createElement(Ne,{disabled:!0,style:{display:"block",marginRight:"0.5em"}},t,":"),u.a.createElement(Pe,{level:3,style:{display:"block"}},a)),u.a.createElement(L.a,{style:{display:"flex",alignItems:"center"}},u.a.createElement(k.a,{danger:!0,size:"small",shape:"circle",icon:u.a.createElement(ke.a,null),onClick:function(){var e;return r.push((null===c||void 0===c||null===(e=c.state)||void 0===e?void 0:e.prevPath)||n)}})))}function Te(e){var t=e.header||!0;return u.a.createElement("div",null,t&&u.a.createElement(Ce,e),e.children)}a(444);function Se(){return u.a.createElement(Te,{header:!1},u.a.createElement("div",{className:"ProfileSkeleton"},u.a.createElement("div",null),u.a.createElement("div",null),u.a.createElement("div",null)))}var qe=ie.a.Text;function Ae(e){var t=e.client;return u.a.createElement(F.a,{justify:"center",style:{margin:"2em auto 2em"}},u.a.createElement(L.a,null,u.a.createElement(qe,{style:{marginRight:"1em"},strong:!0},"Add new policy for client"),u.a.createElement(O.b,{to:{pathname:"/app/clients/new",state:{clientId:t.id}}},u.a.createElement(k.a,{type:"primary",shape:"circle",icon:u.a.createElement(we.a,null)}))))}var Re=Object(n.b)((function(e,t){var a=t.clientId;return{client:e.clients.find((function(e){return Number(e.id)===Number(a)}))}}),(function(e){return{updatePolicies:function(t){return e(Object(q.m)(t))},addClient:function(t){return e(Object(q.a)(t))}}}))((function(e){var t=e.client,a=e.updatePolicies,n=e.addClient,r=Object(s.i)().clientId,c=Object(s.g)();Object(l.useEffect)((function(){Object(B.a)(M.a.mark((function e(){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,J({clientId:r});case 3:(a=e.sent)&&a.data?n(a.data):c.replace("/clients");case 5:case"end":return e.stop()}}),e)})))()}),[t]);var i=function(){var e=Object(B.a)(M.a.mark((function e(n){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<=2)){e.next=5;break}return e.next=3,he({client:t.id});case 3:(r=e.sent)&&r.data&&a(r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?u.a.createElement(Te,{label:"Client name",title:T("".concat(t.firstName," ").concat(t.lastName)),fallbackUrl:"/app/clients"},u.a.createElement("div",{style:{paddingLeft:"1em",marginBottom:"1.5em"}},u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(qe,null,"ID No")),u.a.createElement(L.a,{flex:!0},u.a.createElement(qe,{strong:!0},t.idNumber))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(qe,null,"Address")),u.a.createElement(L.a,{flex:!0},u.a.createElement(qe,{strong:!0},T("".concat(t.addressNumber," ")+"".concat(t.addressTown,", ").concat(t.addressCode))))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(qe,null,"Occupation")),u.a.createElement(L.a,{flex:!0},u.a.createElement(qe,{strong:!0},T(t.occupation)))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(qe,null,"Phone")),u.a.createElement(L.a,{flex:!0},u.a.createElement(qe,{strong:!0},t.phoneNumber))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(qe,null,"Email")),u.a.createElement(L.a,{flex:!0},u.a.createElement(qe,{strong:!0},t.email))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(qe,null,"Member since")),u.a.createElement(L.a,{flex:!0},u.a.createElement(qe,{strong:!0},new Date(t.createdAt).toLocaleDateString())))),u.a.createElement(Ie,{clientId:t.id,extra:function(){return u.a.createElement(Ae,{client:t})},onMount:i})):u.a.createElement(Se,null)}));function Fe(e){e.clients;var t=Object(s.i)().clientId;return u.a.createElement(xe,null,u.a.createElement(Re,{clientId:t}))}var Le=Object(n.b)((function(e){return{clients:e.clients}}),(function(e){return{updateClients:function(t){return e(Object(q.k)(t))}}}))((function(e){var t=e.clients,a=e.updateClients,n=Object(s.h)(),c=Object(l.useState)(""),i=Object(r.a)(c,2),o=i[0],m=i[1],d=Object(l.useState)(t),p=Object(r.a)(d,2),E=p[0],f=p[1];Object(l.useEffect)((function(){if(t.length<20)try{Object(B.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 7:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR clients",e)}}),[]),Object(l.useEffect)((function(){var e=o?t.filter((function(e){return e.firstName.match(o)||e.lastName.match(o)||e.middleName.match(o)})):t;f(e)}),[o,t]);var b=function(){var e=Object(B.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,_(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(V.a,{pageTitle:"Clients"},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{flex:"auto"},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{span:14},u.a.createElement(Q,{placeholder:"client name",onSearch:b,enterButton:!0}))),u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{span:20},u.a.createElement(R.a,{itemLayout:"horizontal",dataSource:E,renderItem:function(e){var t=e.firstName,a=e.lastName;return u.a.createElement(O.b,{to:{pathname:"/app/clients/".concat(e.id),state:{prevPath:n.pathname}}},u.a.createElement(R.a.Item,null,u.a.createElement(R.a.Item.Meta,{title:T("".concat(t," ").concat(a)),description:"Member since "+new Date(e.createdAt).toLocaleDateString()}),u.a.createElement("div",null,u.a.createElement(U.a,null))))}}))))))})),De=Object(n.b)((function(e){return{token:e.auth.token}}),(function(e){return{addClient:function(t){e(Object(q.a)(t))},addVehicle:function(t){e(Object(q.f)(t))},addPolicy:function(t){e(Object(q.d)(t))},addSuccess:function(t){e(Object(q.e)(t))},addError:function(t){return e(Object(q.b)(t))}}}))((function(e){var t,a=e.addClient,n=e.addPolicy,c=e.addVehicle,i=e.addSuccess,o=e.addError,m=e.token,d=Object(s.i)().insurerId,p=Object(s.h)(),E=null===p||void 0===p||null===(t=p.state)||void 0===t?void 0:t.clientId,f=E?"Add policy for client":"Register new client",b=te.a.useForm(),h=Object(r.a)(b,1)[0],g=Object(l.useState)(!1),v=Object(r.a)(g,2),y=v[0],O=v[1],j=function(e){O(!0);try{e().then((function(){i("Data submitted successfully"),h.resetFields()}))}catch(t){o(t.message)}finally{O(!1)}};return u.a.createElement(V.a,{pageTitle:f},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,null,u.a.createElement(te.a,{className:"OForm",form:h},!E&&u.a.createElement(re,null),u.a.createElement(de,null),u.a.createElement(k.a,{type:"primary",onClick:E?function(){j(function(){var e=Object(B.a)(M.a.mark((function e(){var t,a,r,l,u;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.validateFields();case 2:return t=e.sent,e.next=5,pe(Object($.a)({insurer:d,client:E,token:m},t));case 5:if(!(a=e.sent)||!a.data){e.next=12;break}r=a.data,l=r.vehicle,u=Object(ee.a)(r,["vehicle"]),n(u),l&&c(l),e.next=14;break;case 12:if(!a||!a.error){e.next=14;break}throw Error(a.error);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())}:function(){j(function(){var e=Object(B.a)(M.a.mark((function e(){var t,r,l,u,s,i,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.validateFields();case 2:return t=e.sent,e.next=5,G(Object($.a)({insurer:d,token:m},t));case 5:if(!(r=e.sent)||!r.data){e.next=14;break}l=r.data,u=l.policy,s=Object(ee.a)(l,["policy"]),a(s),i=u.vehicle,o=Object(ee.a)(u,["vehicle"]),n(o),i&&c(i),e.next=16;break;case 14:if(!r||!r.error){e.next=16;break}throw Error(r.error);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())},loading:y},"Submit")))))}));function Me(e){return Be.apply(this,arguments)}function Be(){return(Be=Object(B.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,n=Object(ee.a)(t,["token"]),e.next=3,Object(Y.a)({url:"/insurers",method:"POST",body:n,headers:{Authorization:"Bearer ".concat(a)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.a)({url:"/insurers",method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return $e.apply(this,arguments)}function $e(){return($e=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.a)({url:"/insurers",method:"GET",query:{search:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.insurerId,e.next=3,Object(Y.a)({url:"".concat("/insurers","/").concat(a),method:"GET"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var He=z.a.Search;var Ke=ie.a.Text;function Ze(e){var t=e.insurer;return u.a.createElement(F.a,{justify:"center",style:{marginTop:"4em"}},u.a.createElement(L.a,null,u.a.createElement(Ke,{style:{marginRight:"1em"},strong:!0},"This insurer has no clients yet."),u.a.createElement(O.b,{to:{pathname:"/app/clients/new/".concat(t.id)}},u.a.createElement(k.a,{type:"primary",shape:"circle",icon:u.a.createElement(we.a,null)}))))}var _e=Object(n.b)((function(e,t){var a=t.insurerId;return{insurer:e.insurers.find((function(e){return Number(e.id)===Number(a)}))}}),(function(e){return{updatePolicies:function(t){return e(Object(q.m)(t))},addInsurer:function(t){return e(Object(q.c)(t))}}}))((function(e){var t=e.insurer,a=e.updatePolicies,n=e.addInsurer,r=Object(s.i)().insurerId,c=Object(s.g)();Object(l.useEffect)((function(){Object(B.a)(M.a.mark((function e(){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,Ye({insurerId:r});case 3:(a=e.sent)&&a.data?n(a.data):c.replace("/insurers");case 5:case"end":return e.stop()}}),e)})))()}),[t]);var i=function(){var e=Object(B.a)(M.a.mark((function e(n){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<=2)){e.next=5;break}return e.next=3,he({insurer:t.id});case 3:(r=e.sent)&&r.data&&a(r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?u.a.createElement(Te,{label:"Insurer name",title:T(t.name),fallbackUrl:"/app/insurers"},u.a.createElement("div",{style:{paddingLeft:"1em",marginBottom:"1.5em"}},u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(Ke,null,"Address")),u.a.createElement(L.a,{flex:!0},u.a.createElement(Ke,{strong:!0},T("".concat(t.addressNumber," ")+"".concat(t.addressTown,", ").concat(t.addressCode))))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(Ke,null,"Phone")),u.a.createElement(L.a,{flex:!0},u.a.createElement(Ke,{strong:!0},t.phoneNumber)))),u.a.createElement(Ie,{insurerId:t.id,fallback:function(){return u.a.createElement(Ze,{insurer:t})},onMount:i})):u.a.createElement(Se,null)}));function We(){var e=Object(s.i)().insurerId;return u.a.createElement(xe,null,u.a.createElement(_e,{insurerId:e}))}function Je(){return u.a.createElement(ae.a,{title:"Vehicle details"},u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Issuer name",name:"name",rules:[{required:!0,message:"Insurer name is required"},{pattern:/^[a-zA-Z0-9\s]{2,}$/,message:"At least 2 characters and no contain special characters."}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Phone number",name:"phoneNumber",rules:[{pattern:/^0(7\d{1}|20)\d{7}$/,message:"Invalid format"}]},u.a.createElement(z.a,null)))),u.a.createElement(F.a,{gutter:16},u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Address",name:"addressNumber",rules:[{required:!0,message:"Address number is required"},{pattern:/^[a-zA-Z0-9\s]{1,}$/,message:"Invalid address"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Postal code",name:"addressCode",rules:[{required:!0,message:"Postal code is required"},{pattern:/^[0-9]{1,}$/,message:"Value should be a number"}]},u.a.createElement(z.a,null))),u.a.createElement(L.a,null,u.a.createElement(te.a.Item,{label:"Town",name:"addressTown",rules:[{required:!0,message:"Address town is required"},{pattern:/^[a-zA-Z\s]{2,}$/,message:"Invalid town name"}]},u.a.createElement(z.a,null)))))}var Xe=Object(n.b)((function(e){return{token:e.auth.token}}),(function(e){return{addInsurer:function(t){e(Object(q.c)(t))},addSuccess:function(t){e(Object(q.e)(t))},addError:function(t){return e(Object(q.b)(t))}}}))((function(e){var t=e.addInsurer,a=e.addSuccess,n=e.token,c=e.addError,s=te.a.useForm(),i=Object(r.a)(s,1)[0],o=Object(l.useState)(!1),m=Object(r.a)(o,2),d=m[0],p=m[1],E=function(){var e=Object(B.a)(M.a.mark((function e(){var r,l;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,i.validateFields();case 4:return r=e.sent,e.next=7,Me(Object($.a)({token:n},r));case 7:(l=e.sent)&&l.data?(t(l.data),a("Data submitted successfully"),i.resetFields()):l&&l.error&&c(l.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),c(e.t0.message);case 14:return e.prev=14,p(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(V.a,{pageTitle:"Register new insurer"},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,null,u.a.createElement(te.a,{className:"OForm",form:i,colon:!1,labelAlign:"left",scrollToFirstError:!0,onFinishFailed:function(e){e.values;var t=e.errorFields;console.log("Error",t)}},u.a.createElement(Je,null),u.a.createElement(k.a,{type:"primary",onClick:E,loading:d},"Submit")))))})),Qe=Object(n.b)((function(e){return{insurers:e.insurers}}),(function(e){return{updateInsurers:function(t){return e(Object(q.l)(t))}}}))((function(e){var t=e.insurers,a=e.updateInsurers,n=Object(s.h)(),c=Object(l.useState)(""),i=Object(r.a)(c,2),o=i[0],m=i[1],d=Object(l.useState)(t),p=Object(r.a)(d,2),E=p[0],f=p[1];Object(l.useEffect)((function(){if(t.length<20)try{Object(B.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR insurers",e)}}),[]),Object(l.useEffect)((function(){var e=o?t.filter((function(e){return e.name.match(o)})):t;f(e)}),[t,o]);var b=function(){var e=Object(B.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ve(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(V.a,{pageTitle:"Registered Insurers"},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{flex:"auto"},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{span:14},u.a.createElement(He,{placeholder:"Insurer name",onSearch:b,enterButton:!0}))),u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{span:20},u.a.createElement(R.a,{itemLayout:"horizontal",dataSource:E,renderItem:function(e){return u.a.createElement(O.b,{to:{pathname:"/app/insurers/".concat(e.id),state:{prevPath:n.pathname}}},u.a.createElement(R.a.Item,null,u.a.createElement(R.a.Item.Meta,{title:T(e.name),description:"Registered "+new Date(e.createdAt).toLocaleDateString()}),u.a.createElement("div",null,u.a.createElement(U.a,null))))}}))))))})),et=z.a.Search;var tt=Object(n.b)((function(e){return{insurers:e.insurers}}),(function(e){return{updateInsurers:function(t){return e(Object(q.l)(t))}}}))((function(e){var t=e.insurers,a=e.updateInsurers,n=Object(s.h)(),c=Object(l.useState)(""),o=Object(r.a)(c,2),m=o[0],d=o[1],p=Object(l.useState)(t),E=Object(r.a)(p,2),f=E[0],b=E[1];Object(l.useEffect)((function(){if(t.length<20)try{Object(B.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR insurers",e)}}),[]),Object(l.useEffect)((function(){var e=m?t.filter((function(e){return e.name.match(m)})):t;b(e)}),[m,t]);var h=function(){var e=Object(B.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ve(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(V.a,{pageTitle:"Select insurance provider."},u.a.createElement(F.a,{justify:"center",style:{marginTop:"1.5em"}},u.a.createElement(L.a,{flex:"auto",span:16},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{span:18},u.a.createElement(et,{placeholder:"insurer name",onSearch:h,enterButton:!0}))),u.a.createElement(i.a,null),u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{flex:"auto",span:16},u.a.createElement(R.a,{dataSource:f,itemLayout:"horizontal",renderItem:function(e){var t,a={pathname:"/app/clients/new/".concat(e.id),state:{clientId:null===n||void 0===n||null===(t=n.state)||void 0===t?void 0:t.clientId}};return u.a.createElement(O.b,{to:a},u.a.createElement(R.a.Item,null,u.a.createElement(R.a.Item.Meta,{title:u.a.createElement(O.b,{to:a},T(e.name))}),u.a.createElement(U.a,null)))}}))))))})),at=a(245),nt=Object(n.b)(null,(function(e){return{addSuccess:function(t){return e(Object(q.e)(t))},addError:function(t){return e(Object(q.b)(t))}}}))(at.b),rt=(a(445),a(447)),ct=a(4),lt=a(474),ut=a(475),st=a(476),it=a(477),ot=z.a.Search;function mt(e){var t=e.icon,a=e.text,n=e.type;return u.a.createElement(rt.a,null,u.a.createElement(ie.a.Text,{type:n},u.a.createElement(t)," ",a))}var dt=z.a.Search;var pt={policyHoldersFund:40,trainingLevy:32,withholdingTax:160},Et=(a(448),ie.a.Text),ft=ie.a.Title,bt=pt.trainingLevy.toFixed(2),ht=pt.policyHoldersFund.toFixed(2),gt=16e3+pt.policyHoldersFund+pt.trainingLevy,vt=pt.withholdingTax.toFixed(2),yt=gt-1600+pt.withholdingTax;function Ot(){return u.a.createElement(F.a,null,u.a.createElement(L.a,{flex:"auto"},u.a.createElement(ft,{level:3},"PREMIUM DEBIT NOTE"),u.a.createElement(F.a,{className:"AddressRow"},u.a.createElement(L.a,{flex:"auto"},u.a.createElement("p",null,u.a.createElement(Et,{strong:!0},"Insurer")),u.a.createElement("p",null,"CARE INSURANCE AGENCY"),u.a.createElement("p",null,"P.O BOX 34"),u.a.createElement("p",null,"KERUGOYA")),u.a.createElement(L.a,{flex:"auto"},u.a.createElement("p",null,u.a.createElement(Et,{strong:!0},"Client")),u.a.createElement("p",null,"Martin muthika"),u.a.createElement("p",null,"p.o box 56"),u.a.createElement("p",null,"KERUGOYA"))),u.a.createElement(F.a,null,u.a.createElement(L.a,{flex:"auto"},u.a.createElement(F.a,{gutter:24},u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,{strong:!0},"Policy Number:")),u.a.createElement(L.a,null,u.a.createElement(Et,null,"EMB/7878/2011"))),u.a.createElement(F.a,{gutter:24},u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,{strong:!0},"Regarding:")),u.a.createElement(L.a,null,u.a.createElement(Et,null,"RENEWAL PREMIUM"))),u.a.createElement(F.a,{gutter:24},u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,{strong:!0},"Class:")),u.a.createElement(L.a,null,u.a.createElement(Et,null,"Vehicle"))),u.a.createElement(F.a,{gutter:24},u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,{strong:!0},"Reg No:")),u.a.createElement(L.a,null,u.a.createElement(Et,null,"KBA 457Y")))),u.a.createElement(L.a,{flex:"auto"},u.a.createElement(F.a,{gutter:24},u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,{strong:!0},"Cover from:")),u.a.createElement(L.a,null,u.a.createElement(Et,null,"11/3/2019"))),u.a.createElement(F.a,{gutter:24},u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,{strong:!0},"To:")),u.a.createElement(L.a,null,u.a.createElement(Et,null,"11/3/2020"))))),u.a.createElement(F.a,{justify:"end",style:{marginTop:"2em"}},u.a.createElement(L.a,{span:12},u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Et,{strong:!0},"Basic premium:")),u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,null,16e3))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Et,{strong:!0},"Policyholders fund:")),u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,null,ht))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Et,{strong:!0},"Training levy:")),u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,null,bt))),u.a.createElement("hr",null),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Et,{strong:!0},"RENEWAL PREMIUM:")),u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,{strong:!0},gt.toFixed(2)))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Et,{strong:!0},"Commission:")),u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,null,"-",1600))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Et,{strong:!0},"Withholding Tax:")),u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,null,vt))),u.a.createElement("hr",null),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Et,{strong:!0},"Net Amount Due:")),u.a.createElement(L.a,{span:8,className:"text-right"},u.a.createElement(Et,{strong:!0},yt.toFixed(2)))))),u.a.createElement(F.a,{style:{marginTop:"3.5em"}},u.a.createElement(L.a,{flex:"auto"},"Prepared by: ",u.a.createElement(Et,{strong:!0},"ESEDIEM")),u.a.createElement(L.a,{flex:"auto"},"Signed By: ",u.a.createElement(Et,{strong:!0},"For and on behalf of KENYA ORIENT INSURANCE LTD")),u.a.createElement(L.a,{flex:"auto"},u.a.createElement(Et,{strong:!0},"13-Nov-2019")))))}var jt=Object(n.b)((function(e){return{newApplications:e.policies.filter((function(e){return"renewal"!==e.type}))}}),(function(e){return{updatePolicies:function(t){return e(Object(q.m)(t))}}}))((function(e){var t=e.newApplications,a=e.updatePolicies,n=Object(s.h)(),c=Object(l.useState)(""),i=Object(r.a)(c,2),o=i[0],m=i[1],d=Object(l.useState)(t),p=Object(r.a)(d,2),E=p[0],f=p[1];Object(l.useEffect)((function(){if(t.length<20)try{Object(B.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he({type:"new"});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR new policies",e)}}),[]),Object(l.useEffect)((function(){var e=o?t.filter((function(e){return e.policyNumber.match(o)})):t;f(e)}),[t,o]);var b=function(){var e=Object(B.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,he(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(V.a,{pageTitle:"New Applications"},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{flex:"auto"},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{span:14},u.a.createElement(ot,{placeholder:"Policy number",onSearch:b,enterButton:!0}))),u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{span:20},u.a.createElement(R.a,{itemLayout:"vertical",dataSource:E,renderItem:function(e){return u.a.createElement(O.b,{to:{pathname:"/app/policies/".concat(e.id),state:{prevPath:n.pathname}}},u.a.createElement(R.a.Item,{actions:[u.a.createElement(mt,{icon:"fire"===e.policyClass?lt.a:ut.a,text:"".concat(e.policyClass||"vehicle"),key:"policyClass"})].concat(Object(ct.a)(e.approved?[u.a.createElement(mt,{icon:st.a,text:"Approved",type:"success",key:"approvedIcon"})]:[u.a.createElement(mt,{icon:it.a,text:"Not approved",type:"warning",key:"notApprovedIcon"})])),extra:u.a.createElement(U.a,null)},u.a.createElement(R.a.Item.Meta,{title:String(e.policyNumber).toUpperCase(),description:"Applied "+new Date(e.createdAt).toLocaleDateString()})))}}))))))})),xt=Object(n.b)((function(e){return{renewalApplications:e.policies.filter((function(e){return"renewal"===e.type}))}}),(function(e){return{updatePolicies:function(t){return e(Object(q.m)(t))}}}))((function(e){var t=e.renewalApplications,a=e.updatePolicies,n=Object(s.h)(),c=Object(l.useState)(""),i=Object(r.a)(c,2),o=i[0],m=i[1],d=Object(l.useState)(t),p=Object(r.a)(d,2),E=p[0],f=p[1];Object(l.useEffect)((function(){if(t.length<20)try{Object(B.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he({type:"renewal"});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a(t.data);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("FETCH ERROR renewal policies",e)}}),[]),Object(l.useEffect)((function(){var e=o?t.filter((function(e){return e.policyNumber.match(o)})):t;f(e)}),[t,o]);var b=function(){var e=Object(B.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,he(t);case 5:(n=e.sent)&&n.data&&a(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(V.a,{pageTitle:"Renewal Applications"},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{flex:"auto"},u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{span:14},u.a.createElement(dt,{placeholder:"Policy number",onSearch:b,enterButton:!0}))),u.a.createElement(F.a,{justify:"center"},u.a.createElement(L.a,{span:20},u.a.createElement(R.a,{itemLayout:"horizontal",dataSource:E,renderItem:function(e){return u.a.createElement(O.b,{to:{pathname:"/app/policies/".concat(e.id),state:{prevPath:n.pathname}}},u.a.createElement(R.a.Item,null,u.a.createElement(R.a.Item.Meta,{title:String(e.policyNumber).toUpperCase(),description:"Applied "+new Date(e.createdAt).toLocaleDateString()}),u.a.createElement("div",null,u.a.createElement(U.a,null))))}}))))))}));function wt(){var e=Object(s.j)().path;return u.a.createElement(s.d,null,u.a.createElement(s.b,{path:"".concat(e,"/new")},u.a.createElement(jt,null)),u.a.createElement(s.b,{path:"".concat(e,"/renewals")},u.a.createElement(xt,null)),u.a.createElement(s.b,{path:"".concat(e,"/debit-note")},u.a.createElement(Ot,null)),u.a.createElement(s.b,{path:"*"},u.a.createElement(s.a,{to:"".concat(e,"/new")})))}var It=a(478);function kt(e){var t=Object(s.h)(),a=function(t){var a=t.title,n=t.children,c=Object(l.useState)(!1),s=Object(r.a)(c,2),i=s[0],o=s[1];return u.a.createElement(ae.a,{onMouseEnter:function(){if(!e.routerTo)return null;o(!0)},onMouseLeave:function(){if(!e.routerTo)return null;o(!1)}},u.a.createElement("div",null,u.a.createElement(ie.a.Title,{level:4,style:{fontSize:16}},a,i&&u.a.createElement(It.a,{style:{marginLeft:"0.5em"}}))),n)};return u.a.createElement(L.a,{span:12},e.routerTo?u.a.createElement(O.b,{to:{pathname:e.routerTo,state:{prevPath:t.pathname}}},u.a.createElement(a,e,e.children)):u.a.createElement(a,e))}var Nt=ie.a.Text;function Pt(e){var t=e.policyId,a=e.vehicle,n=e.addVehicle;return Object(l.useEffect)((function(){Object(B.a)(M.a.mark((function e(){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return e.next=3,Oe({policyId:t});case 3:(r=e.sent)&&r.data&&n(r.data);case 5:case"end":return e.stop()}}),e)})))()}),[a]),a?u.a.createElement(kt,{title:"Vehicle"},u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Nt,null,"Reg No")),u.a.createElement(L.a,null,u.a.createElement(Nt,{strong:!0},String(a.registrationNumber).toUpperCase()))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Nt,null,"Make")),u.a.createElement(L.a,null,u.a.createElement(Nt,{strong:!0},T(a.make)))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Nt,null,"Y.o.M")),u.a.createElement(L.a,null,u.a.createElement(Nt,{strong:!0},new Date(a.manufactureYear).getFullYear()))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Nt,null,"Rating (cc)")),u.a.createElement(L.a,null,u.a.createElement(Nt,{strong:!0},a.ratingCc))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:10},u.a.createElement(Nt,null,"Body color")),u.a.createElement(L.a,null,u.a.createElement(Ct,{color:a.bodyColor})))):null}function Ct(e){var t=e.color;return u.a.createElement("div",{style:{display:"inline-block",width:"1em",height:"1em",backgroundColor:t,borderRadius:3}})}function Tt(e){var t=e.insurerId,a=e.insurer,n=e.addInsurer;return Object(l.useEffect)((function(){Object(B.a)(M.a.mark((function e(){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return e.next=3,Ye({insurerId:t});case 3:(r=e.sent)&&r.data&&n(r.data);case 5:case"end":return e.stop()}}),e)})))()}),[a]),a?u.a.createElement(kt,{title:"Insurer",routerTo:"/app/insurers/".concat(a.id)},u.a.createElement(F.a,null,u.a.createElement(L.a,{span:6},u.a.createElement(ie.a.Text,null,"Name")),u.a.createElement(L.a,null,u.a.createElement(ie.a.Text,{strong:!0},T(a.name))))):null}var St=Object(n.b)((function(e,t){var a=t.policyId,n=t.insurerId;return{vehicle:e.vehicles.find((function(e){return Number(e.policy)===Number(a)})),insurer:e.insurers.find((function(e){return Number(e.id)===Number(n)}))}}),(function(e){return{addVehicle:function(t){return e(Object(q.f)(t))},addInsurer:function(t){return e(Object(q.c)(t))}}}))((function(e){return u.a.createElement(F.a,{gutter:32},"vehicle"===e.policyClass&&u.a.createElement(Pt,e),u.a.createElement(Tt,e))}));var qt=Object(n.b)((function(e,t){var a=t.clientId;return{client:e.clients.find((function(e){return e.id===a}))}}),(function(e){return{addClient:function(t){return e(Object(q.a)(t))}}}))((function(e){var t=e.client,a=e.clientId,n=e.addClient;return Object(l.useEffect)((function(){Object(B.a)(M.a.mark((function e(){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,J({clientId:a});case 3:(r=e.sent)&&r.data&&n(r.data);case 5:case"end":return e.stop()}}),e)})))()}),[t]),t?u.a.createElement(I.a,{placement:"bottomLeft",title:"ID Number",content:u.a.createElement(ie.a.Text,null,t.idNumber)},u.a.createElement(O.b,{to:{pathname:"/app/clients/".concat(t.id)}},T("".concat(t.firstName," ").concat(t.lastName[0])))):null})),At=(a(449),a(454)),Rt=a(479);var Ft=Object(n.b)((function(e){return{token:e.auth.token}}),(function(e){return{updatePolicy:function(t){return e(Object(q.n)(t))},addSuccess:function(t){return e(Object(q.e)(t))}}}))((function(e){var t=e.policy,a=e.updatePolicy,n=e.addSuccess,c=e.token,s=Object(l.useState)(!1),i=Object(r.a)(s,2),o=i[0],m=i[1],d=function(){var e=Object(B.a)(M.a.mark((function e(){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,fe({policyId:t.id,token:c});case 4:(r=e.sent)&&r.data&&(a(r.data),n("Policy has been approved")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("ERROR",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(F.a,{style:{margin:"2em auto 1em"}},u.a.createElement(L.a,{span:5,style:{display:"flex",alignItems:"center"}},u.a.createElement(At.a,{dot:!0,status:"warning"},u.a.createElement(Rt.a,null)),u.a.createElement(ie.a.Text,{style:{marginLeft:"0.5em"}},"Not approved")),u.a.createElement(L.a,{flex:!0},u.a.createElement(k.a,{type:"primary",loading:o,onClick:d},"Approve")))})),Lt=ie.a.Text;var Dt=Object(n.b)((function(e,t){var a=t.policyId;return{policy:e.policies.find((function(e){return Number(e.id)===Number(a)}))}}),(function(e){return{addPolicy:function(t){return e(Object(q.d)(t))}}}))((function(e){var t=e.policy,a=e.addPolicy,n=Object(s.i)().policyId,r=Object(s.g)();return Object(l.useEffect)((function(){Object(B.a)(M.a.mark((function e(){var c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,ve({policyId:n});case 3:(c=e.sent)&&c.data?a(c.data):r.push("/reports/applications");case 5:case"end":return e.stop()}}),e)})))()}),[t]),t?u.a.createElement(Te,{label:"Policy no",title:String(t.policyNumber).toUpperCase(),fallbackUrl:"/app/reports/applications"},u.a.createElement("div",{style:{paddingLeft:"1em",marginBottom:"1.5em"}},u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(Lt,null,"Applied")),u.a.createElement(L.a,{flex:!0},u.a.createElement(Lt,{strong:!0},new Date(t.createdAt).toLocaleDateString()))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(Lt,null,"Client")),u.a.createElement(L.a,{flex:!0},u.a.createElement(qt,{clientId:t.client}))),u.a.createElement(F.a,null,u.a.createElement(L.a,{span:5},u.a.createElement(Lt,null,"Class")),u.a.createElement(L.a,{flex:!0},u.a.createElement(Lt,{strong:!0},t.policyClass))),!t.approved&&u.a.createElement(Ft,{policy:t})),u.a.createElement(St,{policyId:t.id,insurerId:t.insurer,policyClass:t.policyClass})):u.a.createElement(Se,null)}));function Mt(e){e.insurers;var t=Object(s.i)().policyId;return u.a.createElement(xe,null,u.a.createElement(Dt,{policyId:t}))}var Bt=c.a.Content;t.default=Object(n.b)((function(e){return{auth:e.auth}}),(function(e){return{addError:function(t){return e(Object(q.b)(t))}}}))((function(e){var t=e.auth,a=e.addError,n=Object(s.h)(),i=Object(s.j)().path,o=Object(l.useState)(!1),m=Object(r.a)(o,2),d=m[0],p=m[1];return Object(l.useEffect)((function(){!(null===t||void 0===t?void 0:t.token)&&a("You need to login first")})),(null===t||void 0===t?void 0:t.token)?u.a.createElement(c.a,null,u.a.createElement(w,{collapsed:d}),u.a.createElement(c.a,{className:"site-layout"},u.a.createElement(A,{collapsed:d,toggle:function(){p(!d)}}),u.a.createElement(Bt,{className:"site-layout-background",style:{margin:"8px 0 0",padding:"0 24px 24px",minHeight:280,position:"relative"}},u.a.createElement(s.d,null,u.a.createElement(s.b,{exact:!0,path:"".concat(i,"/clients/new")},u.a.createElement(tt,null)),u.a.createElement(s.b,{exact:!0,path:"".concat(i,"/clients/new/:insurerId")},u.a.createElement(De,null)),u.a.createElement(s.b,{exact:!0,path:"".concat(i,"/clients/:clientId")},u.a.createElement(Fe,null)),u.a.createElement(s.b,{path:"".concat(i,"/clients")},u.a.createElement(Le,null)),u.a.createElement(s.b,{exact:!0,path:"".concat(i,"/insurers/new")},u.a.createElement(Xe,null)),u.a.createElement(s.b,{exact:!0,path:"".concat(i,"/insurers/:insurerId")},u.a.createElement(We,null)),u.a.createElement(s.b,{path:"".concat(i,"/insurers")},u.a.createElement(Qe,null)),u.a.createElement(s.b,{path:"".concat(i,"/reports/applications")},u.a.createElement(wt,null)),u.a.createElement(s.b,{path:"".concat(i,"/policies/:policyId")},u.a.createElement(Mt,null)),u.a.createElement(s.b,{path:"".concat(i,"/admins/new")},u.a.createElement(nt,null)),u.a.createElement(s.b,{path:"*"},u.a.createElement(s.a,{to:"".concat(i,"/clients")})))))):(console.log("Redirecting",t),u.a.createElement(s.a,{to:{pathname:"/login",state:{attemptedRoute:n.pathname}}}))}))}}]);
//# sourceMappingURL=6.b5696f40.chunk.js.map